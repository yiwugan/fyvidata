<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on 星期日, 八月 26, 2018, 9:00 下午 -->
<!-- MuClient version 4.94 -->
<!-- Written by Nick Gammon -->
<!-- Home Page: http://www.mushclient.com/ -->
<muclient>

<!-- triggers -->

<triggers
   muclient_version="4.94"
   world_file_version="15"
   date_saved="2018-08-26 21:00:43"
  >
  <trigger
   group="taskmove"
   keep_evaluating="y"
   match="(\S+)\((?P&lt;iname&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="10"
  >
  <send>local i="%&lt;iname&gt;".toLowerCase()
--Note(i)
if ArrayGet("taskalllist",i)==i then
Note("---&gt;TASK located task " .. i)
ArraySet("tasklocatedlist",i,i)
endelse if !ArrayKeyExists("taskdangernpclist",i) then
--local objects
local n=1;
while (ArrayKeyExists("tasknpclist",i.. " " .. n) then
n=n+1;
end
i=i.. " " .. n;
ArraySet("tasknpclist",i,i)
--Note("task npc:" .. i)
end
</send>
  </trigger>
  <trigger
   group="tasklocate"
   keep_evaluating="y"
   match="(\S+)\((?P&lt;iname&gt;\D+)\)$"
   regexp="y"
   send_to="12"
   sequence="10"
  >
  <send>local i="%&lt;iname&gt;".toLowerCase()
--Note(i)
if ArrayGet("taskalllist",i)==i then
Note("---&gt;TASK located task " .. i)
ArraySet("tasklocatedlist",i,i)
end
</send>
  </trigger>
  <trigger
   group="taskreturn"
   match="(\S+)\((?P&lt;iname&gt;\D+)\)$"
   regexp="y"
   send_to="12"
   sequence="10"
  >
  <send>local i="%&lt;iname&gt;".toLowerCase()
--ArraySet("taskfoundlist",i,i)
if ArrayGet("taskalllist",i)==i then
Note("return task:" .. i)
varMyQueue1.enqueue(i)
end</send>
  </trigger>
  <trigger
   enabled="y"
   match="MudOS driver tells you: You have no heart beat!"
   regexp="y"
   sequence="10"
  >
  <send>burn</send>
  </trigger>
  <trigger
   group="tasklist"
   match="\『(?P&lt;cname&gt;\D+)\』\((?P&lt;ename&gt;\D+)\)(.*)\『(?P&lt;cname2&gt;\D+)\』\((?P&lt;ename2&gt;\D+)\)"
   regexp="y"
   send_to="12"
   sequence="10"
  >
  <send>
 --Note("%&lt;ename&gt; %&lt;ename2&gt;")
local t="%&lt;ename&gt;";
if t~="bstu" and t~="feicui-pin" and t~="huaqun" and t~="handkerchief" and t~="jiledan" and t~="magrobe" and t~="quman" and t~="wave-hammer" then
ArraySet("taskalllist",t,t)
ArraySet("taskavailablelist",t,t)
end
t="%&lt;ename2&gt;";
if t~="bstu" and t~="feicui-pin" and t~="huaqun" and t~="handkerchief" and t~="jiledan" and t~="magrobe" and t~="quman" and t~="wave-hammer" then
ArraySet("taskalllist",t,t)
ArraySet("taskavailablelist",t,t)
end
</send>
  </trigger>
  <trigger
   group="mission-kill"
   match="李坏目不转睛地盯着你，准备发出致命一击。"
   regexp="y"
   sequence="10"
  >
  <send>burn</send>
  </trigger>
  <trigger
   enabled="y"
   group="move"
   match="你要对谁耳语些什麽？|阋对谁耳语些什麽?"
   regexp="y"
   send_to="12"
   sequence="10"
  >
  <send>Execute("actionNextRun")</send>
  </trigger>
  <trigger
   group="tasklocate"
   match="(\S+)(\s+)=(\s+)(?P&lt;iname&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="30"
  >
  <send>local i="%&lt;iname&gt;".toLowerCase()
--Note(i)
if ArrayGet("taskalllist",i)==i then
Note("---&gt;TASK located task " .. i)
ArraySet("tasklocatedlist",i,i)
end</send>
  </trigger>
  <trigger
   group="taskmove"
   keep_evaluating="y"
   match="^(?P&lt;locname&gt;\S+)$"
   regexp="y"
   send_to="12"
   sequence="30"
  >
  <send>SetVariable("varTaskLastLocation","%&lt;locname&gt;")
--Note("task location:".. "%&lt;locname&gt;")
</send>
  </trigger>
  <trigger
   group="taskmove"
   keep_evaluating="y"
   match="^&gt;(\s)(?P&lt;locname&gt;\S+)$"
   regexp="y"
   send_to="12"
   sequence="30"
  >
  <send>SetVariable("varTaskLastLocation","%&lt;locname&gt;")
--Note("task location:".. "%&lt;locname&gt;")
</send>
  </trigger>
  <trigger
   enabled="y"
   match="突然，几个衣衫褴褛的劫匪从暗处跳了出来，打叫道：“快抢银子啊，抢了就回村！"
   regexp="y"
   sequence="30"
  >
  <send>forgive yes
give silver to leader</send>
  </trigger>
  <trigger
   group="fly"
   match="中止"
   regexp="y"
   send_to="12"
   sequence="30"
  >
  <send>Send("whisper")
EnableGroup("fly",0)
</send>
  </trigger>
  <trigger
   group="jiedume"
   match="终于发作光了"
   regexp="y"
   send_to="12"
   sequence="30"
  >
  <send>Execute("eat jiduan")
EnableGroup("jiedume",0)
SetVariable("varInPoison",0)</send>
  </trigger>
  <trigger
   group="jiedume"
   match="蝙蝠剧毒发作了"
   regexp="y"
   send_to="12"
   sequence="30"
  >
  <send>Note("---&gt; in poison")
SetVariable("varInPoison",1)</send>
  </trigger>
  <trigger
   group="mission-action"
   match="【队伍】(.+)：mission-abort$"
   regexp="y"
   send_to="10"
   sequence="40"
  >
  <send>burn
use pill
stopp</send>
  </trigger>
  <trigger
   group="jiedu"
   keep_evaluating="y"
   match="你成功地逼出体内的巨毒！"
   regexp="y"
   send_to="12"
   sequence="40"
  >
  <send>EnableGroup("jiedu",0)
SetVariable("varPoison",0)
DoAfterSpecial(1,"whisper",10)
</send>
  </trigger>
  <trigger
   enabled="y"
   match="突然，几个劫匪从暗处跳了出来，阴笑道：“货和人命都留下来吧！。"
   regexp="y"
   send_to="10"
   sequence="40"
  >
  <send>k robber
k robber 2
k robber 3
k robber 4
k robber 5
k robber 6
ss1</send>
  </trigger>
  <trigger
   enabled="y"
   match="小人上有八十老母，下有三岁子女，一家老少全靠我撑着啊！"
   regexp="y"
   sequence="40"
  >
  <send>forgive yes
give silver to leader</send>
  </trigger>
  <trigger
   group="returntaskitem"
   match="= (?P&lt;iname&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>local n="%&lt;iname&gt;";
local i=n.indexOf(",")
if i&gt;0)
n=n.substr(0,i)
if ArrayGet("listTaskItem",n)~=nil then
Note("---&gt; task item:" .. n)
varMyQueue5.enqueue(n)
end
</send>
  </trigger>
  <trigger
   group="savetaskitem2"
   match="= (?P&lt;iname&gt;.+),(.*)$"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>local n="%&lt;iname&gt;";
if ArrayGet("listTaskItem",n)~=nil then
Note("---&gt; task item:" .. n)
varMyQueue5.enqueue(n)
end

</send>
  </trigger>
  <trigger
   group="returntaskitem2"
   match="= (?P&lt;iname&gt;.+),(.*)$"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>local n="%&lt;iname&gt;";
if ArrayGet("listTaskItem",n)~=nil then
Note("---&gt; task item:" .. n)
varMyQueue5.enqueue(n)
end

</send>
  </trigger>
  <trigger
   group="mission-ask"
   match="【队伍】(.+)：mission-location-unknown|组织现在还没有关于(.+)的情报。"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>Note("---&gt; unknown mission location")
local fs=GetVariable("varMissionFengsan")
local t=GetVariable("varMissionTarget")

if fs=="yes" and t~="feng san" then
--fengsan logic
Execute("missionAsk")

endelse if t=="unknown" then
Execute("missionAsk")

 else 
EnableGroup("mission-ask",0)
Execute("missionLocate")
end</send>
  </trigger>
  <trigger
   enabled="y"
   match="【风云】巡逻士兵默默地走了，风中飘散的长发|【传闻】黑白二道似乎又再蠢蠢欲动，平静已久的江湖，"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>Note("---&gt; REFRESH NOW")
SetVariable("countBanditLocationFY",0)
SetVariable("countBanditLocationCX",0)
SetVariable("countBanditLocationNH",0)
SetVariable("countBanditLocationGW",0)
local c=GetVariable("commandRefresh")
if c~=nil and c~="" and c~="none" then
  Note("---&gt;refresh command :" .. c)
  Execute(c)
end
local now=os.time()
SetVariable("timeRefresh",now)


</send>
  </trigger>
  <trigger
   group="qjl_swim"
   match="荷花荡"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>EnableGroup("qjl_swim",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="jump"
   match="你的精气神全得到了恢复！"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>local a=GetVariable("varJumpCommand")
Note("---&gt; jump command:" .. a)
Execute(a)
</send>
  </trigger>
  <trigger
   group="mission-action"
   match="你看起来已经力不从心了"
   regexp="y"
   sequence="50"
  >
  <send>use pill</send>
  </trigger>
  <trigger
   group="autokill"
   match="你上一个动作还没有完成！"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>DoAfterSpecial(1,"get nothing123",10)</send>
  </trigger>
  <trigger
   group="jiedu"
   match="你上一个动作还没有完成，不能施用外功"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>DoAfterSpecial(1,"perform herb.jiedu",10)</send>
  </trigger>
  <trigger
   group="mission-action"
   match="你似乎十分疲惫，看来需要好好休息了"
   regexp="y"
   send_to="10"
   sequence="50"
  >
  <send>use pill</send>
  </trigger>
  <trigger
   group="mission-action-fly"
   match="你似乎十分疲惫，看来需要好好休息了"
   regexp="y"
   send_to="10"
   sequence="50"
  >
  <send>use pill</send>
  </trigger>
  <trigger
   group="fly"
   match="你无法感受到这个人的内力"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>Send("")
ResetTimers()
DeleteTemporaryTimers()
EnableGroup("fly",0)
DoAfterSpecial(1,"whisper",10)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)土娼"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>initActionQueue()
pushSingleAction("west;south;south;west;west;west;south;give flower to girl;whisper")
pushSingleAction("north;east;east;east;north;north;east;giveSilver;whisper;delivery")
startAction(false)

</send>
  </trigger>
  <trigger
   group="mission-item"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>local zhanjia=GetVariable("varCheckItemZhanjia")
local yeguo=GetVariable("varCheckItemYeguo")
local sword=GetVariable("varCheckItemSword")
local blade=GetVariable("varCheckItemBlade")
local whip=GetVariable("varCheckItemWhip")
local cash=GetVariable("varCheckItemCash")
local ttcash=GetVariable("varCheckItemTTCash")
local seal=GetVariable("varCheckItemSeal")
local pill=GetVariable("varCheckItemPill")

Execute("missionCheckItemReset")
/*
if zhanjia=="no" then
Execute("south;south;south;east;buy zhanjia from xiangling;wear zhanjia")
Doafterspecial(4,"id;west;north;north;north;ask",10)
endelse 
*/
if yeguo=="no" then
--Execute("south;south;south;east;buy ye guo from xiangling;wear zhanjia")
--Doafterspecial(4,"id;west;north;north;north;ask",10)
Execute("gg0 ye guo")
Doafterspecial(1,"id;ask",10)
endelse if cash=="no" then
Execute("south;south;south;south;east;wit 900000")
Doafterspecial(5,"id;west;north;north;north;north;ask",10)

endelse if ttcash=="no" then
Execute("south;south;south;south;east;wit 1000000")
Doafterspecial(5,"id;west;north;north;north;north;ask",10)

endelse if seal=="no" then
Execute("north;west;west;west;north;buy back seal from xian;pp0 seal;buy back seal from xian;pp0 seal")
Doafterspecial(1,"buy back seal from xian;pp0 seal;buy back seal from xian;pp0 seal;buy back seal from xian;pp0 seal;buy back seal from xian;pp0 seal;buy back seal from xian;pp0 seal",10)
Doafterspecial(5,"gg0 seal;id;south;east;east;east;south;ask",10)

endelse if sword=="no" then
Execute("north;north;north;north;north;west;buy sword from zhuge")
Doafterspecial(5,"id;east;south;south;south;south;south;ask",10)

endelse if whip=="no" then
Execute("north;north;north;north;north;west;buy whip from zhuge")
Doafterspecial(5,"id;east;south;south;south;south;south;ask",10)

endelse if blade=="no" then
Execute("north;north;north;north;north;west;buy blade from zhuge")
Doafterspecial(5,"id;east;south;south;south;south;south;ask",10)

endelse if pill==0 then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pillall-3")
Doafterspecial(6,"east;id;ask",10)

endelse if pill==1 then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pillall-2")
Doafterspecial(6,"east;id;ask",10)

endelse if pill==2 then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pillall-3")
Doafterspecial(6,"east;id;ask",10)

 else 
EnableGroup("mission-item",0)
Execute("whisper")
end</send>
  </trigger>
  <trigger
   group="tasklocate"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>EnableGroup("tasklocate",0)
local m=ArraySize("tasklocatedlist")
if m==0 then
Execute("tasklocatedone")
 else 
 local ts=ArrayExportKeys("tasklocatedlist",",")
 local loctasks=ts.split(",")
 local j=0;
 local o=GetVariable("varTaskLastObjects").split(";")
 local i=0;
 fori=0;i&lt;loctasks.length;i++ then
 local act="";
 ArrayDeleteKey("taskavailablelist",loctasks[i])
 ArrayDeleteKey("taskarealist",loctasks[i])
 ArrayDeleteKey("tasknearbylist",loctasks[i])
 act=act.. "get " .. loctasks[i].. ";";
 if GetVariable("varTaskLastObjects")~="" then
  forj=0;j&lt;o.length;j++ then
  act=act.. "get " .. loctasks[i].. " from " .. o[j].. ";";
  end
 end
 act=act.. "pp0 " .. loctasks[i];
 DoAfterSpecial(i+1,act,10)
 end
-- act=act.. "tasklocatedone";
 DoAfterSpecial(loctasks.length+1,"tasklocatedone",10)
end
--SetVariable("varTaskLastLocation","")
SetVariable("varTaskLastObjects","")
ArrayClear("tasklocatedlist")
</send>
  </trigger>
  <trigger
   group="returntaskitem"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>EnableGroup("returntaskitem",0)
local i=1;
initActionQueue()
while (!varMyQueue5.isEmpty() then
local t=varMyQueue5.dequeue()
Execute("setupTaskReturn " .. t)
end
local a=GetVariable("varAfterAction")
pushSingleAction(a)
startAction(false)</send>
  </trigger>
  <trigger
   group="savetaskitem"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>EnableGroup("savetaskitem",0)
local i=1
while (!varMyQueue5.isEmpty() then
DoAfterSpecial(i*2-1,"cun " .. varMyQueue5.dequeue(),10)
++i
end
if i==1)
Execute("whisper")
else
DoAfterSpecial(i*2-1,"whisper",10)
</send>
  </trigger>
  <trigger
   enabled="y"
   match="你已经陷入半昏迷状态，神智全失，"
   regexp="y"
   sequence="50"
  >
  <send>use pill
burn</send>
  </trigger>
  <trigger
   group="heisong_up"
   match="什麽"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>DoAfterSpecial(3,"talk xiaojun",10)</send>
  </trigger>
  <trigger
   group="mission-action"
   match="烟雾中出现了牛头马面，二话不说，将枷锁镣铐往你头上一套．．．．"
   regexp="y"
   send_to="10"
   sequence="50"
  >
  <send>stopp
tt mission-abort</send>
  </trigger>
  <trigger
   group="taskreward"
   match="这里无法使用神通。"
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>Execute("noDir;west")
local t=GetVariable("varFlyTarget")
DoAfterSpecial(2,"goo2 " .. t,10)</send>
  </trigger>
  <trigger
   group="mission-wait-summon"
   match="组织任务被(.+)完成，你被奖励了："
   regexp="y"
   send_to="12"
   sequence="50"
  >
  <send>Note("---&gt; mission done during waiting summon")
EnableGroup("mission-wait-summon",0)
initActionQueue()
pushSingleAction("w;wd;savePots")
pushSingleAction("smk2")
pushSingleAction("waitPoke lshui")
Execute("waitSec 4")
--startAction()
</send>
  </trigger>
  <trigger
   group="savetaskitem"
   match="= (?P&lt;iname&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>local n="%&lt;iname&gt;";
local i=n.indexOf(",")
if i&gt;0)
n=n.substr(0,i)
if ArrayGet("listTaskItem",n)~=nil then
Note("---&gt; task item:" .. n)
varMyQueue5.enqueue(n)
end

</send>
  </trigger>
  <trigger
   group="qjl_in"
   match="打更的死了"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>EnableGroup("qjl_in",0)
Execute("pull ditan;down;whisper")</send>
  </trigger>
  <trigger
   group="mission-fly"
   match="看起来(.+)想杀死你！$"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>local t=GetVariable("varMissionTarget")
Execute("nian")
--Execute("kill " .. t.. ";nian;whistle;whistle")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>local i=GetVariable("varPillLianItem")
Execute("pillLianItem " .. i)</send>
  </trigger>
  <trigger
   match="你摇头晃脑、歪歪斜斜，濒于晕倒"
   regexp="y"
   sequence="60"
  >
  <send>use pill</send>
  </trigger>
  <trigger
   group="check-weapon"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>local f=GetVariable("varCheckWeaponLost")
EnableGroup("check-weapon",0)
if f==1 then
Execute("stopp")
 else 
Execute("whisper")
end</send>
  </trigger>
  <trigger
   group="check_item"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>local e=GetVariable("varItemPumpkin")
local c=GetVariable("varItemCash")
local w=GetVariable("varItemWineskin")
local jd=GetVariable("varItemJade")
local yg=GetVariable("varItemYeguo")
local sh=GetVariable("varItemShouhuan")
local wp=GetVariable("varItemWolfpen")
local bl=GetVariable("varItemBuli")

/*
local j=GetVariable("varItemJiduan")
local st=GetVariable("varItemSalt")
local d=GetVariable("varItemJiudai")
local l=GetVariable("varItemluwei")
local z=GetVariable("varItemZhanjia")
local g=GetVariable("varItemLighter")
local p=GetVariable("varItemPaper")
local c=GetVariable("varItemCash")
local b=GetVariable("varItemBook")
local h=GetVariable("varItemShouhuan")
local r=GetVariable("varItemRobe")
local x=GetVariable("varItemXigua")
local bg=GetVariable("varItemBag")
local sy=GetVariable("varItemShouyu")
*/

Execute("clearCheckItem")
if yg&lt;1 then
Execute("gg ye guo")
Doafterspecial(2,"id;ll0;ask",10)
--endelse if bl&lt;1 then
--Execute("gg 1000 tribuli")
--Doafterspecial(2,"id;ll0;ask",10)
--endelse if w&lt;1 then
--Execute("gg wineskin")
--Doafterspecial(2,"id;ll0;ask",10)
--endelse if wp&lt;1 then
--Execute("gg wolf pen")
--Doafterspecial(2,"id;ll0;ask",10)
endelse if c&lt;1 then
Execute("out;#5 south;east;wit 900000")
Doafterspecial(3,"west;#5 north;enter;id;ask",10)
 else 
EnableGroup("check_item",0)
Execute("whisper")
end

/*
Execute("gg0 1 cash")
if c&lt;1 then
Execute("south;south;south;south;south;east;wit 300000")
DoAfterSpecial(3,"west;north;north;north;north;north;checkItem",10)
endelse if j&lt;2 then
Execute("south;east;buy jiduan from waiter")
DoAfterSpecial(2,"west;north;checkItem",10)
endelse if h&lt;1 then
Execute("ask giftman about shouhuan;pp0 shouhuan;checkItem")
endelse if bg&lt;1 then
Execute("south;east;buy bag from waiter")
DoAfterSpecial(2,"west;north;checkItem",10)
endelse if x&lt;1 then
Execute("south;east;buy xigua from waiter")
DoAfterSpecial(2,"west;north;checkItem",10)
endelse if st&lt;1 then
Execute("ask giftman about salt;pp0 salt rock;checkItem")
endelse if r&lt;1 then
Execute("trans khl")
DoAfterSpecial(1.5,"north;north;k fang xinqi;ss3",10)
DoAfterSpecial(4.5,"gc robe;pp0 robe;trans gc",10)
DoAfterSpecial(6,"east;north;north;north;checkItem",10)
endelse if sy&lt;1 then
Execute("trans sl")
DoAfterSpecial(1.5,"ask master about 守经楼;answer 不怕;pp0 shouyu",10)
DoAfterSpecial(2.5,"trans gc",10)
DoAfterSpecial(4,"east;north;north;north;checkItem",10)
endelse if w&lt;1 then
Execute("trans gw")
DoAfterSpecial(1.5,"west;south;south;south;east;buy wineskin from waiter;pp0 wineskin",10)
DoAfterSpecial(2.5,"trans gc",10)
DoAfterSpecial(4,"east;north;north;north;checkItem",10)
endelse if wp&lt;1 then
Execute("trans ls")
DoAfterSpecial(1.5,"out;north;northeast;southeast;southeast;east;north;buy wolf pen from hao;pp0 wolf pen",10)
DoAfterSpecial(2.5,"trans gc",10)
DoAfterSpecial(4,"east;north;north;north;checkItem",10)
 else 
EnableGroup("check_item",0)
Execute("drop coin;pp0 cash;whisper")
end
*/</send>
  </trigger>
  <trigger
   group="check_hp"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>local j=GetVariable("statusJinRate")
local k=GetVariable("statusKeeRate")
local s=GetVariable("statusShenRate")
local f=GetVariable("statusFood")
local w=GetVariable("statusWater")
local sq=GetVariable("statusSha")
if tonumber(f)&lt;30 or tonumber(w)&lt;30 then
  Execute("fd;hp;ask")
elseif tonumber(sq)&gt;50 then
  Execute("out;east;east;east;east;south;salute;salute")
  DoAfterSpecial(1,"salute;hp;north;west;west;west;west;enter;ask",10)
elseif tonumber(k) &lt; 94 or tonumber(j) &lt; 94 or tonumber(s) &lt; 94 then
  Execute("out;south;exert herbheal;hp")
  DoAfterSpecial(2,"north;enter;ask",10)
else 
  EnableGroup("check_hp",0)
  Execute("whisper")
end

</send>
  </trigger>
  <trigger
   group="check_box"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>EnableGroup("check_box",0)
Doafterspecial(2,"whisper",10)</send>
  </trigger>
  <trigger
   group="tasknpc2"
   match="刷新了,该干嘛干嘛去！"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>SetVariable("countQuest",0)
SetVariable("envRefresh",1)
initActionQueue()
Execute("stopp")
DoAfterSpecial(2,"trans gc",10)
DoAfterSpecial(4,"east;north;north;north",10)
DoAfterSpecial(5,"startQuest",10)
</send>
  </trigger>
  <trigger
   group="qjl_in"
   match="这里没有这个人。"
   regexp="y"
   send_to="12"
   sequence="60"
  >
  <send>EnableGroup("qjl_in",0)
Execute("pull ditan;down;whisper")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="(?P&lt;cname&gt;\S+)(\s+)=(\s+)(?P&lt;ename&gt;.+),(.*)$"
   regexp="y"
   send_to="12"
   sequence="70"
  >
  <send>local c=GetVariable("varPillCname")
if c=="%&lt;cname&gt;" then
Note("---&gt; trigger %&lt;cname&gt; %&lt;ename&gt;")
local e= splitString("%&lt;ename&gt;",",")
SetVariable("varPillEname",tostring(e[1]))
Execute("look " .. e[1] ..";ask")
end</send>
  </trigger>
  <trigger
   group="mission-search2"
   match="【队伍】(.+)：mission-request"
   regexp="y"
   send_to="12"
   sequence="70"
  >
  <send>EnableGroup("mission-ask",1)</send>
  </trigger>
  <trigger
   group="loopmove"
   match="出口是 (?P&lt;e1&gt;.+)、(?P&lt;e2&gt;.+)、(?P&lt;e3&gt;.+) 和 (?P&lt;e4&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="70"
  >
  <send>Note ("---&gt;%&lt;e1&gt;,%&lt;e2&gt;,%&lt;e3&gt;,%&lt;e4&gt;")

if checkLoopPattern("%&lt;e1&gt;,%&lt;e2&gt;,%&lt;e3&gt;,%&lt;e4&gt;") then
  Execute(GetVariable("varLoopMove"))
elseif checkLoopEndPattern("%&lt;e1&gt;,%&lt;e2&gt;,%&lt;e3&gt;,%&lt;e4&gt;") then
  EnableGroup("loopmove",0)
  Execute(GetVariable("varLoopEndMove"))
else 
  Note("---&gt; no matching loop move")
end
</send>
  </trigger>
  <trigger
   group="hell-wait"
   match="地藏殿"
   regexp="y"
   send_to="12"
   sequence="70"
  >
  <send>EnableGroup("hell-wait",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="li_in"
   match="你要对谁做这个动作？"
   regexp="y"
   send_to="12"
   sequence="70"
  >
  <send>EnableGroup("li_in",0)
Execute("ef 100;open curtain;north;ef 0;whisper")</send>
  </trigger>
  <trigger
   group="ginseng-maze-look"
   match="你要看什麽？"
   regexp="y"
   send_to="12"
   sequence="70"
  >
  <send>SetVariable("varGinsengMazeMoveReach","yes")
Note("---&gt; maze end now!!!")
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="(?P&lt;cname&gt;\S+)(\s+)=(\s+)(?P&lt;ename&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>local c=GetVariable("varPillCname")
if c=="%&lt;cname&gt;" then
Note("---&gt; trigger %&lt;cname&gt; %&lt;ename&gt;")
SetVariable("varPillEname","%&lt;ename&gt;")
Execute("look %&lt;ename&gt;;ask")
end</send>
  </trigger>
  <trigger
   group="loopmove"
   match="出口是 (?P&lt;e1&gt;.+)、(?P&lt;e2&gt;.+) 和 (?P&lt;e3&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>Note ("---&gt; %&lt;e1&gt;,%&lt;e2&gt;,%&lt;e3&gt;")

if checkLoopPattern("%&lt;e1&gt;,%&lt;e2&gt;,%&lt;e3&gt;") then
  Execute(GetVariable("varLoopMove"))
elseif checkLoopEndPattern("%&lt;e1&gt;,%&lt;e2&gt;,%&lt;e3&gt;") then
  EnableGroup("loopmove",0)
  Execute(GetVariable("varLoopEndMove"))
else 
  Note("---&gt; no matching loop move")
end
</send>
  </trigger>
  <trigger
   group="move"
   match="此地不能使用时空转换"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>Execute("trans gc")
DoAfterSpecial(2,"umk",10)</send>
  </trigger>
  <trigger
   group="ginseng2"
   match="告诉你：ginseng-done"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>initActionQueue()
pushSingleAction("waitPoke code")
pushSingleAction("waitPoke lshui")
pushSingleAction("tell lshui ginseng-reconnect;reconnectGinseng")
startAction(true)</send>
  </trigger>
  <trigger
   group="move-dqe"
   match="灌木林"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>EnableGroup("move-east",0)
EnableGroup("move-dqe",0)
DoAfterSpecial(1,"west;whisper",10)</send>
  </trigger>
  <trigger
   group="quest-return"
   match="你被奖励了："
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>SetVariable("varQuestReturnReward",1)
Execute("qq")</send>
  </trigger>
  <trigger
   group="usemark"
   match="你的灵力不够"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>//Execute("de")
DoAfterSpecial(2,"ex1 500",10)
DoAfterSpecial(5,"res 200",10)
DoAfterSpecial(8,"usemark",10)
</send>
  </trigger>
  <trigger
   group="jiedu"
   match="你的真气不足。"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>Execute("ex 300")
DoAfterSpecial(3,"perform herb.jiedu",10)</send>
  </trigger>
  <trigger
   group="mission-action"
   match="你头重脚轻，正在勉力支撑著不倒下去"
   regexp="y"
   send_to="10"
   sequence="80"
  >
  <send>use pill</send>
  </trigger>
  <trigger
   group="mission-action"
   match="你摇头晃脑"
   regexp="y"
   send_to="10"
   sequence="80"
  >
  <send>burn
use pill
stopp
tt
tt mission-abort</send>
  </trigger>
  <trigger
   enabled="y"
   match="烟雾中出现了牛头马面，二话不说，将枷锁镣铐往你头上一套．．．．"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>Execute("stopp")
DoAfterSpecial(3,"east;east;whisper wydiab save "..GetInfo(3),10)
DoAfterSpecial(4,"east;east;whisper live save "..GetInfo(3),10)


</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="一声怪响，(?P&lt;item&gt;.+)从红木宝鼎中跃出，落入你掌心。"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>SetVariable("varPillCName","%&lt;item&gt;")
SetVariable("varPillType","")
Execute("id")</send>
  </trigger>
  <trigger
   group="teamfly-host2"
   match="在你的耳边悄声说道：teamfly-(?P&lt;target&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>Note("---&gt; going to team fly %&lt;target&gt;")
Execute("teamfly %&lt;target&gt;")
</send>
  </trigger>
  <trigger
   group="ghost-action"
   match="(.+)\((?P&lt;asker&gt;.+)\)告诉你：ghost-(?P&lt;npc&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>local r=GetVariable("varGhostReady")
if r=="yes" then
Execute("ghostStart")
SetVariable("varGhostAsker","%&lt;asker&gt;")
--SetVariable("varGhostTarget","%&lt;npc&gt;")
initActionQueue()
pushSingleAction("fd;smk2")
local path=mapGhostNpc["%&lt;npc&gt;"];
generateQuestActionMove(path)
pushSingleAction("ghostNpc %&lt;npc&gt;")
pushSingleAction("tell %&lt;asker&gt; ghost-complete;umk")
--pushSingleAction("umk")
pushSingleAction("w;checkStatus")
pushSingleAction("e;aa0;ghostAvailable;whisper")
startAction(true)
 else 
Execute("tell %&lt;asker&gt; ghost-NOT-ready")
end</send>
  </trigger>
  <trigger
   group="quest-list-item"
   match="(把|粒)(?P&lt;cname&gt;\S+)\((?P&lt;ename&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>local dup=1;
if "%&lt;cname&gt;".indexOf("箱子")&gt;0)
SetVariable("varRewardBox",1)

local ename="%&lt;ename&gt;".toLowerCase()
forlocal i=0;i&lt;varMyList1.length;i++ then
local names=varMyList1[i].split(",")
if names[1]==ename) dup=dup+1;
end
local itemstring="%&lt;cname&gt;," .. ename.. "," .. dup.. ",";
if dup==1)
itemstring=itemstring+ename;
else
itemstring=itemstring+ename.. " " .. dup;
varMyList1.push(itemstring)
Note("---&gt; item %&lt;cname&gt; " .. itemstring.split(",")[3])
</send>
  </trigger>
  <trigger
   group="quest-return"
   match="递给你一具(.+)尸体。"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>EnableGroup("quest-return-checkcorpse",1)
Execute("look corpse;gcg;ask")</send>
  </trigger>
  <trigger
   group="ccd-up"
   match="观月顶"
   regexp="y"
   send_to="10"
   sequence="90"
  >
  <send>endActionGroup ccd-up</send>
  </trigger>
  <trigger
   group="dqroad-east3"
   match="海边路"
   regexp="y"
   send_to="10"
   sequence="90"
  >
  <send>endActionGroup dqroad-east3</send>
  </trigger>
  <trigger
   group="autokill"
   match="你附近没有这样东西。|对你说：在这里不要乱摸乱动！"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>DeleteTemporaryTimers()
ResetTimers()
EnableGroup("autokill-busy",0)
EnableGroup("autokill-perform",0)
EnableGroup("autokill",0)

local abort=GetVariable("autokillAbort")
if abort~=nil and abort=="yes" then
 SetVariable("autokillAbort","no")
 Note("---&gt; waiting for burn complete")
 Doafterspecial(8,"gg0 seal;burn",10)
else
 local a=GetVariable("autokillDone")
 Execute(a)
end</send>
  </trigger>
  <trigger
   group="dqroad-east2"
   match="平原路"
   regexp="y"
   send_to="10"
   sequence="90"
  >
  <send>endActionGroup dqroad-east2</send>
  </trigger>
  <trigger
   group="quest-list"
   match="任务已经开始了(?P&lt;min&gt;.+)分((?P&lt;sec&gt;.+))秒。$"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>local m=chineseToNum("%&lt;min&gt;")
local s=chineseToNum("%&lt;sec&gt;")
local q=GetVariable("varQuestListCurrent")
s=m*60+s;
mapQuestQueue[q]=s;
Note("---&gt; quest " ..  q.. " time " .. s.. " seconds")</send>
  </trigger>
  <trigger
   group="quest-list"
   match="任务已经开始了(?P&lt;min&gt;.+)分。$"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>local m=chineseToNum("%&lt;min&gt;")
local q=GetVariable("varQuestListCurrent")
local s=m*60;
mapQuestQueue[q]=s;
Note("---&gt; quest " ..  q.. " time " .. s.. " seconds")</send>
  </trigger>
  <trigger
   group="dqroad-east1"
   match="山中小路"
   regexp="y"
   send_to="10"
   sequence="90"
  >
  <send>endActionGroup dqroad-east1</send>
  </trigger>
  <trigger
   group="loopmove"
   match="这里明显的出口是 (?P&lt;e1&gt;.+) 和 (?P&lt;e2&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="90"
  >
  <send>Note ("---&gt; %&lt;e1&gt;,%&lt;e2&gt;")

if checkLoopPattern("%&lt;e1&gt;,%&lt;e2&gt;") then
  Execute(GetVariable("varLoopMove"))
elseif checkLoopEndPattern("%&lt;e1&gt;,%&lt;e2&gt;") then
  EnableGroup("loopmove",0)
  Execute(GetVariable("varLoopEndMove"))
else 
  Note("---&gt; no matching loop move")
end</send>
  </trigger>
  <trigger
   group="checkbusy"
   match="你附近没有这样东西。|对你说：在这里不要乱摸乱动！"
   regexp="y"
   send_to="12"
   sequence="95"
  >
  <send>EnableGroup("checkbusy",0)
--Execute("whisper")
Note("---&gt; check busy done, run next action")
Execute("actionNextRun")
</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="( 你上一个动作还没有完成，不能施展神通。)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("flyTarget")
Note("---&gt; try fly " .. t.. " later")
DoAfterSpecial(5,"goo " .. t,10)
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="( 你上一个动作还没有完成，不能施展神通。)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(2,"pillLian",10)</send>
  </trigger>
  <trigger
   group="sleep_research"
   match="(.*)\((?P&lt;skname&gt;.+)\)(\s+)-(\s*)(\S+)(\s+)(?P&lt;level&gt;\d+)/(\s*)(?P&lt;pct&gt;\d+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local sk=GetVariable("varResearchSkill")
local lv=GetVariable("varResearchLevel")
local skname='%&lt;skname&gt;';
local now='%&lt;pct&gt;';
local lvl=%&lt;level&gt;;

Note("current level: %&lt;skname&gt; - %&lt;level&gt; -%&lt;pct&gt;, target level " .. lv)
if sk==skname then
if lvl&gt;=lv)
Execute("stopp")
end</send>
  </trigger>
  <trigger
   group="smart-research"
   match="(.*)\((?P&lt;skname&gt;.+)\)(\s+)-(\s*)(\S+)(\s+)(?P&lt;level&gt;\d+)/(\s*)(?P&lt;pct&gt;\d+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local sk=GetVariable("varResearchSkill")
if sk=="%&lt;skname&gt;" then
local lv=GetVariable("varResearchTargetLevel")
SetVariable("varResearchNowLevel","%&lt;level&gt;")
SetVariable("varResearchNowPoint","%&lt;pct&gt;")
Note("current level: %&lt;skname&gt; - %&lt;level&gt; -%&lt;pct&gt;, target level " .. lv)
end
</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="(.*)有一封密函，一定要在(.*)送交给(?P&lt;lettername&gt;.*)。我先送你去那里。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="%&lt;lettername&gt;";
if n=="南宫十一郎" then
Execute("goDaliLetterShiyi")
endelse if(n=="南宫十三郎" then
Execute("goDaliLetterNangong")
endelse if(n=="南宫十四郎" then
Execute("goDaliLetterShisi")
endelse if(n=="吴青" then
Execute("goDaliLetterWuqing")
endelse if(n=="蓝胡子" then
Execute("goDaliLetterLan")
endelse if(n=="大胡子" then
Execute("goDaliLetterHuzi")
endelse if(n=="忏悔徒" then
Execute("goDaliLetterChantu")
endelse if(n=="楚楚" then
Execute("goDaliLetterChuchu")
endelse if(n=="莫不屈" then
Execute("goDaliLetterBuqu")
endelse if(n=="中年书生" then
Execute("goDaliLetterShusheng")
endelse if(n=="渔夫" then
Execute("goDaliLetterFish")
endelse if(n=="文人墨客" then
Execute("goDaliLetterWenren")
endelse if(n=="马老四" then
Execute("goDaliLetterMax")
endelse if(n=="珠宝商" then
Execute("goDaliLetterJade")
endelse if(n=="冷红儿" then
Execute("goDaliLetterLeng")
endelse if(n=="中药店老板" then
Execute("goDaliLetterMed")
endelse if(n=="武林大豪杰" then
Execute("goDaliLetterToughman")
endelse if(n=="风四娘" then
Execute("goDaliLetterFeng")
endelse if(n=="王若钢" then
Execute("goDaliLetterWang")
endelse if(n=="人和老人" then
Execute("goDaliLetterRen")
endelse if(n=="茅大先生" then
Execute("goDaliLetterDa")
endelse if(n=="城卫" then
Execute("goDaliLetterCity")
endelse if(n=="胭松" then
Execute("goDaliLetterYan")
endelse if(n=="班察那" then
Execute("goDaliLetterWaiter")
endelse if(n=="心湖" then
Execute("goDaliLetterHu")
endelse if(n=="地匹" then
Execute("goDaliLetterDi")
 else 
Execute("cancelDaliLetter")
end</send>
  </trigger>
  <trigger
   match="(.+)(\s)(?P&lt;test1&gt;.+)\(Afa\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--Note("%&lt;test1&gt;")
DatabaseOpen("fydb","z:/fyvi.db",2)
--local sql="select id from npcs where cname='%&lt;test1&gt;'"
--Note(sql)
local ec64=utils.base64encode("%&lt;test1&gt;")
local sql="select id from npcs where cname='" .. ec64 .. "'"
Note(ec64)
local t=DatabaseGetField("fydb",sql)
Note(t)
sql="select cname from npcs where id='fy/npc/huangyi'"
t=DatabaseGetField("fydb",sql)
Note(t)

--local r=DatabaseExec("fydb","insert into npcs (cname) values('%&lt;test1&gt;')")
--Note(r)
DatabaseClose("fydb")</send>
  </trigger>
  <trigger
   group="mission-fly"
   match="(.+)\((?P&lt;asker&gt;.+)\)告诉你：mission-target-(?P&lt;target&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varMissionAsker","%&lt;asker&gt;")
SetVariable("varMissionTarget","%&lt;target&gt;")
SetVariable("commandBreak","breakMissionFly")
initActionQueue()
pushSingleAction("fd;goo %&lt;target&gt;")
pushSingleAction("checkBusy")
pushSingleAction("smk")
pushSingleAction("goo illusionist dong")
pushSingleAction("checkBusy")
pushSingleAction("down;south;east;tell %&lt;asker&gt; mission-fly-ready;whisper")
startAction(true)
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="(.+)\((?P&lt;asker&gt;.+)\)告诉你：pill-(?P&lt;ptype&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillAsker","%&lt;asker&gt;")
SetVariable("varPillAskType","%&lt;ptype&gt;")
SetVariable("varPillAskAmount","1")
Note("---&gt; pill asker %&lt;asker&gt;")
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="(.+)\((?P&lt;asker&gt;.+)\)告诉你：pillall-(?P&lt;amount&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillAsker","%&lt;asker&gt;")
SetVariable("varPillAskType","all")
SetVariable("varPillAskAmount","%&lt;amount&gt;")
Note("---&gt; pill asker %&lt;asker&gt;")

</send>
  </trigger>
  <trigger
   group="quest-ghost"
   match="(.+)\((?P&lt;asker&gt;.+)\)告诉你：quest-ghost-(?P&lt;npc&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local r=GetVariable("varGhostReady")
if r=="yes" then
EnableGroup("quest-ask",0)
SetVariable("varGhostReady","no")
SetVariable("varGhostAsker","%&lt;asker&gt;")
--SetVariable("varGhostTarget","%&lt;npc&gt;")
initActionQueue()
pushSingleAction("smk2")
pushSingleAction("fd;out;south;whisper")
local path=mapQuestNpcGhost["%&lt;npc&gt;"];
generateQuestActionMove(path)
pushSingleAction("ghostNpc %&lt;npc&gt;")
pushSingleAction("tell %&lt;asker&gt; ghost-complete;umk")
--pushSingleAction("umk")
pushSingleAction("checkStatus")
pushSingleAction("whisper;readyQuestGhost")
startAction(true)
 else 
Execute("tell %&lt;asker&gt; ghost-NOT-ready")
end</send>
  </trigger>
  <trigger
   enabled="y"
   match="(.+)\((?P&lt;asker&gt;\D+)\)告诉你：GG(?P&lt;itemn&gt;\D+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local o='%&lt;asker&gt;';
local i='%&lt;itemn&gt;';
Execute("gg0 " .. i.. ";give " .. i.. " to " .. o)</send>
  </trigger>
  <trigger
   match="(.+)\((?P&lt;asker&gt;\D+)\)告诉你：\((?P&lt;itemn&gt;\D+)\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local o='%&lt;asker&gt;';
local i='%&lt;itemn&gt;';
Send("give " .. o.. " " .. i)</send>
  </trigger>
  <trigger
   group="ginseng-maze-look"
   match="(?P&lt;am&gt;\D+)文钱\(Coin\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local a=chineseToNum("%&lt;am&gt;")
--Note("---&gt; coin amount " .. a)
SetVariable("varGinsengMazeLookCoin",a)

</send>
  </trigger>
  <trigger
   group="checkgold"
   match="(?P&lt;amount&gt;\S+)两黄金"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local a="%&lt;amount&gt;";
local b=chineseToNum(a)
SetVariable("myGoldAmount",b)
--Note("---&gt;" .. b.. " gold")
</send>
  </trigger>
  <trigger
   group="ginseng-deposit"
   match="(?P&lt;ca&gt;\D+)张一千两银票\(Thousand-cash\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local a=chineseToNum("%&lt;ca&gt;")
SetVariable("varGinsengDepositAmount",a)
</send>
  </trigger>
  <trigger
   group="questitem"
   match="(?P&lt;cname&gt;\S+)(\s*)：(\s*)(?P&lt;itemid&gt;\d+) "
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n=GetVariable("varQuestItem")
local m="%&lt;cname&gt;";
--Note("---&gt;matching :" .. m.. ":%&lt;itemid&gt;: for :" .. n.. ":")
if n==m then
--found quest item
Note("found item " .. n)
local o=GetVariable("varQuestItemId")
if o==0) SetVariable("varQuestItemId","%&lt;itemid&gt;")
end
</send>
  </trigger>
  <trigger
   group="quest-list-item"
   match="(?P&lt;cname&gt;\S+)\((?P&lt;ename&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local dup=1;
if "%&lt;cname&gt;".indexOf("箱子")&gt;0)
SetVariable("varRewardBox",1)

local ename="%&lt;ename&gt;".toLowerCase()
forlocal i=0;i&lt;varMyList1.length;i++ then
local names=varMyList1[i].split(",")
if names[1]==ename) dup=dup+1;
end
local itemstring="%&lt;cname&gt;," .. ename.. "," .. dup.. ",";
if dup==1)
itemstring=itemstring+ename;
else
itemstring=itemstring+ename.. " " .. dup;
varMyList1.push(itemstring)
Note("---&gt; item %&lt;cname&gt; " .. itemstring.split(",")[3])
</send>
  </trigger>
  <trigger
   group="quest-return-checkcorpse"
   match="(?P&lt;cname&gt;\S+)\((?P&lt;ename&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local ename="%&lt;ename&gt;".toLowerCase()
local e=mapItemName["%&lt;cname&gt;"];
if e~=nil and e~="" and e==ename then
Execute("get " .. e.. " from corpse;pp0 " .. e)
end
</send>
  </trigger>
  <trigger
   group="check-corpse-gold-item"
   match="(?P&lt;cname&gt;\S+)\((?P&lt;ename&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; cname %&lt;cname&gt; ename %&lt;ename&gt;")
local ename="%&lt;ename&gt;".toLowerCase()
local cname="%&lt;cname&gt;";
if cname=="奉天龙纹系" or cname=="惊云步靴" or cname=="乘风慧剑" or cname=="奉天印戒" or cname=="情思古盾" or cname=="紫金软猬甲" or cname=="紫金文士冠" or cname=="紫金文士袍" or cname=="锦花文绣披风" then
Execute("get corpse;gc " .. ename)
end
if cname=="天蚕金丝袍" or ename=="sky clothes" then
Execute("get corpse")
end</send>
  </trigger>
  <trigger
   group="khl-wade"
   match="(?P&lt;dir&gt;.+)佛塔"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("khl-wade",0)
if "%&lt;dir&gt;"=="东" then
SetVariable("varKhlDir","east")
end
if "%&lt;dir&gt;"=="南" then
SetVariable("varKhlDir","south")
end
if "%&lt;dir&gt;"=="西" then
SetVariable("varKhlDir","west")
end
if "%&lt;dir&gt;"=="北" then
SetVariable("varKhlDir","north")
end
Note("--&gt; khl dir:%&lt;dir&gt;")
Execute("whisper")</send>
  </trigger>
  <trigger
   group="mz_job"
   match="(?P&lt;header&gt;.*)武林盟主正在招集"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>if "%&lt;header&gt;"==nil or "%&lt;header&gt;"=="" or "%&lt;header&gt;".indexOf("说道")==-1 then
 varMyQueue.enqueue("done")
end
</send>
  </trigger>
  <trigger
   group="ginseng-redeem"
   match="(?P&lt;id&gt;\d+)： 长剑"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsendRedeemSwordId","%&lt;id&gt;")</send>
  </trigger>
  <trigger
   group="ginseng-redeem"
   match="(?P&lt;id&gt;\d+)： 野果"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsendRedeemYeguoId","%&lt;id&gt;")</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="(?P&lt;level&gt;\S*)级 人造人 (.*)\(Rzr(.*)\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local cl="%&lt;level&gt;";
local l=getNumberByChinese(cl)
local k=GetVariable("varRzrKillLevel")
local h=new Date(GetInfo(304)).getHours()
if (h&gt;=19 and h&lt;21) or (h&gt;=23 or h&lt;2 ) or (h&gt;=8 and h&lt;11) then
--++k;
end

if l&gt;=k then
 Note("---&gt;Found Rzr: level " .. l)
 SetVariable("commandMove","onRzrOrTaskFound")
 local t=GetVariable("varRzrOrTaskFound")
 if t~=nil and t~="" then
 if t.indexOf("rzr")==-1) t=t.. ",rzr";
 else 
 t="rzr";
 end
 SetVariable("varRzrOrTaskFound",t)
end</send>
  </trigger>
  <trigger
   group="checkrzr"
   match="(?P&lt;level&gt;\S+)级 人造人(.*)\(rzr(?P&lt;rname&gt;.+)\) (.+)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local l="%&lt;level&gt;";
local n=getNumberByChinese(l)
local i="rzr%&lt;rname&gt;";
--Note(n.. ":" .. i)
local on=GetVariable("varRzrMaxLevel")
if n&gt;on then
SetVariable("varRzrMaxLevel",n)
SetVariable("varRzrMaxName",i)
end
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)back seal"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemSeal","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)back seal"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemSeal","yes")
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)back seal"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemSeal","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)blade"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("---&gt;trigger blade")
SetVariable("varCheckItemBlade","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)pill"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
local p=GetVariable("varCheckItemPill")
p=p+1;
SetVariable("varCheckItemPill",p)
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)pill"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemPill","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)pill"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemPill","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)pxshan"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemPxshan","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)sword"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("---&gt;trigger sword")
SetVariable("varCheckItemSword","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)sword"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemSword","yes")
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)sword"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemSword","yes")
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)tenthousand-cash"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemCash","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)tenthousand-cash"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemCash","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)tenthousand-cash"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemTTCash","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)thousand-cash"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemCash","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)tieguai-fork"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemFork","yes")
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)whip"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemWhip","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)whip"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemWhip","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)whip"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemWhip","yes")
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)ye guo"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemYeguo","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)ye guo"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemYeguo","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)ye guo"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemYeguo","yes")
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="(\s)zhanjia$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemZhanjia","yes")
</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="(\s)zhanjia$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemZhanjia","yes")
</send>
  </trigger>
  <trigger
   group="mission-item"
   match="(\s)zhanjia$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("trigger sword")
SetVariable("varCheckItemZhanjia","yes")
</send>
  </trigger>
  <trigger
   group="clearbag"
   match="(\s+)(?P&lt;id&gt;\d+)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varMyQueue1.enqueue("%&lt;id&gt;")</send>
  </trigger>
  <trigger
   group="check_item"
   match="(g|G)old robe"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemRobe")
j++;
SetVariable("varItemRobe",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(j|J)ade"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local jade=GetVariable("varItemJade")
jade++;
SetVariable("varItemJade",jade)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(j|J)iudai"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemJiudai")
j++;
SetVariable("varItemJiudai",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(p|P)aper seal"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemPaper")
j++;
SetVariable("varItemPaper",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(q|Q)ing feng book"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemBook")
j++;
SetVariable("varItemBook",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(s|S)alt rock"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemSalt")
j++;
SetVariable("varItemSalt",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(s|S)houhuan"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemShouhuan")
j++;
SetVariable("varItemShouhuan",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(s|S)houyu"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemShouyu")
j++;
SetVariable("varItemShouyu",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(t|T)housand-cash"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemCash")
j++;
SetVariable("varItemCash",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(w|W)ineskin"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemWineskin")
j++;
SetVariable("varItemWineskin",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="(w|W)olf pen"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemWolfpen")
j++;
SetVariable("varItemWolfpen",j)</send>
  </trigger>
  <trigger
   group="quest-return-checkcorpse"
   match="(把|粒)(?P&lt;cname&gt;\S+)\((?P&lt;ename&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local ename="%&lt;ename&gt;".toLowerCase()
local e=mapItemName["%&lt;cname&gt;"];
if e~=nil and e~="" and e==ename then
Execute("get " .. e.. " from corpse;pp0 " .. e)
end
</send>
  </trigger>
  <trigger
   group="gaa"
   match="= (?P&lt;dname&gt;\D+)(?P&lt;dnum&gt;\d+)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("pp0 %&lt;dname&gt;%&lt;dnum&gt;")</send>
  </trigger>
  <trigger
   group="taskreward"
   match="&gt; &gt;"
   regexp="y"
   sequence="100"
  >
  <send>whisper</send>
  </trigger>
  <trigger
   group="autokill"
   match="&gt; &gt; &gt; "
   regexp="y"
   sequence="100"
  >
  <send>get nothing123</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="Master hu\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask master about 守经楼;answer 不怕")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="Master yuan\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask master about 见方丈;answer 重要事")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="Wei xing long\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask wei xing long about book;f wei xing long")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="Yahuan\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","buy white towel from yahuan;drop coin")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="Yun liu\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask yunliu about tanqin;play qin")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="Zhu zao\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask zhu zao about 过阵;rea")</send>
  </trigger>
  <trigger
   enabled="y"
   match="\((?P&lt;asker&gt;.*)\)告诉你：GG(?P&lt;item&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local bag=GetVariable("myBag")
Execute("get %&lt;item&gt; from " .. bag)
Execute("give %&lt;item&gt; to %&lt;asker&gt;")
</send>
  </trigger>
  <trigger
   enabled="y"
   match="\((?P&lt;asker&gt;.+)\)告诉你：teamflygo"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTeamFlyAsker","%&lt;asker&gt;")
local r=GetVariable("varTeamFlyReady")
if r==nil or r=="" or r==0 then
Send("tell %&lt;asker&gt; teamflyNOTready")
 else 
initActionQueue()
pushSingleAction("smk2")
pushSingleAction("out;fy-chantu")
--pushSingleAction("out;fy-postman")
pushSingleAction("teamflyStart;tell %&lt;asker&gt; teamflyready;whisper")
startAction(true)
end</send>
  </trigger>
  <trigger
   enabled="y"
   match="\((?P&lt;asker&gt;.+)\)告诉你：teamflymarkgo"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTeamFlyAsker","%&lt;asker&gt;")
local r=GetVariable("varTeamFlyReady")
if r==nil or r=="" or r==0 then
Send("tell %&lt;asker&gt; teamflyNOTready")
 else 
EnableGroup("teamflymark-host",1)
initActionQueue()
pushSingleAction("teamflymarkStart;out;fy-chantu")
pushSingleAction("aasee;tell %&lt;asker&gt; teamflyready;whisper")
startAction(true)
end</send>
  </trigger>
  <trigger
   group="loopjob"
   match="\((?P&lt;ename&gt;\D+)\)(\s+)-(\s+)(\S+)(\s+)(?P&lt;level&gt;\d*)/(\s*)(?P&lt;amount&gt;\d*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note('%&lt;ename&gt; %&lt;level&gt; %&lt;amount&gt;')
local sk=GetVariable("varPracticeEnableSkill")
local skname='%&lt;ename&gt;';
if sk==skname then
local now='%&lt;amount&gt;';
local lvl='%&lt;level&gt;';
--local last=GetVariable("varPracNowAmount")
SetVariable("varPracLevel",lvl)
SetVariable("varPracPoint",now)
end</send>
  </trigger>
  <trigger
   group="jump_research"
   match="\((?P&lt;skname&gt;.*)\)(\s+)-(\s*)(\S+)(\s+)(?P&lt;level&gt;\d+)/(\s*)(?P&lt;pct&gt;\d+)%$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("%&lt;skname&gt; ; %&lt;level&gt;; %&lt;pct&gt;")
local sk=GetVariable("varResearchSkill")
local lv=GetVariable("varResearchLevel")
local skname='%&lt;skname&gt;';
if sk==skname then
local now='%&lt;pct&gt;';
local lvl='%&lt;level&gt;';
if lvl&gt;=lv)
Execute("stopp")
end</send>
  </trigger>
  <trigger
   group="jump_practice_research"
   match="\((?P&lt;skname&gt;.*)\)(\s+)-(\s*)(\S+)(\s+)(?P&lt;level&gt;\d+)/(\s*)(?P&lt;pct&gt;\d+)%$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("%&lt;skname&gt; ; %&lt;level&gt;; %&lt;pct&gt;")
local sk=GetVariable("varPracticeEnableSkill")
local skname='%&lt;skname&gt;';
if sk==skname then
local now='%&lt;pct&gt;';
local lvl='%&lt;level&gt;';
SetVariable("varPracLevel",lvl)
SetVariable("varPracPoint",now)
end</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Du tongxuan\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="du tongxuan";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Gong jiu\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="gong jiu";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Hua manlou\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="hua manlou";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Lei\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="lei";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Li huai\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="li huai";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Li yanbei\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="li yanbei";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Lu xiaojia\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="lu xiaojia";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="maze"
   match="\(Maze monster\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n=GetVariable("varMazeMonster")
n=++n;
if n==1 then
Execute("kill maze monster")
 else 
Execute("kill maze monster " .. n)
end
SetVariable("varMazeMonster",n)
EnableGroup("maze_kill",1)</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Shuai yifan\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="shuai yifan";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Xue xiaoren\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="xue xiaoren";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Xue yiren\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="xue yiren";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="\(Yan nantian\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n="yan nantian";
Note("---&gt;Found Task: " .. n)
SetVariable("commandMove","onRzrOrTaskFound")
local t=GetVariable("varRzrOrTaskFound")
if t~=nil and t~="" then
if t.indexOf(n)&lt;0) t=t.. "," .. n;
 else 
t=n;
end
SetVariable("varRzrOrTaskFound",t)
</send>
  </trigger>
  <trigger
   enabled="y"
   match="^\( 你头重脚轻，正在勉力支撑著不倒下去"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>use pill
burn</send>
  </trigger>
  <trigger
   group="quest-action"
   match="^\( 你摇头晃脑"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>burn
stopp</send>
  </trigger>
  <trigger
   group="tufei-1"
   match="^【闲聊】关外马贼"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTufeiGW","yes")
EnableGroup("tufei-1",0)
Execute("robotTufei")
</send>
  </trigger>
  <trigger
   group="tufei-2"
   match="^【闲聊】海盗倭寇"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTufeiNH","yes")

EnableGroup("tufei-2",0)
Execute("robotTufei")
</send>
  </trigger>
  <trigger
   group="tufei-3"
   match="^【闲聊】蒙面土匪"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTufeiCX","yes")

EnableGroup("tufei-3",0)
Execute("robotTufei")
</send>
  </trigger>
  <trigger
   group="tufei-4"
   match="^【闲聊】山西土匪|^【闲聊】突厥狼盗|^【闲聊】黑帮喽|^【闲聊】土豪恶霸"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTufeiFY","yes")

EnableGroup("tufei-4",0)
Execute("robotTufei")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^北城厢"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask wang about kangqi;give round jade to wang;give round jade 2 to wang;give round jade 3 to wang;combine")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^表哥对你喝道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask biao ge about 事;accept yes")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^城北小路"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","look grass;stamp grass")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^大堂"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask yin bin about man")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^东偏厅"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pull ditan;down")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^洞底"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","open rightdoor")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^洞口"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","dash huache")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^断塔下"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","look tower;push door;listen;enter;enter")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^风云堂"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pull 书画;east")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^勾魂使者喝道：没有合约"
   regexp="y"
   sequence="100"
  >
  <send>accept test
tell ghost 没有面目</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^灌木林"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","dash bush")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^海边"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","gg0 qing feng book;give qing feng book to ding feng")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^河滩"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","wade river")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^黑松阁正厅"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pull rope")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^花寡妇倒在床上，"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","sleep hua gua fu")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^花海"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask wurong about 石观音")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^黄土甬道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pull ring")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^将军放下木勺对你喝道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","get meat;eat meat;drop meat")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^净水阁"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("match")
SetVariable("varEnvAction","buy round jade from zhengjia")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^靠在海边的船"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask master chu about 蝙蝠岛")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^客栈后院"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","swim")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^孔雀河"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","wade 沙流")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^狼窝"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","crawl down")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^乱葬冈"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pushaside grass;west;southwest;northwest;tear paper")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^茅屋内"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask monk about meat;open door;south")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^密林"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","open 珠帘;south")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^密林"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","listen;look south;south")
</send>
  </trigger>
  <trigger
   enabled="y"
   match="^你从(.*)身上搜出一件布衣。"
   regexp="y"
   sequence="100"
  >
  <send>drop cloth</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="^青石小街"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvBuyer", "ji")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^青室"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","open 山水画;south")</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="^倾城胭脂店"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvBuyer", "fang")
</send>
  </trigger>
  <trigger
   enabled="y"
   match="^如果你愿意加入，请用 team with (?P&lt;asker&gt;.+)。$"
   regexp="y"
   sequence="100"
  >
  <send>team with %&lt;asker&gt;</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^山脚乡田"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","talk xiao juan")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^天梯尽头"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","say 我来过，活过，爱过！")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^万梅瀑布"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","charge")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^西南角"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","ask xiao wu about gao li")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^香积厨"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","push 万紧那罗王;north")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^小仓房"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","climb bag")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^小石桥"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","hold vine")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^小屋"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pull floor;down")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^星星小楼"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","climb window")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^羊肠小道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","pushaside grass")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^野狼坡"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","crawl up")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^银钩赌坊偏厅"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","open 字画;west")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^有凤来仪"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","open 屏风;south")</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="^楠木树上"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","jumpto yard")</send>
  </trigger>
  <trigger
   group="check_item"
   match="bag"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemBag")
j++;
SetVariable("varItemBag",j)</send>
  </trigger>
  <trigger
   group="mission-item"
   match="box"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("---&gt;trigger blade")
SetVariable("varCheckItemBox","yes")
</send>
  </trigger>
  <trigger
   group="check_item"
   match="cash"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemCash")
j++;
SetVariable("varItemCash",j)</send>
  </trigger>
  <trigger
   group="openbox"
   match="copper box"
   regexp="y"
   sequence="100"
  >
  <send>buy copper key from seller
open copper box</send>
  </trigger>
  <trigger
   group="check-rewardbox"
   match="copper box"
   regexp="y"
   sequence="100"
  >
  <send>buy copper key from seller
open copper box</send>
  </trigger>
  <trigger
   group="check_box"
   match="copper box"
   regexp="y"
   sequence="100"
  >
  <send>buy copper key from seller
open copper box</send>
  </trigger>
  <trigger
   group="check-rewardbox"
   match="gold box"
   regexp="y"
   sequence="100"
  >
  <send>buy gold key from seller
open gold box</send>
  </trigger>
  <trigger
   group="check_box"
   match="gold box"
   regexp="y"
   sequence="100"
  >
  <send>buy gold key from seller
open gold box</send>
  </trigger>
  <trigger
   group="openbox"
   match="gold box"
   regexp="y"
   sequence="100"
  >
  <send>buy gold key from seller
open gold box</send>
  </trigger>
  <trigger
   group="openbox"
   match="iron box"
   regexp="y"
   sequence="100"
  >
  <send>buy iron key from seller
open iron box</send>
  </trigger>
  <trigger
   group="check-rewardbox"
   match="iron box"
   regexp="y"
   sequence="100"
  >
  <send>buy iron key from seller
open iron box</send>
  </trigger>
  <trigger
   group="check_box"
   match="iron box"
   regexp="y"
   sequence="100"
  >
  <send>buy iron key from seller
open iron box</send>
  </trigger>
  <trigger
   group="check_item"
   match="jiduan"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemJiduan")
j++;
SetVariable("varItemJiduan",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="lighter"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemLighter")
j++;
SetVariable("varItemLighter",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="luwei"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemLuwei")
j++;
SetVariable("varItemLuwei",j)</send>
  </trigger>
  <trigger
   group="check_item"
   match="pumpkin"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemPumpkin")
j++;
SetVariable("varItemPumpkin",j)</send>
  </trigger>
  <trigger
   group="check-rewardbox"
   match="silver box"
   regexp="y"
   sequence="100"
  >
  <send>buy silver key from seller
open silver box</send>
  </trigger>
  <trigger
   group="openbox"
   match="silver box"
   regexp="y"
   sequence="100"
  >
  <send>buy silver key from seller
open silver box</send>
  </trigger>
  <trigger
   group="check_box"
   match="silver box"
   regexp="y"
   sequence="100"
  >
  <send>buy silver key from seller
open silver box</send>
  </trigger>
  <trigger
   group="check_item"
   match="tribuli"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//local jade=GetVariable("varItemBuli")
--jade++;
SetVariable("varItemBuli",1)</send>
  </trigger>
  <trigger
   group="check_item"
   match="ye guo"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varItemYeguo",1)</send>
  </trigger>
  <trigger
   group="check_item"
   match="zhanjia"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local j=GetVariable("varItemZhanjia")
j++;
SetVariable("varItemZhanjia",j)</send>
  </trigger>
  <trigger
   group="task"
   match="。。。所有使命分布完毕"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("restartTask")
--DoAfterSpecial(2,"tasklist",10)
--DoAfterSpecial(5,"startTask",10)</send>
  </trigger>
  <trigger
   group="msgask-fly"
   match="“这是(.+)写给(?P&lt;target&gt;.+)的信。一路保重。”"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask-fly",0)
local t="%&lt;target&gt;";
Note("---&gt; target:" .. t)
SetVariable("varMsgTarget",t)
if t=="风四娘" then
Execute("msgFeng")
endelse if t=="言青衣" then
Execute("msgYan")
endelse if t=="李红袍" then
Execute("msgHongbao")
--endelse if t=="原随云" then
--Execute("msgYuan")
endelse if t=="天孙" then
Execute("msgTiansun")
endelse if t=="羽天白" then
Execute("msgYu")
endelse if t=="箫王孙" then
Execute("msgXiao")
endelse if t=="了因师太" then
Execute("msgLiaoyin")
endelse if t=="楚留香" then
Execute("msgChu")
endelse if t=="胡金袖" then
Execute("msgHu")
endelse if t=="关玉门" then
Execute("msgYumen")
endelse if t=="万春流" then
Execute("msgWan")
endelse if t=="石观音" then
Execute("msgShi")
endelse if t=="张恩" then
Execute("msgZhang")
endelse if t=="苏少英" then
Execute("msgSu")
endelse if t=="葛伦" then
Execute("msgGelun")
endelse if t=="铁少" then
Execute("msgTie")
endelse if t=="兴国大师" then
Execute("msgXing")
endelse if t=="唐一方" then
Execute("msgTang")
endelse if t=="叶孤城" then
Execute("msgYe")
endelse if t=="铁战" then
Execute("msgTiezhan")
endelse if t=="白衣人" then
Execute("msgWhite")
endelse if t=="老刀把子" then
Execute("msgLaodao")
endelse if t=="白水娘娘" then
Execute("msgShenshui")
endelse if t=="心湖" then
Execute("msgShaolin")
endelse if t=="夜帝" then
Execute("msgYedi")

 else 
Execute("msgCancel")
end
</send>
  </trigger>
  <trigger
   group="msgask-team"
   match="“这是(.+)写给(?P&lt;target&gt;.+)的信。一路保重。”"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask-team",0)
local t="%&lt;target&gt;";
Note("---&gt; target:" .. t)
SetVariable("varMsgTarget",t)
if t=="风四娘" then
Execute("msgFeng")
endelse if t=="言青衣" then
Execute("msgYan")
endelse if t=="李红袍" then
Execute("msgHongbao")
--endelse if t=="原随云" then
--Execute("msgYuan")
endelse if t=="天孙" then
Execute("msgTiansun")
endelse if t=="羽天白" then
Execute("msgYu")
endelse if t=="箫王孙" then
Execute("msgXiao")
endelse if t=="了因师太" then
Execute("msgLiaoyin")
endelse if t=="楚留香" then
Execute("msgChu")
endelse if t=="胡金袖" then
Execute("msgHu")
endelse if t=="关玉门" then
Execute("msgYumen")
endelse if t=="万春流" then
Execute("msgWan")
endelse if t=="石观音" then
Execute("msgShi")
endelse if t=="张恩" then
Execute("msgZhang")
endelse if t=="苏少英" then
Execute("msgSu")
endelse if t=="葛伦" then
Execute("msgGelun")
endelse if t=="铁少" then
Execute("msgTie")
endelse if t=="兴国大师" then
Execute("msgXing")
endelse if t=="唐一方" then
Execute("msgTang")
endelse if t=="叶孤城" then
Execute("msgYe")
endelse if t=="铁战" then
Execute("msgTiezhan")
endelse if t=="白衣人" then
Execute("msgWhite")
endelse if t=="老刀把子" then
Execute("msgLaodao")
endelse if t=="白水娘娘" then
Execute("msgShenshui")
endelse if t=="心湖" then
Execute("msgShaolin")

 else 
Execute("msgCancel")
end
</send>
  </trigger>
  <trigger
   group="msgask"
   match="“这是(.+)写给(?P&lt;target&gt;.+)的信。一路保重。”"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask",0)
local t="%&lt;target&gt;"
Note("---&gt; target:" .. t)
SetVariable("msgTarget",t)
if t=="风四娘" then
 Execute("msgFeng")
elseif t=="言青衣" then
Execute("msgYan")
elseif t=="李红袍" then
Execute("msgHongbao")
--elseif t=="原随云" then
--Execute("msgYuan")
elseif t=="天孙" then
Execute("msgTiansun")
elseif t=="羽天白" then
Execute("msgYu")
elseif t=="箫王孙" then
Execute("msgXiao")
elseif t=="了因师太" then
Execute("msgLiaoyin")
elseif t=="楚留香" then
Execute("msgChu")
elseif t=="胡金袖" then
Execute("msgHu")
elseif t=="关玉门" then
Execute("msgYumen")
elseif t=="万春流" then
Execute("msgWan")
elseif t=="石观音" then
Execute("msgShi")
elseif t=="张恩" then
Execute("msgZhang")
elseif t=="苏少英" then
Execute("msgSu")
elseif t=="葛伦" then
Execute("msgGelun")
elseif t=="铁少" then
Execute("msgTie")
elseif t=="兴国大师" then
Execute("msgXing")
elseif t=="唐一方" then
Execute("msgTang")
elseif t=="叶孤城" then
Execute("msgYe")
elseif t=="铁战" then
Execute("msgTiezhan")
elseif t=="白衣人" then
Execute("msgWhite")
elseif t=="心湖" then
Execute("msgXinhu")
else 
Execute("msgCancel")
end

</send>
  </trigger>
  <trigger
   group="tasklocateall"
   match="『(?P&lt;cname&gt;.*)』似乎在(?P&lt;dis&gt;.*)。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local d="%&lt;dis&gt;";
if d.indexOf("周围极近的地方")&gt;=0 then
varMyQueue2.enqueue("here")
endelse if d.indexOf("极近")&gt;=0 or d.indexOf("很近")&gt;=0 or d.indexOf("比较近")&gt;=0 or d.indexOf("不远")&gt;=0 or d.indexOf("周围")&gt;=0 then
varMyQueue2.enqueue("near")
 else 
varMyQueue2.enqueue("far")
end</send>
  </trigger>
  <trigger
   group="tasklocatenear"
   match="『(?P&lt;cname&gt;.*)』似乎在(?P&lt;dis&gt;.*)。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local d="%&lt;dis&gt;";
if d.indexOf("周围极近的地方")&gt;=0 then
varMyQueue2.enqueue("here")
endelse if d.indexOf("极近")&gt;=0 or d.indexOf("很近")&gt;=0 or d.indexOf("比较近")&gt;=0 or d.indexOf("不远")&gt;=0 or d.indexOf("周围")&gt;=0 then
varMyQueue2.enqueue("near")
endelse if d.indexOf("很远")&gt;=0 or d.indexOf("极远")&gt;=0 then
varMyQueue2.enqueue("toofar")
 else 
varMyQueue2.enqueue("far")
end</send>
  </trigger>
  <trigger
   group="mission-help-fly"
   match="【队伍】(.+)：mission-fly-(?P&lt;target&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("commandBreak","missionTeamFlyBroken")
initActionQueue()
pushSingleAction("fd;eu;teamfly %&lt;target&gt;")
pushSingleAction("goo illusionist xi")
pushSingleAction(checkBusy")
pushSingleAction("down;south;checkStatus")
pushSingleAction("wd;savePots")
startAction()</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="【队伍】(.+)：mission-item-zhanjia$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varMissionItemWearZhanjia","yes")
</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="【队伍】(.+)：mission-kill-(?P&lt;target&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-kill",0)
EnableGroup("mission-wait-summon",1)
SetVariable("varMissionTarget","%&lt;target&gt;")
Note("---&gt; mission target %&lt;target&gt;")
Execute("eu;e;missionPrepRiddle;missionPrepKill")</send>
  </trigger>
  <trigger
   group="mission-ask"
   match="【队伍】(.+)：mission-location-(?P&lt;arealoc&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-ask",0)
local t=GetVariable("varMissionTarget")
if t=="unknown" then
--Note("---&gt; unknown mission target")
--Execute("stopp")
Execute("missionAsk")
 else 

local locid=mapAreaLocName["%&lt;arealoc&gt;"];
if locid==nil or locid=="" or locid==undefined then
Execute("missionLocationNotFound %&lt;arealoc&gt;")
endelse if locid=="duplicated" then
Note("---&gt; duplicated location, need to vision npc")
Execute("missionLocate")
 else 
Note("---&gt; mission location id " .. locid)
SetVariable("varMissionLocationId",locid)
if locid.indexOf("fywall")&gt;=0)
Execute("tt mission-item-zhanjia")
Execute("missionCheckRiddleItem")
end

end</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="【队伍】(.+)：mission-lost-target$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-kill",0)
SetVariable("varMissionTarget","")
Note("---&gt; back to mission start position")
Execute("pp0 yue mask;pp0 suijin sword;pp0 zhanjia;wear magrobe;w;wd")
</send>
  </trigger>
  <trigger
   group="mission-request"
   match="【队伍】(.+)：mission-request"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>mission cancel</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="【队伍】(.+)：mission-resume$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp")
Doafterspecial(5,"enGroup mission-help-kill;missionIdleResumeHelpKill",10)
</send>
  </trigger>
  <trigger
   group="mission-search"
   match="【队伍】(.+)：missionfly-fail$"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>missionTeamFlyFail</send>
  </trigger>
  <trigger
   group="quest-askreturn"
   match="【队伍】(.+)：quest-return-end$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestReturnDone",1)
Note("---&gt; team quest return done")
--EnableGroup("quest-askreturn",0)
--Execute("whisper")</send>
  </trigger>
  <trigger
   group="quest-return"
   match="【队伍】(.+)：quest-return-start$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-ask",0)
Execute("doQuestReturn")
</send>
  </trigger>
  <trigger
   group="quest-ask"
   match="【队伍】(.+)：team-quest-cancel"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>quest cancel
quest</send>
  </trigger>
  <trigger
   group="quest-action"
   match="【队伍】(.+)：team-quest-cancel"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>quest cancel
quest</send>
  </trigger>
  <trigger
   group="quest-return"
   match="【队伍】(.+)：team-quest-cancel"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>quest cancel
quest</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="①：(?P&lt;pile&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p='%&lt;pile&gt;';
local n=p.lastIndexOf('●')+1;
Note("pile 1:" .. n)
SetVariable("varPile1",n)</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="②：(?P&lt;pile&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p='%&lt;pile&gt;';
local n=p.lastIndexOf('●')+1;
Note("pile 2:" .. n)
SetVariable("varPile2",n)
</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="③：(?P&lt;pile&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p='%&lt;pile&gt;';
local n=p.lastIndexOf('●')+1;
Note("pile 3:" .. n)
SetVariable("varPile3",n)</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="④：(?P&lt;pile&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p='%&lt;pile&gt;';
local n=p.lastIndexOf('●')+1;
Note("pile 4:" .. n)
SetVariable("varPile4",n)</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="⑤：(?P&lt;pile&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p='%&lt;pile&gt;';
local n=p.lastIndexOf('●')+1;
Note("pile 5:" .. n)
SetVariable("varPile5",n)</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="⑥：(?P&lt;pile&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p='%&lt;pile&gt;';
local n=p.lastIndexOf('●')+1;
Note("pile 6:" .. n)
SetVariable("varPile6",n)</send>
  </trigger>
  <trigger
   group="zong-dugu"
   match="（你上一个动作还没有完成，不能施用外功。） "
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Doafterspecial(0.5,"hp;perform zong",10)
Execute("perform zong")
</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="＊(.*)\((?P&lt;skname&gt;.+)\)(\s+)-(\s*)(\S+)(\s+)(?P&lt;level&gt;\d+)/(\s*)(?P&lt;pct&gt;\d+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local sk=GetVariable("varResearchSkill")
local lv=GetVariable("varResearchLevel")
local skname='%&lt;skname&gt;';
local now=%&lt;pct&gt;;
local lvl=%&lt;level&gt;;

local act="practice";
if now&gt;=lvl*lvl)
act="research";
SetVariable("varSleepPRAction",act)

if sk==skname then
Note("current level: %&lt;skname&gt; - %&lt;level&gt; -%&lt;pct&gt;, target level " .. lv .. ", action " .. act)
if lvl&gt;=lv)
Execute("stopp")
end</send>
  </trigger>
  <trigger
   group="fly_wm"
   match="白梅阁"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_wm",0)</send>
  </trigger>
  <trigger
   group="fly_shenshui"
   match="白水殿"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_shenshui",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="taishan-cave"
   match="半山一石洞"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("taishan-cave",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="pianzi"
   match="宝剑应随真主，我有一把幽冥紫灵剑，你可愿意买下"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>answer yes
give 100 gold to pianzi</send>
  </trigger>
  <trigger
   enabled="y"
   group="fight"
   match="被杖法所惑，动作慢了下来！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>showTargetBusy 5</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="必须空手。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>ww0</send>
  </trigger>
  <trigger
   group="fly_qjl"
   match="不眠阁"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_qjl",0)</send>
  </trigger>
  <trigger
   group="sky_learn"
   match="不愿意教你这项技能。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varLearnSkyNext",1)</send>
  </trigger>
  <trigger
   group="smart-research"
   match="才智： (?P&lt;myint&gt;.+) / (.+)     体质："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; my int %&lt;myint&gt;")
SetVariable("varResearchNowInt","%&lt;myint&gt;")</send>
  </trigger>
  <trigger
   group="sl_road"
   match="藏经阁"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("sl_road",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="ccd_road"
   match="常春岛渡口"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
EnableGroup("ccd_road",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="ccd-down"
   match="长阶"
   regexp="y"
   sequence="100"
  >
  <send>westdown</send>
  </trigger>
  <trigger
   group="dqd_up"
   match="长阶"
   regexp="y"
   sequence="100"
  >
  <send>eastup</send>
  </trigger>
  <trigger
   group="ccd-up"
   match="长阶$"
   regexp="y"
   sequence="100"
  >
  <send>eastup</send>
  </trigger>
  <trigger
   group="fly_nangong"
   match="沉香南宫"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_nangong",0)
</send>
  </trigger>
  <trigger
   enabled="y"
   match="池水鳞光闪闪，那久违的童心一下子满溢心上，让人想起小时候透过水晶球看"
   regexp="y"
   sequence="100"
  >
  <send>lookat crystal ball
</send>
  </trigger>
  <trigger
   group="dq-swim"
   match="池水太深，游不过去！"
   regexp="y"
   sequence="100"
  >
  <send>swim</send>
  </trigger>
  <trigger
   group="boat_in"
   match="池水太深，游不过去！"
   regexp="y"
   sequence="100"
  >
  <send>swim pond</send>
  </trigger>
  <trigger
   group="teamfly-host"
   match="出口"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("teamfly-host",0)
Execute("checkBusy")
/*
initActionQueue()
pushSingleAction("checkBusy")
--pushSingleAction("waitSec 3")
pushSingleAction("goo illusionist xi")
pushSingleAction("down;enter;fd;teamflyEnd;whisper")
startAction()
*/</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="出口"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly-xg",0)
Execute("checkBusy")</send>
  </trigger>
  <trigger
   group="hell_dash"
   match="储藏室"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("hell_dash",0)
Send("whisper")</send>
  </trigger>
  <trigger
   group="usemark"
   match="此地不能使用时空转换。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("burn")
Doafterspecial(6,"usemark",10)
</send>
  </trigger>
  <trigger
   group="taskfinger"
   match="此人已关闭了ＴＥＬＬ频道。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varMyQueue1.enqueue("player")</send>
  </trigger>
  <trigger
   group="fly_palace"
   match="大殿"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_palace",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="戴小宗诚惶诚恐对你道：“怎么敢劳您大驾”！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask-fly",0)
Execute("hp")
Doafterspecial(3,"checkCutDownExp",10)</send>
  </trigger>
  <trigger
   group="msg-team"
   match="戴小宗抽出一封信递给你道："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask-team",1)
</send>
  </trigger>
  <trigger
   group="msg-smk"
   match="戴小宗抽出一封信递给你道："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask",1)
</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="戴小宗抽出一封信递给你道："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask-fly",1)
</send>
  </trigger>
  <trigger
   group="msg"
   match="戴小宗抽出一封信递给你道："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("msgask",1)
</send>
  </trigger>
  <trigger
   group="quest-list"
   match="但是(.+)已经没有足够的时间来完成它了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local lastQuest=GetVariable("varQuestListCurrent")
mapQuestQueue[lastQuest]=-1;</send>
  </trigger>
  <trigger
   group="quest-kill"
   match="得手了！$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varStealTarget")
Execute("kill " .. t.. ";ssAutokillPre")
EnableGroup("autokill",1)
</send>
  </trigger>
  <trigger
   group="move"
   match="的呼唤毫无效果，可能是你因为不够熟练。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varFlyTarget")
Execute("goo "..t)</send>
  </trigger>
  <trigger
   group="mission-riddle-wait"
   match="地藏拿着解药，毫不犹豫地吞了下去。然后全身骨节咔咔作响，似乎不那么僵硬了|并没有悲伤、潦倒、失意、失败，"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
Execute("endActionGroup mission-riddle-wait")
</send>
  </trigger>
  <trigger
   group="quest-return"
   match="递给你"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>pp0 all</send>
  </trigger>
  <trigger
   group="stone_y"
   match="递给你一盒胭脂"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>pp0 yanzhi</send>
  </trigger>
  <trigger
   group="fate_ts"
   match="东方的天空中逐渐出现了一丝鱼肚白。"
   regexp="y"
   sequence="100"
  >
  <send>north</send>
  </trigger>
  <trigger
   group="quest-team"
   match="队伍成员(.*)杀了『(?P&lt;questkill&gt;.*)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Send(%&lt;questkill&gt;)
ArraySet("questkill",'%&lt;questkill&gt;',"k")
Note("---&gt; add kill " .. '%&lt;questkill&gt;')
</send>
  </trigger>
  <trigger
   group="questlist"
   match="队伍成员(.*)现在的任务是: 杀『(?P&lt;qkill&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varMyQueue1.enqueue("npc-%&lt;qkill&gt;")</send>
  </trigger>
  <trigger
   group="quest-team"
   match="队伍成员(.*)找回『(?P&lt;questitem&gt;.*)』给天机老人。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ArraySet("questitem",'%&lt;questitem&gt;',"s")
Note("---&gt; add item " .. '%&lt;questitem&gt;')</send>
  </trigger>
  <trigger
   group="quest-list"
   match="队伍成员(.+)现在的任务是: 杀『(?P&lt;target&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestListCurrent","%&lt;target&gt;")
</send>
  </trigger>
  <trigger
   group="quest-return-list"
   match="队伍成员(.+)现在的任务是: 寻『(?P&lt;target&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>listQuestActiveQueue.push("%&lt;target&gt;")
</send>
  </trigger>
  <trigger
   group="quest-list"
   match="队伍成员(.+)现在的任务是: 寻『(?P&lt;target&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestListCurrent","%&lt;target&gt;")</send>
  </trigger>
  <trigger
   group="check_item"
   match="对方好像没有你想要的东西。"
   regexp="y"
   sequence="100"
  >
  <send>kill waiter</send>
  </trigger>
  <trigger
   group="check-get"
   match="对你说：在这里不要乱摸乱动！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill monk;kill monk 2;kill monk 3;wield blade;perform kuaidao;unwield blade")
Doafterspecial(2,"get nothing123",10)</send>
  </trigger>
  <trigger
   enabled="y"
   group="myinfo"
   match="法力(\s\s)(\S\S)(\s*)(?P&lt;fa&gt;\d*)(\s*)/(\s*)(?P&lt;maxfa&gt;\d*)(\s*)\((.+)\)(\s+)经验：(\s+)(?P&lt;exp&gt;\S+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusFa",%&lt;fa&gt;)
SetVariable("statusMaxFa",%&lt;maxfa&gt;)
SetVariable("statusExp",%&lt;exp&gt;)
</send>
  </trigger>
  <trigger
   group="boat_in"
   match="方舟$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("boat_in",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="sl_road"
   match="非少林弟子不可再往前走了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill monk")
DoAfterSpecial(1,"northup",10)</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="风云广场"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","turn dragon;down;jump")</send>
  </trigger>
  <trigger
   group="fly_jobhome"
   match="风云雅阁"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_jobhome",0)</send>
  </trigger>
  <trigger
   enabled="y"
   group="fight"
   match="缚手缚脚，一筹莫展！！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>showTargetBusy 5</send>
  </trigger>
  <trigger
   group="pianzi"
   match="该你了。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>showPile</send>
  </trigger>
  <trigger
   enabled="y"
   match="告诉你：COMMAND:(?P&lt;command&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; incoming command %&lt;command&gt;")
Execute("%&lt;command&gt;")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="auto"
   match="告诉你：DISCONNECTME$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("--&gt;DISCONNECT")
Execute("NOCONNECT")
Save("")
Disconnect()
</send>
  </trigger>
  <trigger
   group="jiedume"
   match="告诉你：HEALDONE"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varInPoison",0)
EnableGroup("jiedume",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="taskreward"
   match="告诉你：TASK(?P&lt;task&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
Execute("settaskreturn %&lt;task&gt;")
startAction(true)</send>
  </trigger>
  <trigger
   group="mission-poke-other"
   match="告诉你：ghost-NOT-ready"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varMissionPokeOtherTarget")
Doafterspecial(20,"ghostHelp " .. t,10)
</send>
  </trigger>
  <trigger
   group="quest-action-ghost"
   match="告诉你：ghost-NOT-ready"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local h=GetVariable("varGhostHelper")
local t=GetVariable("varFlyTarget")
Doafterspecial(10,"tell " .. h.. " quest-ghost-" .. t,10)
</send>
  </trigger>
  <trigger
   group="mission-poke-other"
   match="告诉你：ghost-complete"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varMissionPokeOtherTarget")
Execute("poke " .. t)</send>
  </trigger>
  <trigger
   group="quest-action-ghost"
   match="告诉你：ghost-complete"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local f=GetVariable("varTeamFlyTarget")
Execute("gooGhost " .. f)</send>
  </trigger>
  <trigger
   group="teamfly-host"
   match="告诉你：ghost-complete"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varFlyTarget")
Send("conjure teamdrift sense")
Send(t)</send>
  </trigger>
  <trigger
   group="teamfly-host"
   match="告诉你：ghost-fail"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; ghost fail, abort mission")
EnableGroup("teamfly-host",0)
initActionQueue()
Execute("drop")</send>
  </trigger>
  <trigger
   group="mission-poke-other"
   match="告诉你：ghost-fail"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; ghost fail, abort mission")
initActionQueue()
EnableGroup("mission-poke-other",0)
Execute("missionPokeOtherFail")</send>
  </trigger>
  <trigger
   group="ginseng2"
   match="告诉你：ginseng-2st"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
--pushSingleAction("checkBusy")
pushSingleAction("fd;autokill dugu chi")
pushSingleAction("up;autofight shu")
pushSingleAction("jump;jump;south;checkStatus")
pushSingleAction("south;south;south;east;pawn ginseng;checkBusy")
pushSingleAction("sell gold mituo;checkBusy")
pushSingleAction("west;north;north;east;north;tell shu ginseng-done;whisper")

startAction(true)
</send>
  </trigger>
  <trigger
   group="ginseng2"
   match="告诉你：ginseng-inposition"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
--pushSingleAction("checkBusy")
pushSingleAction("fd;autokill dugu chi")
pushSingleAction("checkCorpseGoldItem")
pushSingleAction("up;autofight lshui+numberone+kana")
pushSingleAction("jump;jump;south;tell lshui ginseng-2st;checkStatus")
pushSingleAction("south;south;south;east;pawn ginseng;checkBusy")
pushSingleAction("sell gold mituo;checkBusy")
pushSingleAction("west;north;north;east;north;tell code ginseng-back;whisper")
startAction(true)
</send>
  </trigger>
  <trigger
   group="ginseng2"
   match="告诉你：ginseng-inposition"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
--pushSingleAction("checkBusy")
pushSingleAction("fd;autokill dugu chi")
pushSingleAction("checkCorpseGoldItem;tell code ginseng-back")
pushSingleAction("up;autofight lshui+numberone+shu 2")
pushSingleAction("jump;jump;south;checkStatus")
pushSingleAction("south;south;south;east;pawn ginseng;checkBusy")
pushSingleAction("sell gold mituo;checkBusy")
pushSingleAction("west;north;north;east;north;whisper")
pushSingleAction("waitPoke code")
pushSingleAction("give code all;reconnectGinseng")
startAction(true)
</send>
  </trigger>
  <trigger
   group="ginseng2"
   match="告诉你：ginseng-reconnect"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>reconnectGinseng2st</send>
  </trigger>
  <trigger
   group="mission-fly"
   match="告诉你：mission-go"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local a=GetVariable("varMissionAsker")
initActionQueue()
pushSingleAction("missionFlyMark")
pushSingleAction("goo illusionist dong")
pushSingleAction("down;south;checkStatus")
pushSingleAction("east;savePots")
pushSingleAction("tell " .. a.. " mission-fly-complete;whisper")
startAction(true)
</send>
  </trigger>
  <trigger
   group="mission-request"
   match="告诉你：mission-request"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>mission cancel</send>
  </trigger>
  <trigger
   group="teamfly-ask"
   match="告诉你：teamflyNOTready"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local h=GetVariable("varTeamFlyHelper")
Doafterspecial(5,"tell " .. h.. " teamflygo",10)
</send>
  </trigger>
  <trigger
   group="teamfly-ask"
   match="告诉你：teamflybroken"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("teamfly-ask",0)
--local b=GetVariable("commandBreak")
--Note("---&gt; team fly broken")
Execute("drop")
</send>
  </trigger>
  <trigger
   group="teamfly-ask"
   match="告诉你：teamflyready"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varTeamFlyTarget")
local h=GetVariable("varTeamFlyHelper")
Execute("whisper " .. h.. " teamfly-" .. t)
</send>
  </trigger>
  <trigger
   group="mission-locate"
   match="告诉你：vision-broken"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-locate",0)
Execute("missionAsk")</send>
  </trigger>
  <trigger
   group="mission-locate"
   match="告诉你：vision-location:(?P&lt;namedesc&gt;.+)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-locate",0)
local locid=mapLocationNameId["%&lt;namedesc&gt;"];
Note("---&gt; mission location id:" .. locid)
if locid==nil or locid=="" or locid=="undefined" or locid==undefined then
Execute("missionLocationNotFound %&lt;namedesc&gt;")
 else 
SetVariable("varMissionLocationId",locid)
if locid.indexOf("fywall")&gt;=0)
Execute("tt mission-item-zhanjia")
Execute("missionCheckRiddleItem")
end
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="恭喜你，又完成了一个任务。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTasknpcKilled",1)
</send>
  </trigger>
  <trigger
   group="huashan_yadi"
   match="公冶长看了你一眼，笑对你说：“你知道它在说什么吗？它在说："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
Execute("follow crow")
</send>
  </trigger>
  <trigger
   group="huashan_yadi"
   match="公冶长看了你一眼，欲言又止。 "
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>north
south</send>
  </trigger>
  <trigger
   group="npc-nopass-police"
   match="古丽娜走了过来。|阿里木走了过来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; kill police")</send>
  </trigger>
  <trigger
   group="manglin-up"
   match="古树顶"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("manglin-up",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="move-dqw"
   match="谷内小径"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("move-south",0)
EnableGroup("move-dqw",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="paa"
   match="怪物钻石\(Diamond(?P&lt;dnum&gt;\d+)\)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varMyQueue1.enqueue("diamond".. "%&lt;dnum&gt;")</send>
  </trigger>
  <trigger
   group="fly_dqd"
   match="观月顶"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_dqd",0)
DoAfterSpecial(1,"whisper",10):</send>
  </trigger>
  <trigger
   group="dqd_up"
   match="观月顶"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dqd_up",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="task"
   match="滚落山崖。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(10,"eat jiduan",10)
DoAfterSpecial(15,"restartTask",10)
</send>
  </trigger>
  <trigger
   group="task"
   match="滚下了山岭。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(10,"eat jiduan",10)
DoAfterSpecial(15,"restartTask",10)
</send>
  </trigger>
  <trigger
   group="mission-help-kill2"
   match="郭灭死了。|胡姥姥死了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//SetVariable("varMissionTarget","gao tianjue")
SetVariable("varCheckKneel","yes")
Execute("burn")</send>
  </trigger>
  <trigger
   group="mission-action"
   match="郭灭死了。|胡姥姥死了。|金花娘死了。|金童死了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; need to go kneel later")
SetVariable("varCheckKneel","yes")

</send>
  </trigger>
  <trigger
   group="bat_wave"
   match="海浪就象是一头头恶狼，唑咬着你的船"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(0.2,"look wave",10)</send>
  </trigger>
  <trigger
   group="dqe-bat-t"
   match="海浪就象是一头头恶狼，唑咬着你的船！"
   regexp="y"
   sequence="100"
  >
  <send>look wave</send>
  </trigger>
  <trigger
   group="fly_dm"
   match="汉柏院"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_dm",0)
DoAfterSpecial(1,"whisper",10)
</send>
  </trigger>
  <trigger
   group="wanmei-swim"
   match="荷花荡"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup wanmei-swim</send>
  </trigger>
  <trigger
   group="mission-check-ready"
   match="很无聊地戳了你一下。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local c=parseInt(GetVariable("varMissionCheckReady"))
c=c+1;
SetVariable("varMissionCheckReady",c)
Note("---&gt; mission helper ready count:" .. c)</send>
  </trigger>
  <trigger
   group="shenshui_up"
   match="轰隆一声，头顶上的出口又被挡住了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--ResetTimers()
--DeleteTemporaryTimers()
Send("search")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="忽然紫气流转，全部吸入鼎内。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>pillLian</send>
  </trigger>
  <trigger
   group="mission-help-kill2"
   match="胡姥姥嘿嘿怪叫：你上了我们姊妹当了！"
   regexp="y"
   sequence="100"
  >
  <send>kill hulaolaob</send>
  </trigger>
  <trigger
   group="kkpaper"
   match="胡英死了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("kkpaper",0)
DoAfterSpecial(4,"ww0;whisper",10)</send>
  </trigger>
  <trigger
   group="fly_dwg2"
   match="湖底"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_dwg2",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="flower"
   match="花满城小心翼翼递给你一朵"
   regexp="y"
   sequence="100"
  >
  <send>delivery</send>
  </trigger>
  <trigger
   group="dali_tea"
   match="华赫艮给了你一个精致花盆。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("drop tea flower;east;south;east;east;east;east")
DoAfterSpecial(1,"dle-jump",10)</send>
  </trigger>
  <trigger
   group="quest"
   match="还好，没有被发现。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n=GetVariable("varQuestNpc")
DoAfterSpecial(1,"steal cloth from " .. n,10)</send>
  </trigger>
  <trigger
   group="fate-huang-qingliang"
   match="缓缓站了起来！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fate-huang-qingliang",0)
Note("---&gt;fate!!!")
Execute("fate;whisper")</send>
  </trigger>
  <trigger
   group="task"
   match="慌乱而去"
   regexp="y"
   sequence="100"
  >
  <send>get bag
gab LOST ITEM!
gab LOST ITEM!!
gab LOST ITEM!!!
</send>
  </trigger>
  <trigger
   enabled="y"
   group="myitem"
   match="慌乱而去"
   send_to="12"
   sequence="100"
  >
  <send>Note("------------&gt; lost item")
Note("------------&gt; lost item")
Note("------------&gt; lost item")
Note("------------&gt; lost item")</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="慌乱而去。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt;Item lost !!!")
SetVariable("commandMove","onLostItem")
</send>
  </trigger>
  <trigger
   group="fly_huangshan"
   match="黄山剑庐"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_huangshan",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="pianzi"
   match="江湖骗子说道：佩服，佩服，这是你的二两银子"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>play</send>
  </trigger>
  <trigger
   group="pianzi"
   match="江湖骗子说道：怎么不玩了，你还有希望赢"
   regexp="y"
   sequence="100"
  >
  <send>play</send>
  </trigger>
  <trigger
   group="hua-pearl"
   match="金灵芝和丁枫向东边荒凉的小径走去，很快消失了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("hua-pearl,0)
Executre("east;whisper");</send>
  </trigger>
  <trigger
   group="huashan_pearl"
   match="金灵芝和丁枫向东边荒凉的小径走去，很快消失了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("huashan_pearl",0)
Execute("east;whisper")</send>
  </trigger>
  <trigger
   enabled="y"
   group="myinfo"
   match="精力(\s\s)(\S\S)(\s*)(?P&lt;jin&gt;\d*)(\s*)/(\s*)(?P&lt;maxjin&gt;\d*)(\s*)\((?P&lt;jinrate&gt;.+)%\)(\s+)食物(\S\S)(\s*)(?P&lt;food&gt;\d*)%"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusJin",%&lt;jin&gt;)
SetVariable("statusMaxJin",%&lt;maxjin&gt;)
SetVariable("statusFood",%&lt;food&gt;)
SetVariable("statusJinRate",%&lt;jinrate&gt;)

</send>
  </trigger>
  <trigger
   group="fly_guanyin"
   match="精致卧房"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_guanyin",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="dali_tea"
   match="经过你的精心栽培，茶花成活了！！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varDaliTeaDone",1)</send>
  </trigger>
  <trigger
   group="mission-ask"
   match="据组织情报，(.+)现在藏匿在(?P&lt;arealoc&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-ask",0)
local t=GetVariable("varMissionTarget")
local fs=GetVariable("varMissionFengsan")

if t=="unknown" then
--Note("---&gt; unknown mission target")
--Execute("stopp")
Execute("missionAsk")

endelse if fs=="yes" and t~="feng san" then
--fengsan logic
Execute("missionAsk")

 else 
local locid=mapAreaLocName["%&lt;arealoc&gt;"];
if locid==nil or locid=="" or locid==undefined then
Execute("missionLocationNotFound %&lt;arealoc&gt;")
endelse if locid=="duplicated" then
Note("---&gt; duplicated location, need to vision npc")
Execute("missionLocate")
 else 
Note("---&gt; mission location id " .. locid)
SetVariable("varMissionLocationId",locid)
if locid.indexOf("fywall")&gt;=0)
Execute("tt mission-item-zhanjia")
Execute("missionCheckRiddleItem")
end

end</send>
  </trigger>
  <trigger
   group="mission-request2"
   match="据组织情报，(.+)现在藏匿在(?P&lt;loc&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local l="%&lt;loc&gt;".length;
--Note("---&gt; length" .. l)
if l&gt;3)
Execute("tt;tt mission-location-%&lt;loc&gt;")
else
Execute("tt;tt mission-location-unknown")

</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="看起来(.+)想杀死你！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("de;waitSec 4")
pushSingleAction("pillLian")
Execute("ss1;autokill")
startAction()
</send>
  </trigger>
  <trigger
   group="mission-search-autokill"
   match="看起来(?P&lt;npc&gt;.+)想杀死你！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local c=GetVariable("varMissionName")
if c=="%&lt;npc&gt;" then
Note("---&gt; mission npc auotkill")
EnableGroup("mission-search-autokill",0)
initActionQueue()
local t=GetVariable("varMissionTarget")
SetVariable("varKillTarget",t)
Execute("wimpy 99;kill " .. t.. ";ssNoKill")
pushSingleAction("checkBusy")
if t~="no xue yiren")
pushSingleAction("missionSummon")
else
pushSingleAction("missionNoSummon")
end</send>
  </trigger>
  <trigger
   group="npc-nopass"
   match="看起来孤魂想杀死你！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>ss1</send>
  </trigger>
  <trigger
   group="mission-action"
   match="看起来狼想杀死你！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varMissionTarget")
if t~=nil and t~="" then
Execute("kill " .. t)
end</send>
  </trigger>
  <trigger
   group="meng-mission"
   match="看起来山西劫匪想杀死你！$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local now=os.time()
local last=GetVariable("timeLastMengMissionKill")
if last==nil then last=0 end
last=tonumber(last)
if now-last &lt;3 then
Note ("---&gt; skip kill")
else
SetVariable("timeLastMengMissionKill",now)
initActionQueue()
--pushSingleAction("exert herbheal;checkBusy")
pushSingleAction("herbHeal")
Execute("aa2;k gangster&amp;gangster 2&amp;gangster 3&amp;gangster 4&amp;gangster 5&amp;gangster 6&amp;gangster 7&amp;gangster 8")
end</send>
  </trigger>
  <trigger
   group="mission-kill2"
   match="看起来萧仲忍想杀死你"
   regexp="y"
   sequence="100"
  >
  <send>burn</send>
  </trigger>
  <trigger
   group="dqd_boat"
   match="老婆子说道：“到了，你们可以下船了。”"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dqd_boat",0)
Execute("up;whisper")
</send>
  </trigger>
  <trigger
   group="dqd_boat"
   match="老婆子说道：“上船吧！”"
   regexp="y"
   sequence="100"
  >
  <send>down</send>
  </trigger>
  <trigger
   enabled="y"
   group="myinfo"
   match="灵力(\s\s)(\S\S)(\s*)(?P&lt;lin&gt;\d*)(\s*)/(\s*)(?P&lt;maxlin&gt;\d*)(\s*)\((.+)\)(\s+)杀气(\S\S)(\s*)(?P&lt;sha&gt;\S+)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusLin",%&lt;lin&gt;)
SetVariable("statusMaxLin",%&lt;maxlin&gt;)
local sha='%&lt;sha&gt;'
if sha== nil then sha="0" end
SetVariable("statusSha",sha)
</send>
  </trigger>
  <trigger
   group="liutree_up"
   match="柳树上"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("liutree_up",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="sl_door"
   match="没有游山牌，非少林弟子不可入内"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill monk")
DoAfterSpecial(1,"north",10)
</send>
  </trigger>
  <trigger
   group="taskfinger"
   match="没有这个人....。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varMyQueue1.enqueue("npc")</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="门派贡献： (?P&lt;gx&gt;\S*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varDaliGX",'%&lt;gx&gt;')
Note("---&gt; DALI gongxian:" .. '%&lt;gx&gt;')</send>
  </trigger>
  <trigger
   group="sq_in"
   match="门是开着的，敲什么？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>north</send>
  </trigger>
  <trigger
   group="heisong_up"
   match="蒙面人将小娟装入大布袋，向黑松山遁去"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
EnableGroup("heisong_up",0)
Execute("north;whisper")</send>
  </trigger>
  <trigger
   group="liutree_down"
   match="猛然间一股很大的力量把你拖入了水中"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("liutree_down",0)
DoAfterSpecial(2,"whisper",10)
</send>
  </trigger>
  <trigger
   group="liutree_up"
   match="猛然间一股很大的力量把你拖入了水中。"
   regexp="y"
   sequence="100"
  >
  <send>up
climb tree</send>
  </trigger>
  <trigger
   group="dwg_in"
   match="秘道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dwg_in",0)
Send("whisper")
</send>
  </trigger>
  <trigger
   group="mission-check-wiz"
   match="目前正在连线中。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varMissionCheckWizOnline","yes")
Note("---&gt; wiz online")</send>
  </trigger>
  <trigger
   group="hell_dash"
   match="奈何桥"
   regexp="y"
   sequence="100"
  >
  <send>east
dash</send>
  </trigger>
  <trigger
   group="fly_shiyi"
   match="南宫钱庄"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_shiyi",0)</send>
  </trigger>
  <trigger
   group="fly_shisi"
   match="南宫钱庄"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_shisi",0)</send>
  </trigger>
  <trigger
   enabled="y"
   group="myinfo"
   match="内力(\s\s)(\S\S)(\s*)(?P&lt;force&gt;\d*)(\s*)/(\s*)(?P&lt;maxforce&gt;\d*)(\s*)\((.+)\)(\s+)潜能(\S\S)(\s*)(?P&lt;pots&gt;\S*)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusforce",%&lt;force&gt;)
SetVariable("statusMaxForce",%&lt;maxforce&gt;)
SetVariable("statusPots",%&lt;pots&gt;)
</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="内力不够|你的内力或气不够"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varSleepPRRecover",1)</send>
  </trigger>
  <trigger
   group="sl_indoor"
   match="内院$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("sl_indoor",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="move"
   match="你：FLYMEREADY"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("goo2 flyme")</send>
  </trigger>
  <trigger
   group="taskreward"
   match="你：no task$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("reloadScript")
DoAfterSpecial(10,"dotaskreward",10)
</send>
  </trigger>
  <trigger
   group="meng_down"
   match="你把小床推过来掩盖住密道"
   regexp="y"
   sequence="100"
  >
  <send>push bed</send>
  </trigger>
  <trigger
   group="meng_down"
   match="你把小床推开发现了一条密道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("meng-down",0)
Execute("ww0;down;whisper")</send>
  </trigger>
  <trigger
   group="sharen-knee"
   match="你搬动机关。。。突然不知从哪儿射出一跟铁针，你被打了个正着！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Doafterspecial(1,"push 1",10)</send>
  </trigger>
  <trigger
   group="quest-ask"
   match="你被奖励了："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestReturnReward",1)
Execute("qq")</send>
  </trigger>
  <trigger
   group="taskkill"
   match="你不可以在这里研究。"
   regexp="y"
   sequence="100"
  >
  <send>get n1</send>
  </trigger>
  <trigger
   group="questkill"
   match="你不可以在这里研究。"
   regexp="y"
   sequence="100"
  >
  <send>get n1</send>
  </trigger>
  <trigger
   group="autokill"
   match="你不可以在这里研究。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("autokill-perform",0)
Execute("get nothing1234")

</send>
  </trigger>
  <trigger
   enabled="y"
   match="你不由地深吸了一口气。|你中的(.+)发作了！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusPoison",1)</send>
  </trigger>
  <trigger
   group="jiedume"
   match="你成功地逼出体内的巨毒"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varInPoison",0)
EnableGroup("jiedume",0)</send>
  </trigger>
  <trigger
   group="quest"
   match="你成功地偷到一"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n=GetVariable("varQuestNpc")
Execute("pp0 cloth;questKill " .. n)</send>
  </trigger>
  <trigger
   group="dq-swim"
   match="你从池水中爬了上来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dq-swim",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="mission-check-riddle"
   match="你从天蚕布袋中拿出"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-check-riddle",0)
Note("---&gt; mission riddle item exist")
SetVariable("varMissionRiddleItem","yes")
Execute("missionGo")</send>
  </trigger>
  <trigger
   group="check-status"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>hp;ask</send>
  </trigger>
  <trigger
   group="ginseng-maze-move-dz1"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ginseng-maze-move-dz1",0)
Execute("gsMazeMove")</send>
  </trigger>
  <trigger
   group="dqe-bat-t"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>dqe-bat-1</send>
  </trigger>
  <trigger
   group="loopjob"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("up;up")
local loopjob=GetVariable("varLoopJob")
Execute(loopjob)</send>
  </trigger>
  <trigger
   group="dazuo"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("after dazuo")
local a=GetVariable("varActionAfterDazuo")
if a~="" then
Execute(a)
SetVariable("varActionAfterDazuo","")
EnableGroup("dazuo",0)
end</send>
  </trigger>
  <trigger
   group="ginseng-maze-move-dz2"
   match="你从忘我的境界中回神敛气，睁开了眼睛。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ginseng-maze-move-dz2",0)
Execute("drop 1 coin;gsMazeLook")</send>
  </trigger>
  <trigger
   group="jump_practice_research"
   match="你的(.*)进步了！$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varResearchLevelUp", 1)</send>
  </trigger>
  <trigger
   group="usemark"
   match="你的［时空转换］失败了"
   regexp="y"
   sequence="100"
  >
  <send>usemark</send>
  </trigger>
  <trigger
   group="usemark"
   match="你的精不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("ex1 200")
Doafterspecial(5,"usemark",10)</send>
  </trigger>
  <trigger
   group="smk"
   match="你的精不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("ex1 200")
DoAfterSpecial(5,"setmark",10)</send>
  </trigger>
  <trigger
   group="check-status"
   match="你的精气神全恢复了！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
local g=GetVariable("varMyGender")
if g=="male" then
Execute("hp;east;east;south;east;east;south;south;south;south;ask")
 else 
Execute("hp;west;west;south;west;west;south;south;south;south;ask")
end</send>
  </trigger>
  <trigger
   group="smk"
   match="你的灵力不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(2,"ex1 500",10)
DoAfterSpecial(5,"res 200",10)
DoAfterSpecial(8,"setmark",10)
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="你的灵力不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("de;res 2500")
DoAfterSpecial(4,"dz",10)</send>
  </trigger>
  <trigger
   group="teamfly-host"
   match="你的灵力不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Execute("de")
Doafterspecial(1,"res 200",10)
local t=GetVariable("varFlyTarget")
DoAfterSpecial(5,"teamfly " .. t,10)

</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="你的灵力不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--Execute("de")
DoAfterSpecial(1,"res 100",10)
local t=GetVariable("flyTarget")
DoAfterSpecial(5,"goo " .. t,10)

</send>
  </trigger>
  <trigger
   group="jump_practice_research"
   match="你的内力不够"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPracticeLimit",1)</send>
  </trigger>
  <trigger
   group="dugu-sword"
   match="你的内力不够，没有力气演练「总诀式」"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local k=GetVariable("varMyMaxKee")
k--;
Execute("ex " .. k)</send>
  </trigger>
  <trigger
   group="zong-dugu"
   match="你的内力不够，没有力气演练「总诀式」！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("ex 3000")
Doafterspecial(5,"fd;perform zong",10)</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="你的上一封信还没送到，怎么还来问我要"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(5,"ask fan about letter",10)</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="你的身体状况无法强化练习|体力不够"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varSleepPRRest",1)</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="你的神不够！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("gg0 pill;use pill;de")
DoAfterSpecial(4,"dz",10)</send>
  </trigger>
  <trigger
   group="shenshui_up"
   match="你的手在石壁上摸到了一个突出物，你顺手往上一按"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--EnableGroup("shenshui_up",0)
Execute("up")
--DoAfterSpecial(2,"whisper",10)</send>
  </trigger>
  <trigger
   group="summon-team"
   match="你的信鸽正在接引队友！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt;summon busy")
local t=GetVariable("varSummonTarget")
Doafterspecial(2,"inform " .. t,10)</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="你的眼前一黑，接著什麽也不知道了."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(120,"whisper",10)</send>
  </trigger>
  <trigger
   group="dali_yao"
   match="你的药锄象是碰到了些什么，这东西看上去象是药材，你毫不犹豫地把它揣在怀里！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varDaliYaoDone",1)
</send>
  </trigger>
  <trigger
   group="check-status"
   match="你的真气不够。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local f=GetVariable("varMyMaxForce")
f=f*3/2;
Execute("ex " .. f)
</send>
  </trigger>
  <trigger
   group="stone_y"
   match="你递给罗达成一块歙石"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varStoneTime",GetInfo(304))</send>
  </trigger>
  <trigger
   group="bat_dash"
   match="你点了点头。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("bat_dash",0)
Execute("eat jiduan")
DoAfterSpecial(10,"whisper",10)

</send>
  </trigger>
  <trigger
   group="bat_in"
   match="你点了点头。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("bat_in",0)
Execute("eat jiduan")
DoAfterSpecial(10,"whisper",10)

</send>
  </trigger>
  <trigger
   group="checkfaint"
   match="你点了点头。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("checkfaint",0)
--Execute("eat jiduan")
Send("whisper")
--DoAfterSpecial(1,"whisper",10)

</send>
  </trigger>
  <trigger
   group="stone_y"
   match="你丢下一个砚台"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
initActionQueue()
pushSingleAction("disStoneYGet;east;de;mmk2;waitSec 2")
pushSingleAction("goo2 alpha")
pushSingleAction("tell alpha GGstone;waitSec 3")
pushSingleAction("goo2 nangong")
pushSingleAction("east;south;west;westup;westup;westdown;south;westup;whisper")
pushSingleAction("gg0 yanzhi;give girl yanzhi;kill girl;waitSec 3")
pushSingleAction("umk")
pushSingleAction("west;give luo tea;give luo stone;enStoneYGet")
startAction(false)

</send>
  </trigger>
  <trigger
   group="mz_kill"
   match="你对此项技能一无所知，如何搞研究？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("get nothing1234")
</send>
  </trigger>
  <trigger
   group="autokill"
   match="你对此项技能一无所知，如何搞研究？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("autokill-perform",0)
EnableGroup("autokill-busy",1)
Execute("get nothing1234")

</send>
  </trigger>
  <trigger
   group="meng_kill"
   match="你对此项技能一无所知，如何搞研究？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("get nothing1234")
</send>
  </trigger>
  <trigger
   group="questkill"
   match="你对此项技能一无所知，如何搞研究？"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>get n1</send>
  </trigger>
  <trigger
   group="taskkill"
   match="你对此项技能一无所知，如何搞研究？"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>get n1</send>
  </trigger>
  <trigger
   group="maze_kill"
   match="你对此项技能一无所知，如何搞研究？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("get nothing1234")
</send>
  </trigger>
  <trigger
   group="mission-search"
   match="你对著郭灭喝道："
   regexp="y"
   sequence="100"
  >
  <send>kill gao tianjue</send>
  </trigger>
  <trigger
   group="pianzi_show"
   match="你对著江湖骗子点了点头"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("pianzi_show",0)
Execute("takePile")</send>
  </trigger>
  <trigger
   group="ginseng-up-move"
   match="你躲避不及，被大雪球紧紧的压在下边！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengUpMoveBusy","yes")
Note("---&gt; up move fail with busy, need to wait")</send>
  </trigger>
  <trigger
   group="taskreward"
   match="你发出一声怒吼，双臂一振，将周身凝聚的冰块震得粉碎！！"
   regexp="y"
   sequence="100"
  >
  <send>whisper</send>
  </trigger>
  <trigger
   group="ginseng-maze-move"
   match="你奋起最后一点残余的力气，从积雪堆中爬了出来！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>gsMazeMove</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="你奋起最后一点残余的力气，从积雪堆中爬了出来！！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>look
whisper</send>
  </trigger>
  <trigger
   group="check-get"
   match="你附近没有这样东西"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup check-get</send>
  </trigger>
  <trigger
   group="taskkill"
   match="你附近没有这样东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("taskkill",0)
Execute("taskkilldone")</send>
  </trigger>
  <trigger
   group="mission-check-riddle"
   match="你附近没有这样东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-check-riddle",0)
Note("---&gt; mission riddle item NOT exist")
SetVariable("varMissionRiddleItem","no")
Execute("missionAsk")</send>
  </trigger>
  <trigger
   group="questkill"
   match="你附近没有这样东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("questkill",0)
Execute("questKillDone")</send>
  </trigger>
  <trigger
   group="mz_kill"
   match="你附近没有这样东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ResetTimers()
DeleteTemporaryTimers()
EnableGroup("mz_kill",0)
DoAfterSpecial(1,"unwield all;whisper",10)</send>
  </trigger>
  <trigger
   group="maze_kill"
   match="你附近没有这样东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
ResetTimers()
EnableGroup("maze_kill",0)
Execute("gaa")
SetVariable("varMazeMonster",0)
Execute("whisper")

</send>
  </trigger>
  <trigger
   group="meng_kill"
   match="你附近没有这样东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("meng_kill",0)
--DeleteTemporaryTimers()
ResetTimers()
Execute("checkHP")</send>
  </trigger>
  <trigger
   enabled="y"
   group="move"
   match="你感觉到一股很大的力量在把你往下扯。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>up</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="你感受到对方的力量，但是不够强烈。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("flyTarget")
Send("conjure drift sense")
Send(t)
--Doafterspecial(2,"",10)
</send>
  </trigger>
  <trigger
   group="move"
   match="你感受到对方的灵力，但是不够强烈。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("flyTarget")
Execute("goo " .. t)</send>
  </trigger>
  <trigger
   group="teamfly-host"
   match="你感受到对方的灵力，但是不够强烈。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varFlyTarget")
Send("conjure teamdrift sense")
Send(t)
--Doafterspecial(2,"",10)
</send>
  </trigger>
  <trigger
   group="taskfinger"
   match="你告诉"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varMyQueue1.enqueue("player")</send>
  </trigger>
  <trigger
   group="meng-mission"
   match="你跟丢了那么多次还有脸来？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(10,"ask meng about mission;accept mission",10)
</send>
  </trigger>
  <trigger
   group="wait-poke"
   match="你很无聊地戳了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varWaitPokeDone","yes")</send>
  </trigger>
  <trigger
   group="mission-poke"
   match="你很无聊地戳了(.+)一下。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-poke",0)
local fs=GetVariable("varMissionFengsan")

--if fs=="no" then
local t=GetVariable("varMissionTarget")
if t~="no xue yiren")
Execute("missionSummon")
else
Execute("missionNoSummon")

-- else 
--Note("---&gt; found feng san")
--Execute("missionDoFengsan")
--end
</send>
  </trigger>
  <trigger
   group="mission-poke-other"
   match="你很无聊地戳了(.+)一下。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup mission-poke-other</send>
  </trigger>
  <trigger
   group="mission-wait"
   match="你很无聊地戳了(.+)一下。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("mission-wait",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="li_in"
   match="你很无聊地戳了铁传甲一下。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill royal servant;ss3")</send>
  </trigger>
  <trigger
   group="heisong_up"
   match="你很无聊地戳了小娟一下。"
   regexp="y"
   sequence="100"
  >
  <send>talk xiao juan</send>
  </trigger>
  <trigger
   group="dali_yao"
   match="你胡乱地挖几锄头，累得满头大汗，但什么也没找到，"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local f=GetVariable("varDaliYaoDone")
if f==1 then
SetVariable("varDaliYaoDone",0)
Execute("give ba yao;go west;east;wa yaocai")
 else 
Execute("go west;east;wa yaocai")
end
</send>
  </trigger>
  <trigger
   group="smk"
   match="你环顾四方，双手一挥，闪出一点紫色火花落入地上消失了 。。。。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("smk",0)
local now=os.time()
SetVariable("timeSetmark",now)
Execute("checkBusy")</send>
  </trigger>
  <trigger
   group="ginseng-maze-move"
   match="你机凌凌的打了个冷战。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; success to move, need to recover damage")
SetVariable("varGinsengMazeMoveRecover","yes")
--Doafterspecial(8,"fd;dz",10)
</send>
  </trigger>
  <trigger
   group="fate-wdleaf"
   match="你将一片枫叶抛在风中，慢慢的飘走了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fate-wdleaf",0)
Execute("south;west;whisper")
</send>
  </trigger>
  <trigger
   group="learn_master"
   match="你今天太累了，结果"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varLearnFlag",1)</send>
  </trigger>
  <trigger
   group="sky_learn"
   match="你今天太累了，结果什麽也没有学到。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varSkyLearnJumpFlag",1)</send>
  </trigger>
  <trigger
   group="sealfly"
   match="你紧闭双眼,对着魔毯念了几句咒语,魔毯载着你直冲云霄。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("sealfly",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="shenshui_pearl"
   match="你看到石壁上有几粒珍珠似乎组成一个小箭头，箭尖对着东南方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("shenshui_pearl",0)
Execute("southeast;whisper")</send>
  </trigger>
  <trigger
   group="bat_book"
   match="你看清楚点:这里没有这个人耶。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("bat_book",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="dali_tea"
   match="你看清楚点:这里没有这个人耶。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(5,"ask hua about chahua",10)</send>
  </trigger>
  <trigger
   group="huashan_pearl"
   match="你看清楚点:这里没有这个人耶。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("huashan_pearl",0)
Execute("whisper")
</send>
  </trigger>
  <trigger
   group="ty_in"
   match="你没成功"
   regexp="y"
   sequence="100"
  >
  <send>catch rabbit</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="你拿出回函"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("sc;de;ask")</send>
  </trigger>
  <trigger
   group="damo"
   match="你挠了挠头，站了起来。"
   regexp="y"
   sequence="100"
  >
  <send>mianbi</send>
  </trigger>
  <trigger
   group="ty_in"
   match="你扑了个空。"
   regexp="y"
   sequence="100"
  >
  <send>catch rabbit</send>
  </trigger>
  <trigger
   group="ginseng-up-move"
   match="你全身紧贴在岩石下，紧紧抓着凸出来的冰笋，终于躲过冰块，却不由得惊出一身冷汗！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengUpMoveFail","yes")
Note("---&gt; up move fail, retry now")</send>
  </trigger>
  <trigger
   group="damo"
   match="你揉了揉眼睛，好像在石壁上看到了什么，估计是眼花了。"
   regexp="y"
   sequence="100"
  >
  <send>mianbi</send>
  </trigger>
  <trigger
   group="loopjob"
   match="你上一个动作(.*)不能打坐"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(3,"dazuo",10)</send>
  </trigger>
  <trigger
   group="checkbusy"
   match="你上一个动作还没有完成！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(0.2,"get fromtrigger",10)</send>
  </trigger>
  <trigger
   group="check-status"
   match="你上一个动作还没有完成，不能打坐。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Doafterspecial(1,"dz",10)</send>
  </trigger>
  <trigger
   group="move"
   match="你上一个动作还没有完成，不能施展神通"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
local t=GetVariable("flyTarget")
DoAfterSpecial(10,"goo2 " .. t,10)
</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="你上一个动作还没有完成，不能施展神通。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("flyTarget")
DoAfterSpecial(3,"goo " .. t,10)

</send>
  </trigger>
  <trigger
   group="autokill2"
   match="你身上没有这样东西。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>gg0 sword</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="你身上没有这样东西。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>drop letter
ask</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="你身上没有足够的金子付定金呀。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>msgGold</send>
  </trigger>
  <trigger
   group="msg-team"
   match="你身上没有足够的金子付定金呀。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>msgGold</send>
  </trigger>
  <trigger
   group="msg"
   match="你身上没有足够的金子付定金呀。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>msgGold</send>
  </trigger>
  <trigger
   group="msg-smk"
   match="你身上没有足够的金子付定金呀。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>msgGold</send>
  </trigger>
  <trigger
   group="flower"
   match="你身上没有足够的银子付定金呀。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n=GetInfo(3)
local helper=GetVariable("helperFlower")
Execute("whisper "..helper.." SILVER" .. n)
DoAfterSpecial(3,"delivery",10)
</send>
  </trigger>
  <trigger
   group="shenshui_up"
   match="你什么都没找到。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Send("search")</send>
  </trigger>
  <trigger
   group="fight2"
   match="你使出(.+)，暗运内力，震飞手中"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varAutoKillLostSword",1)
Note("---&gt; LOST SWORD")</send>
  </trigger>
  <trigger
   group="zong-dugu"
   match="你使出独孤九剑之「总诀式」，将手中"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local jin=GetVariable("varMyJin")
local mjin=GetVariable("varMyMaxJin")
if jin&lt;=mjin/2 then
Doafterspecial(2,"fd;dz",10)
Doafterspecial(5,"perform zong",10)
 else 
Doafterspecial(0.3,"perform zong",10)
end</send>
  </trigger>
  <trigger
   group="ty_in"
   match="你收势不住摔了个嘴啃泥。 "
   regexp="y"
   sequence="100"
  >
  <send>catch rabbit</send>
  </trigger>
  <trigger
   group="usemark"
   match="你手指掐诀，口中默念，遁入一股青烟之中慢慢消失了 ...."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("usemark",0)
SetVariable("varFlyAway",1)
Execute("checkBusy")</send>
  </trigger>
  <trigger
   group="teamfly-ask"
   match="你受到(.+)的心灵感召，顿时如虚空凌度，已到了另外一个地方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("teamfly-ask",0)
Execute("checkBusy")
</send>
  </trigger>
  <trigger
   group="mission-teamfly"
   match="你受到(.+)的心灵感召，顿时如虚空凌度，已到了另外一个地方。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup mission-teamfly</send>
  </trigger>
  <trigger
   group="chisong-down"
   match="你顺着谷壁爬了下来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("chisong-down",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="manglin"
   match="你顺着树杆爬了上来。"
   regexp="y"
   sequence="100"
  >
  <send>look vine</send>
  </trigger>
  <trigger
   enabled="y"
   match="你似乎得到一个宝箱！$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varRewardBox",1)</send>
  </trigger>
  <trigger
   group="autokill2"
   match="你所选用的武功中没有这种必杀技。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>getMyWeapon</send>
  </trigger>
  <trigger
   group="msg-team"
   match="你突然感到脚底软绵绵的，无处着力！你大叫一声“不好！”，可是来不及"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
Doafterspecial(5,"reconnectWorld",10)
DoafterSpecial(10,"resumeMsgTeam",10)</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="你突然感到脚底软绵绵的，无处着力！你大叫一声“不好！”，可是来不及"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
Doafterspecial(5,"reconnectWorld",10)
DoafterSpecial(10,"resumeMsgFly",10)</send>
  </trigger>
  <trigger
   group="msg-smk"
   match="你突然感到脚底软绵绵的，无处着力！你大叫一声“不好！”，可是来不及"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
DoAfterSpecial(5,"reconnectWorld",10)
DoAfterSpecial(10,"resumeMsgSmk",10)</send>
  </trigger>
  <trigger
   group="msg2"
   match="你突然感到脚底软绵绵的，无处着力！你大叫一声“不好！”，可是来不及"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
DoAfterSpecial(5,"reconnectWorld",10)
DoAfterSpecial(10,"resumeMsg",10)</send>
  </trigger>
  <trigger
   group="ginseng-up-move"
   match="你突然觉得脚底一滑，竟仰天摔了一跤。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengUpMoveFailRecover","yes")
Note("---&gt; up move fail with damage, need to recover")</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="你无法感受到这个人 ...."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly-xg",0)
Send("")
Execute("drop")
</send>
  </trigger>
  <trigger
   group="teamfly-host"
   match="你无法感受到这个人 ....|你无法感受到这个人的灵力 ...."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Send("")

local t=GetVariable("varFlyTarget")
local c=GetVariable("varTeamFlyCount")
local f=mapGhostNpc[t];

if c==0 and f~=nil and f~="" then
SetVariable("varTeamFlyCount",1)
Note("---&gt; try to ghost " .. t)
Execute("ghostHelp " .. t.. ";aasee")
 else 
Note("---&gt; unable to team fly " .. t)
initActionQueue()
EnableGroup("teamfly-host",0)
Execute("drop")
end


</send>
  </trigger>
  <trigger
   group="move"
   match="你无法感受到这个人的存在..."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Send("")
ResetTimers()
DeleteTemporaryTimers()
</send>
  </trigger>
  <trigger
   group="ghost-npc"
   match="你无法感受到这个人的鬼魂。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ghost-npc",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="move"
   match="你无法感受到这个人的灵力"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("fyTarget")
DoAfterSpecial(10,t,10)</send>
  </trigger>
  <trigger
   group="move"
   match="你无法感受到这个人的内力 ...."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Send("")
EnableGroup("fly",0)
ResetTimers()
DeleteTemporaryTimers()
</send>
  </trigger>
  <trigger
   group="pianzi"
   match="你先拿\（take\）吧。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>showPile</send>
  </trigger>
  <trigger
   group="quest-list"
   match="你现在的任务是杀『(?P&lt;target&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestListCurrent","%&lt;target&gt;")

</send>
  </trigger>
  <trigger
   group="msg-team"
   match="你现在的任务是替(.+)送信给(.+)。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; cancel message again")
Doafterspecial(2,"msgCancel",10)
</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="你现在的任务是替(.+)送信给(.+)。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; cancel message again")
Doafterspecial(2,"msgCancel",10)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)冰冰"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)芳儿"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("west;west;give flower to fang;whisper")
pushSingleAction("east;east;giveSilver;whisper;delivery")
startAction(false)

</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)方玉香"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-xiang")
pushSingleAction("give flower to xiang;whisper")
pushSingleAction("xiang-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)风"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)高亚男"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-ml")
pushSingleAction("ml-w")
pushSingleAction("ml-cx")
pushSingleAction("cx-cxn")
pushSingleAction("cxn-hua")
pushSingleAction("hua-hua1")
pushSingleAction("northdown;give flower to gao;whisper")
pushSingleAction("hua1-hua")
pushSingleAction("hua-cxn")
pushSingleAction("cxn-cx")
pushSingleAction("cx-ml")
pushSingleAction("ml-n")
pushSingleAction("ml-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)胡金袖"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("flowerCancel")
--[[
initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-cxn")
pushSingleAction("cxn-gw")
pushSingleAction("gw-sunshine")
pushSingleAction("give flower to sunshine;whisper")
pushSingleAction("sunshine-gw")
pushSingleAction("gw-cxn")
pushSingleAction("cxn-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("whisper;delivery")
startAction(false)
]]
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)姬夫人"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)姬灵燕"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fyw")
pushSingleAction("fyw-jx")
pushSingleAction("give flower to ji;whisper")
pushSingleAction("jx-fyw")
pushSingleAction("fyw-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)金灵芝"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-ml")
pushSingleAction("ml-w")
pushSingleAction("ml-cx")
pushSingleAction("cx-cxn")
pushSingleAction("cxn-jinlingzhi")
pushSingleAction("give flower to jin;whisper")
pushSingleAction("north;give flower to jin;south;whisper")
pushSingleAction("jinlingzhi-cxn")
pushSingleAction("cxn-cx")
pushSingleAction("cx-ml")
pushSingleAction("ml-n")
pushSingleAction("ml-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)蓝阳光"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("flowerCancel")

--[[
initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-cxn")
pushSingleAction("cxn-gw")
pushSingleAction("gw-sunshine")
pushSingleAction("give flower to sunshine;whisper")
pushSingleAction("sunshine-gw")
pushSingleAction("gw-cxn")
pushSingleAction("cxn-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("whisper;delivery")
startAction(false)
]]
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)冷"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-leng")
pushSingleAction("give flower to leng;whisper")
pushSingleAction("leng-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)齐小燕"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("flowerCancel")
--[[
initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-cxn")
pushSingleAction("cxn-gw")
pushSingleAction("gw-gw1")
pushSingleAction("gw1-qixiaoyan")
pushSingleAction("give flower to qi;whisper")
pushSingleAction("qixiaoyan-gw1")
pushSingleAction("gw1-gw")
pushSingleAction("gw-cxn")
pushSingleAction("cxn-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("whisper;delivery")
startAction(false)
]]
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)曲无容"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)沈"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fyn")
pushSingleAction("fyn-jn")
pushSingleAction("jn-qp")
pushSingleAction("qp-dm")
pushSingleAction("dm-ts")
pushSingleAction("ts-ts1")
pushSingleAction("ts1-ts2")
pushSingleAction("east;give flower to shen;west;whisper")
pushSingleAction("ts2-ts1")
pushSingleAction("ts1-ts")
pushSingleAction("ts-dm")
pushSingleAction("dm-qp")
pushSingleAction("qp-jn")
pushSingleAction("jn-fyn")
pushSingleAction("fyn-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)宋甜儿"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fyn")
pushSingleAction("fyn-jn")
pushSingleAction("southup;southdown;east;give flower to song;west;northup;northdown;whisper")
pushSingleAction("jn-fyn")
pushSingleAction("fyn-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)苏红儿"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("west;south;east;give flower to suhong;whisper")
pushSingleAction("west;north;east;giveSilver;whisper;delivery")
startAction(false)

</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)苏蓉蓉"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fyn")
pushSingleAction("fyn-jn")
pushSingleAction("east;give flower to su;west;whisper")
pushSingleAction("jn-fyn")
pushSingleAction("fyn-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)孙"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fyw")
pushSingleAction("southeast;give flower to sun;northwest;whisper")
pushSingleAction("fyw-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)田心"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)小铃儿"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-ml")
pushSingleAction("ml-w")
pushSingleAction("ml-cx")
pushSingleAction("cx-cxn")
pushSingleAction("cxn-hua")
pushSingleAction("east;give flower to linger;west;whisper")
pushSingleAction("hua-cxn")
pushSingleAction("cxn-cx")
pushSingleAction("cx-ml")
pushSingleAction("ml-n")
pushSingleAction("ml-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)小桃红"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)雅芳"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-yafang")
pushSingleAction("give flower to yafang;whisper")
pushSingleAction("yafang-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)

</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)燕珊"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("huaman-fy")
pushSingleAction("fy-fys")
pushSingleAction("fys-ml")
pushSingleAction("ml-w")
pushSingleAction("ml-cx")
pushSingleAction("cx-huang")
pushSingleAction("huang-yanshan")
pushSingleAction("give flower to yan;whisper")
pushSingleAction("yanshan-huang")
pushSingleAction("huang-cx")
pushSingleAction("cx-ml")
pushSingleAction("ml-n")
pushSingleAction("ml-fys")
pushSingleAction("fys-fy")
pushSingleAction("fy-huaman")
pushSingleAction("giveSilver;whisper;delivery")
startAction(false)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)箫飞雨"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="flower"
   match="你现在的任务是替(?P&lt;nouse&gt;.*)箫曼风"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>flowerCancel</send>
  </trigger>
  <trigger
   group="quest"
   match="你现在的任务是寻『(?P&lt;qitem&gt;.*)』。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestItem","%&lt;qitem&gt;")
SetVariable("varQuestNpc","")
SetVariable("varQuestItemId",0)
SetVariable("varQuestItemAfterKill",0)
Note("quest item: %&lt;qitem&gt;")
Execute("doQuestItem")</send>
  </trigger>
  <trigger
   group="quest-list"
   match="你现在的任务是寻『(?P&lt;target&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestListCurrent","%&lt;target&gt;")

</send>
  </trigger>
  <trigger
   group="quest-return-list"
   match="你现在的任务是寻『(?P&lt;target&gt;.+)』。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>listQuestActiveQueue.push("%&lt;target&gt;")

</send>
  </trigger>
  <trigger
   group="sleepstudy"
   match="你现在过於疲倦，无法专心下来研读新知。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varSleepStudyNeedRest",1)
</send>
  </trigger>
  <trigger
   group="zong-dugu"
   match="你现在精力不够，无法控制内息的流动！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>dz</send>
  </trigger>
  <trigger
   group="jump_practice_research"
   match="你现在太累了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varResearchLimit",1)</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="你现在太累了，结果什麽也没有研究出来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varSleepPRRest",1)
</send>
  </trigger>
  <trigger
   group="sleep_research"
   match="你现在太累了，结果什麽也没有研究出来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varResearchRest",1)
</send>
  </trigger>
  <trigger
   group="usemark"
   match="你现在正忙"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(2,"usemark",10)</send>
  </trigger>
  <trigger
   group="summon-team"
   match="你现在正在忙！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt;summon busy")
local t=GetVariable("varSummonTarget")
Doafterspecial(2,"inform " .. t,10)</send>
  </trigger>
  <trigger
   group="quest"
   match="你想行窃的对象不在这里。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("whisper")</send>
  </trigger>
  <trigger
   group="quest-kill"
   match="你想行窃的对象不在这里。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-kill",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="move"
   match="你想要御龙去的地方不可以用唤龙决！"
   regexp="y"
   sequence="100"
  >
  <send>look</send>
  </trigger>
  <trigger
   group="ty_in"
   match="你向右一扑！野兔向左一闪，你落了个空。 "
   regexp="y"
   sequence="100"
  >
  <send>catch rabbit</send>
  </trigger>
  <trigger
   group="damo"
   match="你嘘了口气。起来活动了一下手腿。"
   regexp="y"
   sequence="100"
  >
  <send>mianbi</send>
  </trigger>
  <trigger
   group="tasknoc"
   match="你血脉不畅，真气受滞，一时竟然不能施展神通。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>whisper</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="你血脉不畅，真气受滞，一时竟然不能施展神通。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("flyTarget")
Note("---&gt; try fly " .. t.. " later")
DoAfterSpecial(5,"goo " .. t,10)
</send>
  </trigger>
  <trigger
   group="liutree_down"
   match="你沿着树干慢慢爬了上去，坐到了横在湖面的柳树干上。"
   regexp="y"
   sequence="100"
  >
  <send>down
climb tree</send>
  </trigger>
  <trigger
   group="eat-rice"
   match="你要吃什么东西？"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>stopp</send>
  </trigger>
  <trigger
   enabled="y"
   group="move"
   match="你要丢弃什麽东西？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local d=GetVariable("commandBreak")
if d~=nil and d~="none" and d~="" then
Note("---&gt; auto command broken, going to run break command " .. d)
--SetVariable("commandBreak","none")
--Execute("stopp")
Doafterspecial(2,d,10)
 else 
Note("---&gt; auto command broken, no break command defined.")
Execute("whisper")
end
</send>
  </trigger>
  <trigger
   group="mission-poke-other"
   match="你要对谁做这个动作？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local c=GetVariable("varMissionPokeOtherCount")
local t=GetVariable("varMissionPokeOtherTarget")
local f=mapGhostNpc[t];
if c==0 and f~=nil and f~="" then
Note("--&gt; try to ghost " .. t)
SetVariable("varMissionPokeOtherCount",1)
Execute("ghostHelp " .. t.. ";aasee")
 else 
initActionQueue()
Note("--&gt; unable to poke " .. t.. ", abort mission")
Execute("endActionGroup mission-poke-other;missionPokeOtherFail")
end</send>
  </trigger>
  <trigger
   group="mission-wait"
   match="你要对谁做这个动作？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varTeamFlyHelper")
Doafterspecial(5,"poke " .. t,10)
</send>
  </trigger>
  <trigger
   group="ginseng-checkdugu"
   match="你要对谁做这个动作？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengDuguClear","yes")
</send>
  </trigger>
  <trigger
   group="mission-poke"
   match="你要对谁做这个动作？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("endActionGroup mission-poke")</send>
  </trigger>
  <trigger
   group="heisong_up"
   match="你要对谁做这个动作？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("heisong_up",0)
Execute("north;whisper")
</send>
  </trigger>
  <trigger
   group="quest-askreturn"
   match="你要关闭什麽？$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local d=GetVariable("varQuestReturnDone")
if d==1 then
EnableGroup("quest-askreturn",0)
Execute("whisper")
 else 
Note("---&gt; wait for qust return finish")
Doafterspecial(2,"close",10)
end
</send>
  </trigger>
  <trigger
   group="msg-team"
   match="你要过(.+)秒之后才可继续送信。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Execute("de")
Doafterspecial(2,"messenger",10)
</send>
  </trigger>
  <trigger
   group="msg-smk"
   match="你要过(.+)秒之后才可继续送信。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>
DoAfterSpecial(2,"messenger",10)
</send>
  </trigger>
  <trigger
   group="msg"
   match="你要过(.+)秒之后才可继续送信。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--Execute("de")
DoAfterSpecial(2,"messenger",10)
</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="你要过(.+)秒之后才可继续送信。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Execute("de")
Doafterspecial(2,"messenger",10)
</send>
  </trigger>
  <trigger
   group="flower"
   match="你要过(?P&lt;nouse&gt;.*)之后才可继续送花"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfter(5,"delivery")</send>
  </trigger>
  <trigger
   group="learn_master"
   match="你要回答什"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local tmp=GetVariable("varLearnFlag")
if tmp==1 then
Execute("duan-jump")
 else 
local sk=GetVariable("varLearnSkill")
Send("learn " .. sk.. " from master with 10")
Send("learn " .. sk.. " from master with 10")
Send("learn " .. sk.. " from master with 10")
Send("reply")
end
</send>
  </trigger>
  <trigger
   group="jump_practice_research"
   match="你要捡起什"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>doJumpPracticeResearch</send>
  </trigger>
  <trigger
   group="manglin-top"
   match="你要看什麽？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("manglin-top",0)
--Execute("whisper")
Note("---&gt; manglin passed, run next action")
Execute("actionNextRun")</send>
  </trigger>
  <trigger
   group="bat_wave"
   match="你要看什麽？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
EnableGroup("bat_wave",0)
Execute("whisper")
--DoAfterSpecial(0.5,"whisper",10)</send>
  </trigger>
  <trigger
   group="check-weapon"
   match="你要看什麽？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varCheckWeaponLost",1)
</send>
  </trigger>
  <trigger
   group="wm_road"
   match="你要看什麽？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(2,"look north",10)
</send>
  </trigger>
  <trigger
   group="manglin"
   match="你要看什麽？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>varSwing=GetVariable("varLastSwingDir")
varDir=GetVariable("varManglinDir")
if varSwing~=varDir then
 if varSwing=='东' then
 Execute("west;west")
 end
 if varSwing=='南' then
 Execute("north;north")
 end
 if varSwing=='西' then
 Execute("east;east")
 end
 if varSwing=='北' then
 Execute("south;south")
 end
 if varDir=='东' then
 Execute("ml-e")
 end
 if varDir=='南' then
 Execute("ml-s")
 end
 if varDir=='西' then
 Execute("ml-w")
 end
 if varDir=='北' then
 Execute("ml-n")
 end
else 
 EnableGroup("manglin",0)
 Note("---&gt; manglin passed, run next action")
 Execute("actionNextRun")
 --Send("whisper")
end</send>
  </trigger>
  <trigger
   group="ginseng-pill"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local r=GetVariable("varGinsengPillReady")
if r=="yes" then
EnableGroup("ginseng-pill",0)
Execute("whisper")
 else 
local h=GetVariable("varPillHelper")
Execute("tell " .. h.. " pillall-5")
Doafterspecial(10,"look pill;ask",10)
end</send>
  </trigger>
  <trigger
   group="gaa"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("gaa",0)</send>
  </trigger>
  <trigger
   group="taskfinger"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("taskfinger",0)
local nlist=ArrayExportKeys("tasknpclist",",").split(",")
local i;
fori=0;i&lt;nlist.length;i++ then
local f=varMyQueue1.dequeue()
if f=="player") ArrayDeleteKey("tasknpclist",nlist[i])
end
Execute("taskkill")</send>
  </trigger>
  <trigger
   group="sleepstudy"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local r=GetVariable("varSleepStudyNeedRest")
if r==1 then
Execute("sleep")
 else 
Execute("doSleepStudy")

end</send>
  </trigger>
  <trigger
   group="tasklocateall"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("task locate all trgger")
local act="";
local isend=false;
if varMyQueue1.isEmpty() then
Execute("tasklocatealldone")
end
else
{
fori=0;i&lt;5;i++ then
 if varMyQueue1.isEmpty() then
 isend=true;
 break;
 end
 act=act.. "locate " .. varMyQueue1.dequeue().. ";";
 if varMyQueue1.isEmpty() then
 isend=true;
 break;
 end
end
if isend)
act=act.. "ask";
else
act=act.. "ask";
Execute(act)
end</send>
  </trigger>
  <trigger
   group="check-status"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local kee=GetVariable("varMyKee")
local jin=GetVariable("varMyJin")
local shen=GetVariable("varMyShen")
local mkee=GetVariable("varMyMaxKee")
local mjin=GetVariable("varMyMaxJin")
local mshen=GetVariable("varMyMaxShen")

local force=GetVariable("varMyForce")
local mforce=GetVariable("varMyMaxForce")

local jr=GetVariable("varMyJinRate")
local kr=GetVariable("varMyKeeRate")
local sr=GetVariable("varMyshenRate")
local fd=GetVariable("varMyFood")
local wt=GetVariable("varMyWater")
local sq=GetVariable("varMySha")

local poison=GetVariable("varPoison")

if fd&lt;30 or wt&lt;30 then
Execute("fd;hp;ask")

endelse if sq&gt;50 then
Execute("north;east;east;east;east;south;salute;hp")
Doafterspecial(1,"hp;north;west;west;west;west;south;ask",10)

endelse if mforce==0 then
Execute("tuna;hp")
Doafterspecial(1,"ask",10)


/*
endelse if jr&lt;=97 or kr&lt;=97 or sr&lt;=97 then
local g=GetVariable("varMyGender")
if g=="male" then
Execute("north;north;north;north;west;west;north;west;kill chu chu;ss2")
Doafterspecial(6,"west;jump;open door",10)
--Doafterspecial(200,"jump",10)
--Doafterspecial(400,"jump",10)
--Doafterspecial(600,"jump",10)
 else 
Execute("north;north;north;north;east;east;north;east;kill jin tong;ss2")
Doafterspecial(6,"east;wash;open door",10)
--Doafterspecial(200,"wash",10)
--Doafterspecial(400,"wash",10)
--Doafterspecial(600,"wash",10)
end
*/

endelse if jr&lt;=96 then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pill-gin")
Doafterspecial(6,"use pill;east;hp;ask",10)

endelse if kr&lt;=96 then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pill-kee")
Doafterspecial(6,"use pill;east;hp;ask",10)

endelse if sr&lt;=96 then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pill-sen")
Doafterspecial(6,"use pill;east;hp;ask",10)


endelse if force&lt;=.8*mforce then
Execute("ex " .. parseInt(0.5*mforce))
Doafterspecial(2,"hp;ask",10)
--Doafterspecial(3,"dz",10)

/*
endelse if jr&lt;=98 or kr&lt;=98 or sr&lt;=98 then
Execute("aa0;hp")
Doafterspecial(2,"ask",10)
*/

endelse if kee&lt;=.95*mkee or shen&lt;=.95*mshen or jin&lt;=.95*mjin then
Execute("dz")


endelse if poison==1 then
Execute("aa9")
SetVariable("varPoison",0)
Doafterspecial(2,"ask",10)

 else 
EnableGroup("check-status",0)
Execute("whisper")
end
</send>
  </trigger>
  <trigger
   group="sky_learn"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local n=GetVariable("varLearnSkyNext")
if n==1 then
SetVariable("varLearnSkyNext",0)
Execute("popQueue learnskill")
local n=GetVariable("varPopQueue")
if n=="nil" then
Execute("stopp")
 else 
SetVariable("varLearnSkill",n)
end
end
local f=GetVariable("varSkyLearnJumpflag")
local master=GetVariable("varLearnMaster")
local amount=GetVariable("varLearnAmount")
local sk=GetVariable("varLearnSkill")
if f==1 then
SetVariable("varSkyLearnJumpflag",0)
Execute("ex1 1000")
Doafterspecial(3,"fd;dz",10)
Doafterspecial(8,"ask",10)
--SetVariable("varSkyLearnJumpflag",0)
--Execute("down;down;north;north;north")
--Execute("west;west;north;west;open door;west;jump")
--DoAfterSpecial(3,"east;east;south;east;east",10)
--Execute("east;east;north;east;open door;east;wash")
--DoAfterSpecial(3,"west;west;south;west;west",10)
--DoAfterSpecial(4,"south;south;south;up;up;ask",10)
 else 
--Send("learn " .. sk.. " from " .. master.. " with " .. amount)
Send("learn " .. sk.. " from " .. master.. " with " .. amount)
Send("learn " .. sk.. " from " .. master.. " with " .. amount)
Send("learn " .. sk.. " from " .. master.. " with " .. amount)
Send("learn " .. sk.. " from " .. master.. " with " .. amount)
--Send("learn " .. sk.. " from " .. master.. " with " .. amount)
Execute("ask")
end
</send>
  </trigger>
  <trigger
   group="quest-item"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local zhanjia=GetVariable("varCheckItemZhanjia")
local yeguo=GetVariable("varCheckItemYeguo")
local sword=GetVariable("varCheckItemSword")
local whip=GetVariable("varCheckItemWhip")
local cash=GetVariable("varCheckItemCash")
local seal=GetVariable("varCheckItemSeal")
local pill=GetVariable("varCheckItemPill")

Execute("resetQuestItem")

if zhanjia=="no" then
Execute("south;south;south;east;buy zhanjia from xiangling;wear zhanjia")
Doafterspecial(4,"id;west;north;north;north;ask",10)

endelse if yeguo=="no" then
Execute("south;south;south;east;buy ye guo from xiangling;wear zhanjia")
Doafterspecial(4,"id;west;north;north;north;ask",10)

endelse if cash=="no" then
Execute("south;south;south;south;east;wit 1000000")
Doafterspecial(4,"id;west;north;north;north;north;ask",10)

endelse if seal=="no" then
Execute("north;west;west;west;north;buy back seal from xian")
Doafterspecial(4,"id;south;east;east;east;south;ask",10)

endelse if sword=="no" then
Execute("north;north;north;north;north;west;buy sword from zhuge")
Doafterspecial(4,"id;east;south;south;south;south;south;ask",10)
/*
endelse if whip=="no" then
Execute("north;north;north;north;north;west;buy whip from zhuge")
Doafterspecial(4,"id;east;south;south;south;south;south;ask",10)
*/

endelse if pill=="no" then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pill-all")
Doafterspecial(6,"id;ask",10)

 else 
EnableGroup("quest-item",0)
Execute("whisper")
end</send>
  </trigger>
  <trigger
   group="quest-list-item"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-list-item",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="wait-poke"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local d=GetVariable("varWaitPokeDone")
if d=="yes" then
EnableGroup("wait-poke",0)
Execute("whisper")
 else 
local t=GetVariable("varWaitPokeTarget")
Doafterspecial(1.5,"poke " .. t.. ";ask",10)
end
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varPillType")
local e=GetVariable("varPillEname")
if t=="all pill" then
  Execute("pp0 pill;use pill;pillLian")
--elseif t=="gin pill" then
--Execute("use pill;pillLian")
--elseif t=="kee pill"
--Execute("use pill;pillLian")
--else if (t=="sen pill"){
--Execute("pp4 pilluse pillpillLian")
elseif t=="atman wan" then
  Execute("use wan;pillLian")
else
--//not pill
  Execute("pillLianItem ".. e)
end</send>
  </trigger>
  <trigger
   group="checkrzr"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("checkrzr",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="taskreturn"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local i=0;
local m=varMyQueue1.getSize()
if m&gt;0 then
pushSingleAction("goo2 rar")
fori=0;i&lt;m;i++ then
local t=varMyQueue1.dequeue()
--Execute("settaskreturn " .. varMyQueue1.dequeue())
pushSingleAction("gg0 " .. t.. ";pp " .. t.. ";whisper")
end
end
pushSingleAction("taskreturndone;restoreMoves")
startAction(true)
</send>
  </trigger>
  <trigger
   group="quest-return-return"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-return-return",0)
local r=GetVariable("varQuestReturnReward") 
if r==1 then
Execute("doQuestReturn")
 else 
Execute("whisper")
Execute("tt ...")
Execute("tt quest-return-end")
EnableGroup("quest-ask",1)
end</send>
  </trigger>
  <trigger
   group="mission-item-fly"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local zhanjia=GetVariable("varCheckItemZhanjia")
local yeguo=GetVariable("varCheckItemYeguo")
local sword=GetVariable("varCheckItemSword")
local whip=GetVariable("varCheckItemWhip")
local cash=GetVariable("varCheckItemCash")
local seal=GetVariable("varCheckItemSeal")
local pill=GetVariable("varCheckItemPill")
local pxshan=GetVariable("varCheckItemPxshan")
local fork=GetVariable("varCheckItemFork")
local usepxshan=GetVariable("varMissionUsePxshan")

Execute("resetMissionItem")

if zhanjia=="no" then
Execute("south;south;south;east;buy zhanjia from xiangling;wear zhanjia")
Doafterspecial(4,"id;west;north;north;north;ask",10)

endelse if yeguo=="no" then
Execute("south;south;south;east;buy ye guo from xiangling;wear zhanjia")
Doafterspecial(4,"id;west;north;north;north;ask",10)

endelse if cash=="no" then
Execute("south;south;south;south;east;wit 1000000")
Doafterspecial(4,"id;west;north;north;north;north;ask",10)

endelse if seal=="no" then
Execute("north;west;west;west;north;buy back seal from xian")
Doafterspecial(4,"id;south;east;east;east;south;ask",10)

endelse if sword=="no" then
Execute("north;north;north;north;north;west;buy sword from zhuge")
Doafterspecial(4,"id;east;south;south;south;south;south;ask",10)

endelse if whip=="no" then
Execute("north;north;north;north;north;west;buy whip from zhuge")
Doafterspecial(4,"id;east;south;south;south;south;south;ask",10)

endelse if pill=="no" then
local ph=GetVariable("varPillHelper")
Execute("west;tell " .. ph.. " pill-all")
Doafterspecial(6,"id;ask",10)
/*
endelse if fork=="no" then
Note("---&gt; lost fork, stop mission now")
Execute("stopp")
*/

 else 
EnableGroup("mission-item-fly",0)
Execute("whisper")
end</send>
  </trigger>
  <trigger
   group="ginseng-checkdugu"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local c=GetVariable("varGinsengDuguClear")
if c=="yes" then
EnableGroup("ginseng-checkdugu",0)
Execute("up;gsCheckNumberone")
 else 
Note("---&gt; wait for dugu clear")
Doafterspecial(20,"poke dugu chi;ask",10)
end</send>
  </trigger>
  <trigger
   group="questitem"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("questitem",0)
local i=GetVariable("varQuestItemId")
if i~=0 then
Note("found item!!!")
Execute("qu " .. i)
local cname=GetVariable("varQuestItem")
local ename=ArrayGet("questitemnamelist",cname)
Execute("give " .. ename.. " to tianji")
DoAfterSpecial(2,"askQuest",10)
 else 
local f=GetVariable("varQuestItemAfterKill")
if f==0 then
Note("go kill npc for item")
Execute("doQuestItemFromKill")
 else 
Note("item not found")
Execute("askQuest")
end
end</send>
  </trigger>
  <trigger
   group="ginseng-checknumberone"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ginseng-checknumberone",0)
Execute("gsFightNumberone")</send>
  </trigger>
  <trigger
   group="ques-returnt-list"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-return-list",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="tasklocatenear"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local act="";
local isend=false;
if varMyQueue1.isEmpty() then
Execute("tasklocateneardone")
end
else
{
fori=0;i&lt;6;i++ then
 if varMyQueue1.isEmpty() then
 isend=true;
 break;
 end
 act=act.. "locate " .. varMyQueue1.dequeue().. ";";
 if varMyQueue1.isEmpty() then
 isend=true;
 break;
 end
end
if isend)
act=act.. "ask";
else
act=act.. "ask";
Execute(act)
end</send>
  </trigger>
  <trigger
   group="check-rewardbox"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("check-rewardbox",0)</send>
  </trigger>
  <trigger
   group="quest-list"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-list",0)
generateActiveQuestQueue()
local quests=listQuestActiveQueue.join(",")
Note("---&gt; active quest from newest:" .. quests)
Execute("whisper")
</send>
  </trigger>
  <trigger
   group="sleep_research"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local r=GetVariable("varResearchRest")
SetVariable("varResearchRest",0)
if r==1 then
Execute("sleep")
 else 
Execute("doSleepResearch")
end</send>
  </trigger>
  <trigger
   group="paa"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("paa",0)
initActionQueue()
local i=0;
local c="";
local n;
while(varMyQueue1.getSize()&gt;0 then
n=varMyQueue1.dequeue()
c=c.. "gg0 " .. n.. ";give laipi " .. n.. ";";
local a=c.. "waitSec 1";
pushSingleAction(a)
c="";
end
startAction(true)</send>
  </trigger>
  <trigger
   group="checkgold"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("checkgold",0)
local b=GetVariable("myGoldAmount")
if tonumber(b)&gt;9 then
local a=b-9;
Execute("pp " .. a.. " gold")
end
Execute("whisper")</send>
  </trigger>
  <trigger
   group="ginseng-up-move"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local f=GetVariable("varGinsengUpMoveFail")
local r=GetVariable("varGinsengUpMoveFailRecover")
local fr=GetVariable("varGinsengUpMoveFullRecover")
local b=GetVariable("varGinsengUpMoveBusy")


if f=="yes" then
Execute("gsUpMoveAgain")

endelse if r=="yes" then
initActionQueue()
pushSingleAction("fd;dz;checkBusy")
pushSingleAction("gsUpMoveAgain")
startAction(true)

endelse if b=="yes" then
initActionQueue()
pushSingleAction("fd;checkBusy")
pushSingleAction("gsUpMoveAgain")
startAction(true)

 else 
 EnableGroup("ginseng-up-move",0)
 local nextmove=varMyList1.shift()
 if nextmove~=nil and nextmove~="" then
 Execute("gsUpMove " .. nextmove)
 else 
 EnableGroup("ginseng-up-move",0)
 Execute("gsWaitForFight")
 end
end</send>
  </trigger>
  <trigger
   group="loopjob"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("hp")
local jin=GetVariable("varMyJin")
local maxjin=GetVariable("varMyMaxJin")
local kee=GetVariable("varMyKee")
local maxkee=GetVariable("varMyMaxKee")
local shen=GetVariable("varMyShen")
local maxshen=GetVariable("varMyMaxShen")
local force=GetVariable("varMyForce")
local maxforce=GetVariable("varMyMaxForce")
local water=GetVariable("varMyWater")
local food=GetVariable("varMyFood")
if jin&lt;=maxjin/2 or kee&lt;=maxkee/2 or shen&lt;=maxshen/2 then
if water&lt;=6 or food&lt;=6 then
Execute("de")
--Execute("sleep")
DoAfterSpecial(4,"dazuo",10)
 else 
--Execute("sleep")
Execute("dz")
--Execute("ex1 300")
--DoAfterSpecial(2,"ex 550",10)
--DoAfterSpecial(4,"dazuo",10)
end
 else 
local loopjob=GetVariable("varLoopJob")
Execute(loopjob)
end

</send>
  </trigger>
  <trigger
   group="smart-research-p1"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local c=parseInt(GetVariable("varResearchP1Count"))

local nowLevel=parseInt(GetVariable("varResearchNowLevel"))
local startLevel=parseInt(GetVariable("varResearchStartLevel"))
local startPoint=parseInt(GetVariable("varResearchStartPoint"))
local nowPoint=parseInt(GetVariable("varResearchNowPoint"))

if nowLevel&gt;startLevel then
--research up one level
local levelPoint=2*(nowLevel+1)*(nowLevel+1)+1-startPoint;
SetVariable("varResearchP1Point",levelPoint)
SetVariable("varResearchStartPoint",0)
SetVariable("varResearchStartLevel",nowLevel)
Note("---&gt; research up one level, new start level " .. nowLevel.. " new start point 0")
end

if c&gt;=10 then
local levelPoint=parseInt(GetVariable("varResearchP1Point"))
local totalPoint=nowPoint-startPoint+levelPoint;
local totalPot=100*8*10;
local rate=totalPoint/totalPot;
Note("---&gt; research P1 completed, total point " .. totalPoint.. ", research rate " .. rate)
SetVariable("varResearchPotRate",rate)
Execute("doSmartResearchP2")

 else 
c=c+1;
Note("---&gt; smart research P1 count " .. c)
SetVariable("varResearchP1Count",c)
Execute("doSmartResearch")
end</send>
  </trigger>
  <trigger
   group="clearbag"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("clearbag",0)
initActionQueue()
while (varMyQueue1.getSize()&gt;0 then
local id=varMyQueue1.dequeue()
pushSingleAction("qu " .. id.. ";pp0 all;whisper")
end
startAction(true)</send>
  </trigger>
  <trigger
   group="quest-return-checkcorpse"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-return-checkcorpse",0)
Execute("drop corpse;whisper")</send>
  </trigger>
  <trigger
   group="ginseng-maze-move"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local f=GetVariable("varGinsengMazeMoveFail")
local r=GetVariable("varGinsengMazeMoveRecover")
if f=="yes" then
EnableGroup("ginseng-maze-move-dz1",1)
EnableGroup("ginseng-maze-move-dz2",0)
Doafterspecial(8,"fd;dz",10)

endelse if r=="yes" then
EnableGroup("ginseng-maze-move",0)
EnableGroup("ginseng-maze-move-dz1",0)
EnableGroup("ginseng-maze-move-dz2",1)
Execute("fd;dz")

 else 
EnableGroup("ginseng-maze-move-dz1",0)
EnableGroup("ginseng-maze-move-dz2",0)
EnableGroup("ginseng-maze-move",0)
Execute("drop 1 coin;gsMazeLook")
end</send>
  </trigger>
  <trigger
   group="smart-research-p2"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local myint=GetVariable("varResearchNowInt")
local startint=GetVariable("varResearchStartInt")
if myint&lt;startint then
Note("---&gt;smart pill gone, stop research")
Execute("stopp")
 else 

local targetLevel=parseInt(GetVariable("varResearchTargetLevel"))
local nowLevel=parseInt(GetVariable("varResearchNowLevel"))
local startLevel=parseInt(GetVariable("varResearchStartLevel"))
local startPoint=parseInt(GetVariable("varResearchStartPoint"))
local nowPoint=parseInt(GetVariable("varResearchNowPoint"))

if nowLevel&gt;=targetLevel then
Note("---&gt;target level reached, stop research")
Execute("stopp")
 else 

if nowLevel&gt;startLevel then
--research up one level
SetVariable("varResearchStartPoint",0)
SetVariable("varResearchStartLevel",nowLevel)
Note("---&gt; research up one level, new start level " .. nowLevel.. " new start point 0")
Execute("score;ask")
end
else{

local p=parseFloat(GetVariable("varResearchRoundPercentage"))

local levelTotalPoint=2*(nowLevel+1)*(nowLevel+1)+1;
local remainPoint=levelTotalPoint-nowPoint;
remainPoint=remainPoint*p;
local rate=parseFloat(GetVariable("varResearchPotRate"))
local pots=remainPoint/rate;
pots=parseInt(pots/8)
if pots&lt;150)
pots=150;

SetVariable("varResearchPots",pots)
Note("---&gt; research pots " .. pots)
Execute("doSmartResearch")

--end of checking level up
end

--end of checking target level
end

--end of checking int
end</send>
  </trigger>
  <trigger
   group="check-pill"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p=GetVariable("countMyPill")
Note("---&gt; pill found:" .. p)
if p=="1" then
  EnableGroup("check-pill",0)
  Execute("whisper")
else
  Execute("out;south;south;east;north;ggpill")
  DoAfterSpecial(5,"south;west;north;north;enter;look pill;ask",10)
end</send>
  </trigger>
  <trigger
   group="check-corpse-gold-item"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varMissionTarget")
if t=="tang wushuang" then
--Execute("gac;drop cloth")
end
if t=="tang ao" then
--Execute("gac")
end
EnableGroup("check-corpse-gold-item",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="dali_yao"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("west;south;east;east;east;east")
DoAfterSpecial(1,"dle-jump",10)</send>
  </trigger>
  <trigger
   group="getpearl"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("getpearl",0)
local pid=GetVariable("varTaskPearlId")
if pid==0 then
Execute("whisper")
 else 
Execute("qu " .. pid)
DoAfterSpecial(2,"whisper",10)
end</send>
  </trigger>
  <trigger
   group="ginseng-redeem"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ginseng-redeem",0)
Execute("redeem " .. GetVariable("varGinsendRedeemYeguoId"))
Doafterspecial(4,"redeem " .. GetVariable("varGinsendRedeemSwordId").. ";checkBusy",10)
</send>
  </trigger>
  <trigger
   group="ginseng-deposit"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ginseng-deposit",0)
local a=GetVariable("varGinsengDepositAmount")
if a~=0 then
Execute("dep1 " .. a.. ";checkBusy")
 else 
Execute("whisper")
end</send>
  </trigger>
  <trigger
   group="tasklist"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("tasklist",0)
Note("init task name:" .. ArraySize("taskalllist"))
--Execute("whisper")</send>
  </trigger>
  <trigger
   group="dali_letter"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local g=GetVariable("varDaliGX")
if g&gt;=34560 then
Execute("stopp")
 else 
DoAfterSpecial(4,"ask fan about letter",10)
end</send>
  </trigger>
  <trigger
   group="openbox"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("openbox",0)
Execute("waitSec 1")</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local r=GetVariable("varSleepPRRest")
local a=GetVariable("varSleepPRAction")
if r==1 then
SetVariable("varSleepPRRest",0)
Execute("fd;sleep")
endelse if a=="practice" then
Execute("doSleepPractice")
endelse if a=="research" then
Execute("doSleepResearch")
end</send>
  </trigger>
  <trigger
   group="dali_tea"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local f=GetVariable("varDaliTeaDone")
if f==1 then
SetVariable("varDaliTeaDone",0)
DoAfterSpecial(1,"east;east;north;north;north;west;give hua tea flower;ask hua about chahua",10)
 else 
DoAfterSpecial(1,"fill pen pot;jiao;fill pen pot;jiao;fill pen pot;jiao;fill pen pot;jiao;ask",10)
end
</send>
  </trigger>
  <trigger
   group="mission-check-wiz"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local o=GetVariable("varMissionCheckWizOnline")
if p=="yes" then
SetVariable("varMissionCheckWizOnline","no")
Doafterspecial(60,"friend;ask",10)
 else 
EnableGroup("mission-check-wiz",0)
Execute("whisper")
end</send>
  </trigger>
  <trigger
   group="ginseng-maze-look"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local end=GetVariable("varGinsengMazeMoveReach")

if end=="yes" then
EnableGroup("ginseng-maze-look",0)
EnableGroup("ginseng-maze-move",0)
EnableGroup("ginseng-maze-move-dz1",0)
EnableGroup("ginseng-maze-move-dz2",0)
Note("---&gt; start to move up ladder")
Execute("gsUpMoveStart")

 else 

local d=GetVariable("varGinsengMazeLookDir")
local c=GetVariable("varGinsengMazeLookCoin")
Note("---&gt; mapping dir " .. d.. " with coin " .. c)
mapMazeCoin[d]=c;

if d=="west" then
local nd="north";
SetVariable("varGinsengMazeLookDir",nd)
SetVariable("varGinsengMazeLookCoin",0)
Note("---&gt; maze coin amount " .. c)
Execute("look " .. nd.. ";ask")
end
if d=="north" then
local nd="east";
SetVariable("varGinsengMazeLookDir",nd)
SetVariable("varGinsengMazeLookCoin",0)
Note("---&gt; maze coin amount " .. c)
Execute("look " .. nd.. ";ask")
end
if d=="east" then
local nd="south";
SetVariable("varGinsengMazeLookDir",nd)
SetVariable("varGinsengMazeLookCoin",0)
Note("---&gt; maze coin amount " .. c)
Execute("look " .. nd.. ";ask")
end

if d=="south" then
Note("---&gt; maze coin amount " .. c)
SetVariable("varGinsengMazeLookDir","")
SetVariable("varGinsengMazeLookCoin",0)

local movedir="west";
local leastcoin=mapMazeCoin["west"];
if mapMazeCoin["north"]&lt;leastcoin) {
 leastcoin=mapMazeCoin["north"];
 movedir="north";
end
if mapMazeCoin["east"]&lt;leastcoin) {
 leastcoin=mapMazeCoin["east"];
 movedir="east";
end
if mapMazeCoin["south"]&lt;leastcoin) {
 leastcoin=mapMazeCoin["south"];
 movedir="south";
end
Note("---&gt; move dir is " .. movedir.. " with " .. leastcoin.. " coins")
EnableGroup("ginseng-maze-look",0)
SetVariable("varGinsengMazeMoveDir",movedir)
Execute("gsMazeMove")
end

end</send>
  </trigger>
  <trigger
   group="quest-return-list"
   match="你要问谁什麽事？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("quest-return-list",0)
Execute("whisper")
</send>
  </trigger>
  <trigger
   group="damo"
   match="你要向谁求教？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp")
DeleteTemporaryTimers()
DoAfterSpecial(6,"mianbi",10)</send>
  </trigger>
  <trigger
   group="smart-research-p1"
   match="你要用外功做什麽？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local p=GetVariable("varResearchNowPoint")
local l=GetVariable("varResearchNowLevel")
SetVariable("varResearchStartPoint",p)
SetVariable("varResearchStartLevel",l)

local myint=GetVariable("varResearchNowInt")
SetVariable("varResearchStartInt",myint)

Note("---&gt; set research start level " .. l .. " start point " .. p)
Execute("doSmartResearch")

</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="你一脚落空，滚下了山岭。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Doafterspecial(60,"goo gao yanan",10)</send>
  </trigger>
  <trigger
   group="msg-team2"
   match="你已错过上一个任务。等下一个吧。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>msgCancel</send>
  </trigger>
  <trigger
   group="dali_yao"
   match="你已经没力气挖了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("west;south;east;east;east;east")
DoAfterSpecial(1,"dle-jump",10)</send>
  </trigger>
  <trigger
   group="eat-rice"
   match="你已陷身流沙之中！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("umk")
pushSingleAction("startEatRice")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="move"
   match="你因为不够熟练而失败了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ResetTimers()
DeleteTemporaryTimers()
local t=GetVariable("varFlyTarget")
local f=GetVariable("varFlyMode")
DoAfterSpecial(1,"goo" .. f.. " " .. t,10)</send>
  </trigger>
  <trigger
   group="msg-fly"
   match="你又在流沙中陷深了一些！！你几乎在绝望中哭了出来！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
Doafterspecial(5,"reconnectWorld",10)
DoafterSpecial(10,"resumeMsgFly",10)</send>
  </trigger>
  <trigger
   group="msg-team"
   match="你又在流沙中陷深了一些！！你几乎在绝望中哭了出来！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
Doafterspecial(5,"reconnectWorld",10)
DoafterSpecial(10,"resumeMsgTeam",10)</send>
  </trigger>
  <trigger
   group="msg-smk"
   match="你又在流沙中陷深了一些！！你几乎在绝望中哭了出来！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
Doafterspecial(5,"reconnectWorld",10)
DoafterSpecial(10,"resumeMsgSmk",10)</send>
  </trigger>
  <trigger
   group="msg2"
   match="你又在流沙中陷深了一些！！你几乎在绝望中哭了出来！！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;quit")
DoAfterSpecial(5,"reconnectWorld",10)
DoAfterSpecial(10,"resumeMsg",10)</send>
  </trigger>
  <trigger
   group="huashan_yadi"
   match="你再抬头看时，红嘴乌鸦已不见踪影。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>huashan-yadidone</send>
  </trigger>
  <trigger
   group="event"
   match="你在(.*)的耳边悄声说道：(?P&lt;event&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt;event: " .. '%&lt;event&gt;')
if '%&lt;event&gt;'=='AUTOEXEC' then
Execute("autoExec")
 else 
onEvent('%&lt;event&gt;')
end
</send>
  </trigger>
  <trigger
   group="mission-request"
   match="你在(.+)后才可要任务。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Doafterspecial(20,"mission",10)
Note("---&gt; wait 20 seconds for next mission")</send>
  </trigger>
  <trigger
   group="shenshui-lighter"
   match="你在黑暗中搜索了一阵。"
   regexp="y"
   sequence="100"
  >
  <send>search</send>
  </trigger>
  <trigger
   group="shenshui-lighter"
   match="你在墙壁上摸到了一个象铜灯的东西。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("shenshu-lighter",0)
Execute("gg0 lighter;use lighter;pp0 lighter;whisper")</send>
  </trigger>
  <trigger
   group="sleep_pr"
   match="你睁开了眼睛，一个鲤鱼打挺从床上跳了下来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local r=GetVariable("varSleepPRRecover")
local action="doSleepPractice";
if GetVariable("varSleepPRAction")=="research")
action="doSleepResearch";
if r==1 then
SetVariable("varSleepPRRecover",0)
local f=GetVariable("varMyMaxForce")
f=f*1.2;
Execute("ex " .. f)
Doafterspecial(2,action,10)
 else 
Execute(action)
end
</send>
  </trigger>
  <trigger
   group="loopjob"
   match="你睁开了眼睛，一个鲤鱼打挺从床上跳了下来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("up;up")
local loopjob=GetVariable("varLoopJob")
Execute(loopjob)</send>
  </trigger>
  <trigger
   group="sleep_research"
   match="你睁开了眼睛，一个鲤鱼打挺从床上跳了下来。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>doSleepResearch</send>
  </trigger>
  <trigger
   group="sleepstudy"
   match="你睁开了眼睛，一个鲤鱼打挺从床上跳了下来。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>sk
doSleepStudy</send>
  </trigger>
  <trigger
   group="autokill-abort"
   match="你只觉得身子不断变轻，一直变轻，一直变轻，一直变轻，一直变轻 .....|你举起矶宝梵天紫金消浊器摇了摇，贯注了真气的矶宝梵天紫金消浊器突然之间就响彻云霄。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
Note("---&gt; autokill abort done")
EnableGroup("autokill-perform",0)
EnableGroup("autokill-busy",0)
EnableGroup("autokill-abort",0)
Execute("checkBusy")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="poison"
   match="你中的(.+)发作了！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPoison",1)
--SetVariable("varInPoison",1)
--Execute("aa9;aa9")
</send>
  </trigger>
  <trigger
   group="manglin-top"
   match="你抓紧树枝，用力向(.*)方荡去！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("manglin-top",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="manglin"
   match="你抓紧树枝，用力向北方荡去"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable('varLastSwingDir','北')</send>
  </trigger>
  <trigger
   group="manglin"
   match="你抓紧树枝，用力向东方荡去"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable('varLastSwingDir','东')</send>
  </trigger>
  <trigger
   group="manglin"
   match="你抓紧树枝，用力向南方荡去"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable('varLastSwingDir','南')</send>
  </trigger>
  <trigger
   group="manglin"
   match="你抓紧树枝，用力向西方荡去"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable('varLastSwingDir','西')</send>
  </trigger>
  <trigger
   group="robot_bat"
   match="你自言自语不知道在说些什麽。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local s=GetVariable("varMySha")
if s&gt;=200 then
DoAfterSpecial(2,"mmk2",10)
DoAfterSpecial(3,"dive;de;cu;",10)
DoAfterSpecial(6,"exert powerfade",10)
DoAfterSpecial(8,"umk",10)
DoAfterSpecial(9,"robotBat",10)
 else 
DoAfterSpecial(1,"robotBat",10)
end
</send>
  </trigger>
  <trigger
   group="ty_in"
   match="你左扑右挡紧紧地跟着野兔"
   regexp="y"
   sequence="100"
  >
  <send>catch rabbit</send>
  </trigger>
  <trigger
   group="ghost-npc"
   match="浓雾立刻消失了．．．"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varGhostTarget")
local c=GetVariable("varGhostFailCount")
c=parseInt(c)+1;
if c&gt;2 then
EnableGroup("ghost-npc",0)
Execute("whisper")
 else 
SetVariable("varGhostFailCount",c)
Execute("curse ghostcurse")
Send(t)
end</send>
  </trigger>
  <trigger
   group="pianzi"
   match="佩服，佩服，这是你的二两金锭。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Doafterspecial(6,"startPianzi",10)</send>
  </trigger>
  <trigger
   group="dqd_road"
   match="平台"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
EnableGroup("dqd_road",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="ccd-down"
   match="平台"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ccd-down",0)
Execute("whisper")
</send>
  </trigger>
  <trigger
   group="dq-py"
   match="平原路"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dq-py",0)
Send("whisper")</send>
  </trigger>
  <trigger
   group="dqroad-east3"
   match="平原路$"
   regexp="y"
   sequence="100"
  >
  <send>east</send>
  </trigger>
  <trigger
   enabled="y"
   group="myinfo"
   match="气血(\s\s)(\S\S)(\s*)(?P&lt;kee&gt;\d*)(\s*)/(\s*)(?P&lt;maxkee&gt;\d*)(\s*)\((\s*)(?P&lt;keerate&gt;\d*)%\)(\s+)饮水(\S\S)(\s*)(?P&lt;water&gt;\d*)%"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusKee",%&lt;kee&gt;)
SetVariable("statusMaxKee",%&lt;maxkee&gt;)
SetVariable("statusWater",%&lt;water&gt;)
SetVariable("statusKeeRate",%&lt;keerate&gt;)

</send>
  </trigger>
  <trigger
   group="fly_ty"
   match="青青石板路"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_ty",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="tasklocatenear"
   match="确定不了(?P&lt;ename&gt;.*)的大概位置。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//ArrayDeleteKey("taskavailablelist","%&lt;ename&gt;")
--ArrayDeleteKey("tasknearbylist","%&lt;ename&gt;")
varMyQueue2.enqueue("gone")
</send>
  </trigger>
  <trigger
   group="tasklocateall"
   match="确定不了(?P&lt;ename&gt;.*)的大概位置。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//ArrayDeleteKey("taskavailablelist","%&lt;ename&gt;")
--ArrayDeleteKey("tasknearbylist","%&lt;ename&gt;")
varMyQueue2.enqueue("gone")
</send>
  </trigger>
  <trigger
   group="dqe-bat-t"
   match="人间地狱"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dqe-bat-t",0)
Execute("east;whisper")</send>
  </trigger>
  <trigger
   group="quest"
   match="任务被你完成，你被奖励了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varQuestDone",1)</send>
  </trigger>
  <trigger
   group="quest-list"
   match="任务已经开始了(?P&lt;sec&gt;.+)秒。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local s=chineseToNum("%&lt;sec&gt;")
local q=GetVariable("varQuestListCurrent")
mapQuestQueue[q]=s;
Note("---&gt; quest " ..  q.. " time " .. s.. " seconds")</send>
  </trigger>
  <trigger
   group="shenshui_up"
   match="溶洞"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("shenshui_up",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="mz_job"
   match="如果你要和天宗狂徒性命相搏"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local a=GetVariable("varWWMZ")
--Execute(a)
</send>
  </trigger>
  <trigger
   group="fate-tyfog"
   match="乳白色的晨雾，弥漫了林间大地，在阳光的照耀下闪烁着迷人的紫色"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fate-tyfog",0)
Note("---&gt; fate!!!")
Execute("fate;whisper")
</send>
  </trigger>
  <trigger
   group="ty_in"
   match="山峰背后"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ty_in",0)
Execute("listen;southeast;whisper")
</send>
  </trigger>
  <trigger
   group="huang_in"
   match="山水画荡了回来，又遮住了暗门。"
   regexp="y"
   sequence="100"
  >
  <send>open picture
west</send>
  </trigger>
  <trigger
   group="meng-mission"
   match="山西劫匪脚下一个不稳，跌在地上一动也不动了。"
   regexp="y"
   sequence="100"
  >
  <send>kill gangster
kill gangster 2</send>
  </trigger>
  <trigger
   group="fate-huang-qingliang"
   match="山中，寂静的夜，别有一番滋味在心头。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fate-huang-qingliang-move",0)
Note("---&gt; wait for sun rise")
</send>
  </trigger>
  <trigger
   group="dq-py"
   match="山中小路"
   regexp="y"
   sequence="100"
  >
  <send>east</send>
  </trigger>
  <trigger
   group="dqroad-east2"
   match="山中小路$"
   regexp="y"
   sequence="100"
  >
  <send>east</send>
  </trigger>
  <trigger
   group="ghost-npc"
   match="身边渐渐得浓缩成一个黑影．．．"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("ghost-npc",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="jiedu"
   match="失败"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(2,"aa9",10)</send>
  </trigger>
  <trigger
   group="damo"
   match="石壁上面隐隐约约显示出一个人像"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>startLearnMaster iron-cloth</send>
  </trigger>
  <trigger
   group="huang_in"
   match="石级甬道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("huang_in",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="fly_ghost"
   match="石屋"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_ghost",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="ty_in"
   match="什么？"
   regexp="y"
   sequence="100"
  >
  <send>around
catch rabbit</send>
  </trigger>
  <trigger
   group="dwg_in"
   match="什么？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("touch 恶人像;east")</send>
  </trigger>
  <trigger
   group="bat_dash"
   match="什么？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"nod",10)</send>
  </trigger>
  <trigger
   group="checkfaint"
   match="什么？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"nod",10)</send>
  </trigger>
  <trigger
   group="bat_in"
   match="什么？"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"nod",10)</send>
  </trigger>
  <trigger
   group="task"
   match="侍女脚下一个不稳，跌在地上一动也不动了。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>k girl
k girl 2
k girl 3
</send>
  </trigger>
  <trigger
   group="stone_y2"
   match="手也不听话了，砚台做坏了，这是我家传砚台"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
initActionQueue()
pushSingleAction("east;de;mmk2;waitSec 2")
pushSingleAction("goo2 alpha")
pushSingleAction("tell alpha GGstone;waitSec 3")
pushSingleAction("goo2 nangong")
pushSingleAction("east;south;west;westup;westup;westdown;south;westup;whisper")
pushSingleAction("gg0 yanzhi;give girl yanzhi;kill girl;waitSec 3")
pushSingleAction("umk")
pushSingleAction("west;give luo tea;give luo stone;kick")
startAction(false)

</send>
  </trigger>
  <trigger
   group="general"
   match="刷新了,该干嘛干嘛去！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("countQuest",0)
SetVariable("envRefresh",1)
</send>
  </trigger>
  <trigger
   group="dqd_up"
   match="说道：“这位公子请留步。”"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill girl")
DoAfterSpecial(1,"eastup",10)</send>
  </trigger>
  <trigger
   group="quest-kill"
   match="死了。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local c=GetVariable("varQuestKillCorpseAmount")
c=parseInt(c)+1;
--limit to 5 corpses
if c&lt;=5 then;
SetVariable("varQuestKillCorpseAmount",c)
Note("---&gt; new corpse")
end</send>
  </trigger>
  <trigger
   group="fate-huang-qingliang"
   match="四周一片白雾茫茫，你什么也看不清楚。"
   regexp="y"
   sequence="100"
  >
  <send>EnableGroup("fate-huang-qingliang-move",1)</send>
  </trigger>
  <trigger
   group="summon-team"
   match="似乎没有空闲来接收信鸽。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup summon-team</send>
  </trigger>
  <trigger
   group="taskreward"
   match="宋长清并不要你的松牌"
   regexp="y"
   sequence="100"
  >
  <send>kill song</send>
  </trigger>
  <trigger
   group="taskreturn"
   match="宋长清并不要你的松牌。"
   regexp="y"
   sequence="100"
  >
  <send>kill song</send>
  </trigger>
  <trigger
   enabled="y"
   group="myitem"
   match="搜出一件布衣"
   regexp="y"
   sequence="100"
  >
  <send>drop cloth</send>
  </trigger>
  <trigger
   enabled="y"
   match="所有使命将在二分钟后重新分布！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local now=new Date().getTime() / 1000;
Note("---&gt; task refresh in 2 minutes")
SetVariable("varTaskRefreshNoticeTime",now)</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="它能让你迅速恢复精力损伤"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillType","gin pill");
Note("---&gt; gin pill");</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="它能让你迅速恢复气血损伤"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillType","kee pill");
Note("---&gt; kee pill");</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="它能让你迅速恢复所有损伤"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillType","all pill")
Note("---&gt; all pill")</send>
  </trigger>
  <trigger
   group="check-pill"
   match="它能让你迅速恢复所有损伤。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("countMyPill",1)
Note("---&gt; found pill")</send>
  </trigger>
  <trigger
   group="ginseng-pill"
   match="它能让你迅速恢复所有损伤。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengPillReady","yes")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="它能让你迅速恢复心神损伤"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillType","sen pill")
Note("---&gt; sen pill")</send>
  </trigger>
  <trigger
   group="fly_yaren"
   match="探花诗台"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_yaren",0)
DoAfterSpecial(2,"whisper",0)</send>
  </trigger>
  <trigger
   group="yaren_in"
   match="探花诗台"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("yaren_in",0)
Execute("ww0;whisper")</send>
  </trigger>
  <trigger
   group="fate_ts"
   match="天光似乎越来越垂直了。"
   regexp="y"
   sequence="100"
  >
  <send>south</send>
  </trigger>
  <trigger
   group="quest-list"
   match="天机老人说道：请"
   regexp="y"
   send_to="13"
   sequence="100"
  >
  <send>quest</send>
  </trigger>
  <trigger
   group="quest"
   match="天机老人说道：请替天机老人杀了『(?P&lt;qnpc&gt;.*)』。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local count=GetVariable("countQuest")
++count;
SetVariable("countQuest",count)
Note("---&gt; Quest count:" .. count)
SetVariable("varQuestItem","")
local t=ArrayGet("questnpclist","%&lt;qnpc&gt;")
SetVariable("varQuestNpc",t)
--Note("quest npc:%&lt;qnpc&gt; " .. e)
Execute("doQuestNpc %&lt;qnpc&gt;")</send>
  </trigger>
  <trigger
   group="quest"
   match="天机老人说道：请找回『(?P&lt;qitem&gt;.*)』给天机老人。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local count=GetVariable("countQuest")
++count;
SetVariable("countQuest",count)
Note("---&gt; Quest count:" .. count)
SetVariable("varQuestItem","%&lt;qitem&gt;")
SetVariable("varQuestNpc","")
SetVariable("varQuestItemId",0)
SetVariable("varQuestItemAfterKill",0)
Note("quest item: %&lt;qitem&gt;")
Execute("doQuestItem")</send>
  </trigger>
  <trigger
   group="ginseng-checknumberone"
   match="天下第一人(.+)\((?P&lt;id&gt;.+)\)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local id="%&lt;id&gt;".toLowerCase()
Note("---&gt; numberone id " .. id)
SetVariable("varGinsengNumberoneId",id)
</send>
  </trigger>
  <trigger
   group="li_in"
   match="铁传甲死了"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("li_in",0)
DoAfterSpecial(4,"ww0;ef 100;open curtain;north;ef 0;whisper",10)</send>
  </trigger>
  <trigger
   group="manglin"
   match="听着耳边的呼呼风声，你不禁惊叫道："
   regexp="y"
   sequence="100"
  >
  <send>look vine</send>
  </trigger>
  <trigger
   group="bat_wave"
   match="突然间，你的船触礁了！一个大浪打来，你被抛入空中"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
EnableGroup("bat_wave",0)
Execute("whisper")
--DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="fate-huang-tiandu"
   match="突然间白云象海潮一般涌来，转眼四周都是白茫茫的雾"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fate-huang-tiandu",0)
Note("---&gt;fate!!!")
Execute("fate;whisper")</send>
  </trigger>
  <trigger
   group="liutree_up"
   match="突然脚下一滑，扑通一声掉进了水里"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>up</send>
  </trigger>
  <trigger
   group="liutree_down"
   match="突然脚下一滑，扑通一声掉进了水里。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("liutree_down",0)
DoAfterSpecial(2,"whisper",10)
--DoAfterSpecial(2,"up",10)</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="土匪喽罗用短剑"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ss3</send>
  </trigger>
  <trigger
   group="npc-nopass"
   match="往东离开。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; location refreshed")
local last=GetVariable("timeNopassRefresh")
if last==nil then last=0 end
last=tonumber(last)
local now=os.time()
SetVariable("timeNopassRefresh",now)
local dif=now-last
local max=GetVariable("timeNopassMax")
if max==nil then max=0 end
max=tonumber(max)
if dif&gt;max then SetVariable("timeNoPassMax",dif) end
Note("---&gt; max no pass:" .. max)
</send>
  </trigger>
  <trigger
   group="npc-nopass"
   match="往西南离开。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; location refreshed")
local last=GetVariable("timeNopassRefresh")
if last==nil then last=0 end
last=tonumber(last)
local now=os.time()
SetVariable("timeNopassRefresh",now)
local dif=now-last
local max=GetVariable("timeNopassMax")
if max==nil then max=0 end
max=tonumber(max)
if tonumber(dif)&gt;tonumber(max) then SetVariable("timeNoPassMax",dif) end
Note("---&gt; max no pass:" .. max)
</send>
  </trigger>
  <trigger
   group="move-dqw"
   match="危崖前"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("move-west",0)
Execute("east;south")
EnableGroup("move-south",1)</send>
  </trigger>
  <trigger
   group="dqroad-west"
   match="危崖前"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("dqroad-west",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="bat_book"
   match="魏行龙无可奈何地从怀里掏出一本书递给你。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("bat_book",0)
Execute("pp0 book;whisper")</send>
  </trigger>
  <trigger
   group="mission-kill-fengsan"
   match="武功看起来好象(?P&lt;desc&gt;.+)，出手"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local now=parseInt(new Date().getTime()/1000)
local due=GetVariable("varMissionDueTime")
local dif=due-now;
if dif&lt;=5 then
Note("---&gt; mission due time!!!")
EnableGroup("mission-kill-fengsan",0)
Execute("ss1")
SetVariable("varAutokillList",GetVariable("varAutokillListKillFengsan"))

endelse if "%&lt;desc&gt;"~="深不可测" and "%&lt;desc&gt;"~="深藏不露" and "%&lt;desc&gt;"~="震古铄今" and "%&lt;desc&gt;"~="惊世骇俗" and "%&lt;desc&gt;"~="举世无双" and "%&lt;desc&gt;"~="神功盖世"  and "%&lt;desc&gt;"~="一代宗师"  and "%&lt;desc&gt;"~="所向披靡"  and "%&lt;desc&gt;"~="登峰造极"  and "%&lt;desc&gt;"~="傲视群雄" and "%&lt;desc&gt;"~="出神入化"  and "%&lt;desc&gt;"~="神乎其技" and "%&lt;desc&gt;"~="技冠群雄" and "%&lt;desc&gt;"~="无可匹敌" and "%&lt;desc&gt;"~="出类拔萃" and "%&lt;desc&gt;"~="已有大成" and "%&lt;desc&gt;"~="豁然贯通" and "%&lt;desc&gt;"~="略有大成" then
Note("---&gt; kill feng san time!!!")
EnableGroup("mission-kill-fengsan",0)
Execute("ss1")
SetVariable("varAutokillList",GetVariable("varAutokillListKillFengsan"))

 else 
Note("---&gt; feng san level:%&lt;desc&gt;, due seconds:" .. dif)
end
</send>
  </trigger>
  <trigger
   group="mz_job"
   match="武林盟主有令: 天宗人马在(?P&lt;mzloc&gt;.*)出现了！请马上去击退"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Execute("goMZ ".. "%&lt;mzloc&gt;")
varMyQueue.enqueue("%&lt;mzloc&gt;")
</send>
  </trigger>
  <trigger
   group="heisong_in"
   match="西花园"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("heisong_in",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="fate-wdleaf"
   match="现在没有风，抛不起来。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("south;north")
DoAfterSpecial(7,"throw leaf",10)</send>
  </trigger>
  <trigger
   group="yaren_in"
   match="向你喝道：＂皇公子所到之处，闲杂人等不可入内！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("k qinwei")
DoAfterSpecial(1.5,"north",10)</send>
  </trigger>
  <trigger
   group="autokill2"
   match="萧十一郎仰天狼嚎“呜～嗷～～，呜～嗷”，顿时漫山遍野群狼齐哮。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>kill xiao11
perform tianrenheyi xiao11</send>
  </trigger>
  <trigger
   group="wanmei-boat"
   match="小船漂了过来。。。。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
Execute("north;endActionGroup wanmei-boat")
</send>
  </trigger>
  <trigger
   group="dq-py"
   match="小路"
   regexp="y"
   sequence="100"
  >
  <send>east</send>
  </trigger>
  <trigger
   group="dqroad-west"
   match="小路"
   regexp="y"
   sequence="100"
  >
  <send>west</send>
  </trigger>
  <trigger
   group="dqroad-east1"
   match="小路$"
   regexp="y"
   sequence="100"
  >
  <send>east</send>
  </trigger>
  <trigger
   enabled="y"
   group="myinfo"
   match="心神(\s\s)(\S\S)(\s*)(?P&lt;shen&gt;\d*)(\s*)/(\s*)(?P&lt;maxshen&gt;\d*)(\s*)\((?P&lt;shenrate&gt;.+)%\)(\s+)评价(\S\S)(\s*)(-*)(?P&lt;score&gt;\d*)"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("statusShen",%&lt;shen&gt;)
SetVariable("statusMaxShen",%&lt;maxshen&gt;)
SetVariable("statusShenRate",%&lt;shenrate&gt;)
SetVariable("statusScore",%&lt;score&gt;)
</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="信鸽划过一道白色的弧线，飞回到(.*)手里。你在后面匆匆赶到。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//EnableGroup("mission-wait-summon",0)
Execute("missionHelpKill")
</send>
  </trigger>
  <trigger
   group="summon-team"
   match="信鸽划过一道白色的弧线，飞回到你手里。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("summon-team",0)
Execute("checkBusy")
</send>
  </trigger>
  <trigger
   match="信鸽划过一道白色的弧线，飞回到宁手里。你在后面匆匆赶到。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("fd;checkBusy")
pushSingleAction("autokill dugu chi")
pushSingleAction("checkCorpseGoldItem")
pushSingleAction("umk")
pushSingleAction("checkBusy")
pushSingleAction("autokill master")
pushSingleAction("checkCorpseGoldItem")
pushSingleAction("smk")

startAction(true)</send>
  </trigger>
  <trigger
   group="summon-team"
   match="信鸽无法发现你的队友！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup summon-team</send>
  </trigger>
  <trigger
   group="dqd_boat"
   match="许久许久，海面上什么也没有出现"
   regexp="y"
   sequence="100"
  >
  <send>blow pipe</send>
  </trigger>
  <trigger
   group="quest-action"
   match="烟雾中出现了牛头马面，二话不说，将枷锁镣铐往你头上一套．．．．"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>stopp</send>
  </trigger>
  <trigger
   group="fly_xg"
   match="耶丈室"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_xg",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="sky_learn"
   match="也许是因为缺乏经验，你对"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varLearnSkyNext",1)</send>
  </trigger>
  <trigger
   group="getpearl"
   match="夜明珠 ： (?P&lt;pid&gt;\d+) "
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local i="%&lt;pid&gt;";
SetVariable("varTaskPearlId",i)</send>
  </trigger>
  <trigger
   group="shenshui_swim"
   match="一股暗流又把"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--EnableGroup("shenshui_swim",0)
DoAfterSpecial(2,"swim",10)</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="一股股紫烟从鼎中冒出..."
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("gg0 pill;use pill;de;whisper")
Execute("checkBusy")
</send>
  </trigger>
  <trigger
   group="ginseng-up-move"
   match="一块巨大无匹的冰石从天而降，砸向你的额角"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengUpMoveFullRecover","yes")
Note("---&gt; up move fail with full damage, need to full recover")

initActionQueue()
--pushSingleAction("checkBusy")
pushSingleAction("ex1 700;checkBusy")
pushSingleAction("ex2 700;checkBusy")
pushSingleAction("ex3 700;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("gsUpMoveAgain")
Execute("checkBusy")
</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="一粒(.*)丸从红木宝鼎中跃出，落入你掌心。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillCName","")
SetVariable("varPillEName","wan")
SetVariable("varPillType","")
Execute("look wan;ask")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="一粒(?P&lt;cname&gt;.+)丹从红木宝鼎中跃出，落入你掌心。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillCName","")
SetVariable("varPillEName","pill")
SetVariable("varPillType","")
Execute("look pill;ask")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="一粒道家炼制的(.+)聚灵丸"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillType","atman wan")
Note("---&gt; atman wan")</send>
  </trigger>
  <trigger
   group="lian-pill"
   match="一声激越的清响，(?P&lt;item&gt;.+)从红木宝鼎中跃出，落入你掌心。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varPillCName","%&lt;item&gt;")
SetVariable("varPillType","")
Execute("id")</send>
  </trigger>
  <trigger
   group="ginseng-up-move"
   match="一声巨响，山摇地晃，闷雷阵阵，山崩了！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varGinsengUpMoveFullRecover","yes")
Note("---&gt; up move fail with full damage, need to full recover")
initActionQueue()
--pushSingleAction("checkBusy")
pushSingleAction("ex1 700;checkBusy")
pushSingleAction("ex2 700;checkBusy")
pushSingleAction("ex3 700;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("ex 2000;checkBusy")
pushSingleAction("hp;fd;dz;checkBusy")
pushSingleAction("gsUpMoveAgain")
Execute("checkBusy")
</send>
  </trigger>
  <trigger
   group="xiulian"
   match="一阵清风吹过~~"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local l=tonumber(GetVariable("countXiulian"))
Note("---&gt;xiulian count:" .. l)
if l==nil then l=1 else l=l+1 end
if tonumber(l) &gt;= 10 then
l=0
Execute("out;west;lian")
end
SetVariable("countXiulian",l)

</send>
  </trigger>
  <trigger
   group="riddle-sl-book"
   match="一阵微风从窗外吹过，你的眼睛不禁眨了一下。。。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("riddle-sl-book",0)
Execute("k mysterious figure")</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="一只白色的信鸽忽然飞来，在你头顶上下飞动，一个盘旋，向远处飞去。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
EnableGroup("mission-wait-summon",0)
--Execute("missionHelpKill")
</send>
  </trigger>
  <trigger
   group="summon-team"
   match="已经在你身边了！"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>endActionGroup summon-team</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="银花娘娇笑一声：姐姐我来了！"
   regexp="y"
   sequence="100"
  >
  <send>kill silver girl</send>
  </trigger>
  <trigger
   group="fly_ying"
   match="鹰记商号"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_ying",0)</send>
  </trigger>
  <trigger
   group="sl_door"
   match="影壁"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("sl_door",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="fly_lu"
   match="右边小洞"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_lu",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="fate-huang-guangming"
   match="云缓缓飘了过来，渐渐在山峰边汇成了一片云海"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fate-huang-guangming-move",0)</send>
  </trigger>
  <trigger
   group="mission-ask-fly"
   match="在(.+)内替山流杀了(?P&lt;cname&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=queryMissionNpc("%&lt;cname&gt;")
Note("---&gt; mission npc " .. t)
if t~=nil and t~="" then
SetVariable("varMissionTarget",t)
EnableGroup("mission-ask-fly",0)
Execute("missionGoKill")
 else 
Execute("tt ...;tt mission-request")
end

</send>
  </trigger>
  <trigger
   group="mission-ask"
   match="在(?P&lt;mtime&gt;.+)内替山流杀了(?P&lt;cname&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local missionSec=convertChineseTimeToNumber("%&lt;mtime&gt;")
local now=parseInt(new Date().getTime()/1000)
local missionDue=now+missionSec;
Note("---&gt; mission due time:" .. missionDue)
SetVariable("varMissionDueTime",missionDue)

local c="%&lt;cname&gt;";
local t=queryMissionNpc(c)
Note("---&gt; mission npc " .. t)
if t~=nil and t~="" then
if c=="吕迪" then
c="多儿甲";
t="Master duo";
end
SetVariable("varMissionName",c)
SetVariable("varMissionTarget",t)
if t=="feng san" then
Note("---&gt; mission target feng san!!!")
SetVariable("varMissionFengsan","yes")
end
 else 
Note("---&gt; unknown mission npc %&lt;cname&gt;")
SetVariable("varMissionName",c)
SetVariable("varMissionTarget","unknown")
--writeMissionLog("unknown mission target %&lt;cname&gt;")
--Execute("tt ...;tt mission-request")
end</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="在你的耳边悄声说道：SHEETFAIL$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//SetVariable("varTJLoc","%&lt;loc&gt;")
DoAfterSpecial(2,"sheetTasknpc",10)
</send>
  </trigger>
  <trigger
   group="tasknpc"
   match="在你的耳边悄声说道：SHEETLOC(?P&lt;loc&gt;.*)\|(?P&lt;desc&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>//Note("%&lt;loc&gt; %&lt;desc&gt;")
local loc="%&lt;loc&gt;".replace(" ","")
SetVariable("varTasknpcLoc",loc)
SetVariable("varTasknpcLocDesc","%&lt;desc&gt;")
Execute("findTasknpcArea")
</send>
  </trigger>
  <trigger
   enabled="y"
   match="在你的耳边悄声说道：silver"
   regexp="y"
   sequence="100"
  >
  <send>give 10 silver to guesta</send>
  </trigger>
  <trigger
   group="fate-huang-guangming"
   match="在引诱你往那里走。你可以选择跳或不跳。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("jump;fate")
EnableGroup("fate-huang-guangming",0)
Note("---&gt;fate!!!")
</send>
  </trigger>
  <trigger
   group="autokill2"
   match="在这里不要乱摸乱动！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
ResetTimers()
EnableGroup("autokill",0)
local l=GetVariable("varAutoKillLostSword")
if l==1 then
SetVariable("varAutoKillLostSword",0)
Execute("get sword")
end
local a=GetVariable("varAutokillDone")
Execute("look;" .. a)
</send>
  </trigger>
  <trigger
   group="quest-kill"
   match="糟糕！你失手了！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("ssAutokill")
EnableGroup("autokill",1)</send>
  </trigger>
  <trigger
   group="check-status"
   match="战斗中不能打坐，会走火入魔的。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Doafterspecial(5,"dz",10)</send>
  </trigger>
  <trigger
   group="move"
   match="战斗中无法使用唤龙诀！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ResetTimers()
DeleteTemporaryTimers()
local t=GetVariable("varFlyTarget")
DoAfterSpecial(10,"goo2 " .. t,10)</send>
  </trigger>
  <trigger
   group="move"
   match="战斗中无法使用土遁！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ResetTimers()
DeleteTemporaryTimers()
local t=GetVariable("varFlyTarget")
DoAfterSpecial(10,"goo3 " .. t,10)</send>
  </trigger>
  <trigger
   group="usemark"
   match="战斗中无法使用仙法"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("burn;ss1")
DoAfterSpecial(6,"usemark",10)</send>
  </trigger>
  <trigger
   group="smk"
   match="战斗中无法使用仙法！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("nian")
Doafterspecial(5,"smk",10)</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="战斗中无法使用游识神通！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
local t=GetVariable("flyTarget")
Note("---&gt; try fly " .. t.. " later")
DoAfterSpecial(5,"goo " .. t,10)
</send>
  </trigger>
  <trigger
   group="teamfly-host2"
   match="战斗中无法使用游识神通！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
Execute("nian")
local t=GetVariable("varFlyTarget")
DoAfterSpecial(2,"teamfly " .. t,10)
</send>
  </trigger>
  <trigger
   group="meng_down"
   match="账房先生用很一种奇怪的眼神瞄你"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill xiansheng;ss3")
DoAfterSpecial(6,"ww0;push bed",10)</send>
  </trigger>
  <trigger
   group="fly_mls"
   match="沼泽边缘"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_mls",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="renci_in"
   match="这个方向的路被南宫灵挡住了 。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill master nangong;ss2")
DoAfterSpecial(5,"north",10)</send>
  </trigger>
  <trigger
   group="fly"
   match="这里(.*)出口"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>--//Execute("noDir")
local t=GetVariable("varFlyTarget")
DoAfterSpecial(1,"whisper",10)
SetVariable("varFlyAway",1)
EnableGroup("fly",0)
if t=="flyme" then
Execute("tell flyme DONE")
end
</send>
  </trigger>
  <trigger
   group="fly"
   match="这里(.*)出路"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
SetVariable("varFlyAway",1)
EnableGroup("fly",0)
local t=GetVariable("varFlyTarget")
if t=="flyme" then
Execute("tell flyme DONE")
end

</send>
  </trigger>
  <trigger
   group="loopmove2"
   match="这里(.*)的出口是 (?P&lt;pattern&gt;.*)$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("%&lt;pattern&gt;")

if checkLoopPattern('%&lt;pattern&gt;') then
  Execute(GetVariable("varLoopMove"))
elseif checkLoopEndPattern('%&lt;pattern&gt;') then
  EnableGroup("loopmove",0)
  Execute(GetVariable("varLoopEndMove"))
else 
  Note("---&gt; no matching loop move")
end
</send>
  </trigger>
  <trigger
   group="loopjob"
   match="这里不允许打坐"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local loopjob=GetVariable("varLoopJob")
Execute("ex1 450")
DoAfterSpecial(2,"ex 400",10)
DoAfterSpecial(4,"ex2 100;" .. loopjob,10)
</send>
  </trigger>
  <trigger
   group="wm_road"
   match="这里的河床较宽，水流缓慢。河边的芦苇随风起伏荡漾，发出沙沙的声音"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("wm_road",0)
Execute("north;whisper")</send>
  </trigger>
  <trigger
   group="mission-kill"
   match="这里没有(.*)。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varKillTarget")
Note("---&gt; kill target dead or gone !!!")
if t~="abortkill")
SetVariable("varKillTarget","")
EnableGroup("mission-kill",0)
</send>
  </trigger>
  <trigger
   group="eat-rice"
   match="这里没有地方可以装水。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>usemark</send>
  </trigger>
  <trigger
   group="fly-xg"
   match="这里没有任何明显的出路。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly-xg",0)
Execute("waitSec 0.5")</send>
  </trigger>
  <trigger
   group="ty-out"
   match="这里没有任何明显的出路。"
   regexp="y"
   sequence="100"
  >
  <send>around</send>
  </trigger>
  <trigger
   group="kkpaper"
   match="这里没有这个人。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("kkpaper",0)
DoAfterSpecial(4,"whisper",10)</send>
  </trigger>
  <trigger
   group="cave-ntdl"
   match="这里没有这个人。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varCaveNtdlDone",1)</send>
  </trigger>
  <trigger
   group="ccd_road"
   match="这里明显的出口是 east 和 westdown"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
DoAfterSpecial(0.5,"westdown;northwest;southwest;west",10)</send>
  </trigger>
  <trigger
   group="dqd_road"
   match="这里明显的出口是 west 和 northeast"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(2,"northeast;southeast;eastup;east",10)
</send>
  </trigger>
  <trigger
   group="ccd_road"
   match="这里明显的出口是 westdown 和 east。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DeleteTemporaryTimers()
DoAfterSpecial(0.5,"westdown;northwest;southwest;west",10)</send>
  </trigger>
  <trigger
   group="loopmove"
   match="这里唯一的出口是 (?P&lt;e1&gt;.+)。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note ("---&gt; %&lt;e1&gt;")

if checkLoopPattern("%&lt;e1&gt;") then
  Execute(GetVariable("varLoopMove"))
elseif checkLoopEndPattern("%&lt;e1&gt;") then
  EnableGroup("loopmove",0)
  Execute(GetVariable("varLoopEndMove"))
else 
  Note("---&gt; no matching loop move")
end</send>
  </trigger>
  <trigger
   enabled="y"
   group="env"
   match="这里唯一的出口是 center。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varEnvAction","center")
</send>
  </trigger>
  <trigger
   group="ty-out"
   match="这里唯一的出口是 south。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("south;west;west;north;north;north;north;whisper")
EnableGroup("ty-out",0)</send>
  </trigger>
  <trigger
   group="ty-out"
   match="这里唯一的出口是 west。"
   regexp="y"
   sequence="100"
  >
  <send>west</send>
  </trigger>
  <trigger
   group="task"
   match="这里无法使用神通。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>ResetTimers()
DeleteTemporaryTimers()
local t=GetVariable("varFlyTarget")
Execute("noDir;east;mmk")
DoAfterSpecial(2,"goo2 " .. t,10)</send>
  </trigger>
  <trigger
   enabled="y"
   group="move"
   match="这里无法使用神通。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("drop")
</send>
  </trigger>
  <trigger
   group="sealfly"
   match="这么危险，你还有空去拿神灯出来?"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varFlyTarget")
Execute("ss3")
DoAfterSpecial(3,"goo4 " .. t,10)</send>
  </trigger>
  <trigger
   group="stone_y"
   match="这是加工好的砚台"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>drop yan tai</send>
  </trigger>
  <trigger
   group="manglin-top"
   match="这是一根粗壮光滑的树枝，现在对着正北方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='北' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin"
   match="这是一根粗壮光滑的树枝，现在对着正北方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='北' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin"
   match="这是一根粗壮光滑的树枝，现在对着正东方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='东' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin-top"
   match="这是一根粗壮光滑的树枝，现在对着正东方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='东' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin"
   match="这是一根粗壮光滑的树枝，现在对着正南方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='南' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin-top"
   match="这是一根粗壮光滑的树枝，现在对着正南方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='南' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin"
   match="这是一根粗壮光滑的树枝，现在对着正西方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='西' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="manglin-top"
   match="这是一根粗壮光滑的树枝，现在对着正西方。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local varDir=GetVariable("varManglinDir")
if varDir=='西' then
Send('swing vine')
 else 
Send('turn vine')
Send('look vine')
end</send>
  </trigger>
  <trigger
   group="sky_learn"
   match="这项技能你的程度已经不输你师父了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varLearnSkyNext",1)
</send>
  </trigger>
  <trigger
   group="shenshui_pearl"
   match="珍珠在石壁上组成各样的字句和图案，你看了几眼不觉面红耳赤心神荡漾。"
   regexp="y"
   sequence="100"
  >
  <send>look pearl</send>
  </trigger>
  <trigger
   group="ginseng-maze-move"
   match="阵阵寒风从你身边刮过，吹得你四肢麻木，寸步难行。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Note("---&gt; fail to move, need to recover damage")
SetVariable("varGinsengMazeMoveFail","yes")
--Doafterspecial(8,"fd;dz",10)
</send>
  </trigger>
  <trigger
   group="mission-request"
   match="执行时段错误"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>tt;tt mission-location-unknown</send>
  </trigger>
  <trigger
   group="seal_fly"
   match="只见一阵烟雾从天而降，你从中跳了出来！"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("seal_fly",0)
DoAfterSpecial(2,"whisper",10)</send>
  </trigger>
  <trigger
   group="sharen-knee"
   match="只听得卡卡两声，坐垫忽然一沉，你咕咚地往下掉了下去。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("sharen-knee",0)
Execute("whisper")</send>
  </trigger>
  <trigger
   group="sl_indoor"
   match="只有少林寺弟子才可以进入少林内院"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("kill monk")
DoAfterSpecial(1,"north",10)</send>
  </trigger>
  <trigger
   group="task"
   match="中止呼唤神龙"
   regexp="y"
   sequence="100"
  >
  <send>whisper</send>
  </trigger>
  <trigger
   group="taskreward"
   match="中止呼唤神龙。"
   regexp="y"
   sequence="100"
  >
  <send>whisper</send>
  </trigger>
  <trigger
   group="shenshui_swim"
   match="终于湿淋淋地爬到了岸上"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("shenshui_swim",0)
Execute("checkBusy")
--DoAfterSpecial(2,"whisper",10)</send>
  </trigger>
  <trigger
   match="重新分布所有使命．．．．．．重新分布完毕"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("varTaskRefresh",1)</send>
  </trigger>
  <trigger
   group="task"
   match="重新连线完毕。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>restartTask</send>
  </trigger>
  <trigger
   group="taskreward"
   match="重新连线完毕。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("stopp;goo rar")
DoAfterSpecial(10,"startTaskReward",10)</send>
  </trigger>
  <trigger
   group="npc-nopass"
   match="走了过来。|跳了过来。$"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("k wulapo trader&amp;dog&amp;tulufan trader&amp;bird&amp;ring seller&amp;ghost")
--DoAfterSpecial(10,"de",10)</send>
  </trigger>
  <trigger
   group="mission-search"
   match="组织任务被(.+)完成，你被奖励了："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varMissionTarget")
if t=="hulaolaoa" or t=="guo mie" or t=="gold girl")
SetVariable("varKillTarget","abortkill")
SetVariable("varMissionDone",1)

</send>
  </trigger>
  <trigger
   group="mission-help-kill"
   match="组织任务被(.+)完成，你被奖励了："
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local t=GetVariable("varMissionTarget")
if t=="hulaolaoa" or t=="guo mie" or t=="gold girl" or t=="gold man")
SetVariable("varKillTarget","abortkill")
--SetVariable("varMissionDone",1)

</send>
  </trigger>
  <trigger
   group="mission-request"
   match="组织任务取消了。$"
   regexp="y"
   sequence="100"
  >
  <send>mission</send>
  </trigger>
  <trigger
   group="mission-request2"
   match="组织现在还没有(.+)的情报。"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>tt;tt mission-location-unknown</send>
  </trigger>
  <trigger
   group="renci_in"
   match="丐帮私房"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("renci_in",0)
Send("whisper")</send>
  </trigger>
  <trigger
   group="fly_hell"
   match="冥府大道"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup("fly_hell",0)
DoAfterSpecial(1,"whisper",10)</send>
  </trigger>
  <trigger
   group="fly_sl"
   match="邸园精舍"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>DoAfterSpecial(1,"whisper",10)
EnableGroup("fly_sl",0)</send>
  </trigger>
  <trigger
   group="task"
   match="嗖地一下从你头上跳过．．．．．"
   regexp="y"
   send_to="10"
   sequence="100"
  >
  <send>kill monkey</send>
  </trigger>
  <trigger
   group="meng-mission"
   match="镖头擦擦额头上的汗水。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>Execute("de")</send>
  </trigger>
  <trigger
   group="meng-mission"
   match="镖头说道：这趟差总算是跑完了，你好好干，我走了。"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>initActionQueue()
pushSingleAction("umk")
pushSingleAction("west;west;south;south;south;south;enter;whisper")
pushSingleAction("checkHP")
pushSingleAction("checkPill")
pushSingleAction("out;north;north;north;north;east;east;dz;checkFaint")
pushSingleAction("smk")
pushSingleAction("ask meng about mission;accept mission;aa2;whisper")
startAction()

</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="^安生棺材店"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "huying")
SetVariable("varEnvAction","push coffin")</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="^焦都驿"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "max")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="^普生堂"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "pusheng")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="^太平客栈"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "hao")
</send>
  </trigger>
  <trigger
   enabled="y"
   group="buy"
   match="千银当铺"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "xiangling")
</send>
  </trigger>
  <trigger
   group="buy"
   match="鹰记商号"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "ying")
</send>
  </trigger>
  <trigger
   group="buy"
   match="迎宾酒家"
   regexp="y"
   send_to="12"
   sequence="200"
  >
  <send>SetVariable("varEnvBuyer", "waiter")
SetVariable("varEnvAction","bby jiduan;pp0 jiduan")</send>
  </trigger>
</triggers>
</muclient>
